!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rexplugins=e():t.rexplugins=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=139)}([function(t,e,i){"use strict";e.a={hleft:0,hcenter:1,hright:2,vtop:0,vcenter:1,vbottom:2,NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/}},function(t,e,i){"use strict";e.a={ODD_R:0,EVEN_R:1,ODD_Q:2,EVEN_Q:3}},function(t,e,i){"use strict";const s=Phaser.Scene;var r=function(t){return t instanceof s};e.a=function(t){return r(t)?t:t.scene&&r(t.scene)?t.scene:t.parent&&t.parent.scene&&r(t.parent.scene)?t.parent.scene:void 0}},function(t,e,i){"use strict";e.a=function(){}},function(t,e,i){"use strict";e.a=function(t){if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e]}},function(t,e,i){"use strict";i.d(e,"a",function(){return h}),i.d(e,"b",function(){return l}),i.d(e,"c",function(){return u}),i.d(e,"d",function(){return c}),i.d(e,"e",function(){return d});var s=i(1);const r=s.a.ODD_R,n=s.a.EVEN_R,o=s.a.ODD_Q,a=s.a.EVEN_Q;var h=function(t,e,i){var s;switch(t){case r:s=e-(i-(1&i))/2;break;case n:s=e-(i+(1&i))/2;break;case o:case a:s=e}return s},l=function(t,e,i){return-h(t,e,i)-u(t,e,i)},u=function(t,e,i){var s;switch(t){case r:case n:s=i;break;case o:s=i-(e-(1&e))/2;break;case a:s=i-(e+(1&e))/2}return s},c=function(t,e,i,s){var h;switch(t){case r:h=e+(s-(1&s))/2;break;case n:h=e+(s+(1&s))/2;break;case o:case a:h=e}return h},d=function(t,e,i,s){var h;switch(t){case r:case n:h=s;break;case o:h=s+(e-(1&e))/2;break;case a:h=s+(e+(1&e))/2}return h}},function(t,e,i){"use strict";var s=i(4);e.a=function(t,e){var i=Array.isArray(t);for(var r in void 0===e?e=i?[]:{}:Object(s.a)(e),i&&(e.length=t.length),t)e[r]=t[r];return e}},,function(t,e,i){"use strict";const s=Phaser.Events.EventEmitter,r=Phaser.Utils.Objects.GetValue;const n={no:0,lazy:1,always:2};e.a=class extends s{constructor(t,e){super(),this.parent=t,this._isRunning=!1,this.tickingState=!1,this.setTickingMode(r(e,"tickingMode",1))}boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}shutdown(){super.shutdown(),this.tickingState&&this.stopTicking()}setTickingMode(t){"string"==typeof t&&(t=n[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isRunning=!0,this}pause(){return this.isRunning=!1,this}resume(){return this.isRunning=!0,this}stop(){return this.isRunning=!1,this}complete(){this.isRunning=!1,0!==this.tickingMode&&this.emit("complete",this.parent,this)}}},function(t,e,i){"use strict";e.a=class{constructor(){this.items=[]}pop(){return this.items.length>0?this.items.pop():null}push(t){this.items.push(t)}pushMultiple(t){for(var e=0,i=t.length;e<i;e++)this.items.push(t[e]);t.length=0}}},function(t,e,i){"use strict";var s=i(21).nextTick,r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=c;var n=i(16);n.inherits=i(12);var o=i(40),a=i(28);n.inherits(c,o);for(var h=r(a.prototype),l=0;l<h.length;l++){var u=h[l];c.prototype[u]||(c.prototype[u]=a.prototype[u])}function c(t){if(!(this instanceof c))return new c(t);o.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||s(f,this)}function f(t){t.end()}Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),c.prototype._destroy=function(t,e){this.push(null),this.end(),s(e,t)}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";e.a=function(t,e,i){for(var s,r=t.points,n=0,o=r.length;n<o;n++)(s=r[n]).x+=e,s.y+=i;return t}},function(t,e,i){"use strict";e.a=function(t){return t<0?-t:t}},function(t,e,i){"use strict";var s=i(19),r={x:0,y:0},n=function(t,e){var i=this.board;return null===i?null:(r.x=t,r.y=e,i.getNeighborTileDirection(this.tileXYZ,r))};const o=s.a.uidKey,a=Phaser.Utils.Objects.IsPlainObject;class h{constructor(t,e){this.parent=t,s.a.add(this,e),this.board=null,this.blocker=!1,this.boot()}boot(){var t=typeof this.parent;"number"!==t&&"string"!==t&&this.parent.on&&this.parent.on("destroy",this.destroy,this)}destroy(){this.board&&this.board.removeChess(this[o]),s.a.remove(this[o]),this.parent=void 0,this.board=null}setBoard(t){return this.board=t,this}get tileXYZ(){return null==this.board?null:this.board.chessToTileXYZ(this[o])}setTileZ(t){if(null==this.board)return this;var e=this.tileXYZ;this.board.addChess(this.$uid,e.x,e.y,t)}setBlocker(t){return void 0===t&&(t=!0),this.blocker=t,this}setBlockEdge(t,e){!1===this.blocker&&(this.blocker={});var i=this.blocker;if(a(t)){var s=t;for(t in s)i[t]=s[t]}else void 0===e&&(e=!0),i[t]=e;return this}getBlockEdge(t){var e=this.blocker;return!1!==e&&(!!e.hasOwnProperty(t)&&e[t])}}var l={getTileDirection:n};Object.assign(h.prototype,l);var u=h,c=i(27);e.a=function(t){return Object(c.a)(t)?s.a.get(t):(t.hasOwnProperty("rexChess")||(t.rexChess=new u(t)),t.rexChess)}},function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,i(38).Buffer)},function(t,e,i){"use strict";e.a=function(t){for(var e=[],i=0;i<t;i++)e.push({x:0,y:0});return e}},function(t,e,i){"use strict";const s=Phaser.GameObjects.Zone,r=Phaser.GameObjects.Components,n=Phaser.Math.RotateAround,o=Phaser.Utils.Array;class a extends s{constructor(t,e,i,s,r,n){Array.isArray(s)&&(n=s,s=void 0),super(t,e,i,s,r),this.children=t.add.group(),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._flipX=!1,this._flipY=!1,this._alpha=1,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,n&&this.add(n)}destroy(t){this.scene&&(this.children.destroy(!0),this.children=void 0,super.destroy(t))}add(t){return Array.isArray(t)?this.addMultiple(t):this._add(t),this}addMultiple(t){return t.forEach(this._add,this),this}remove(t){return this.children.remove(t),this}clear(){return this.children.clear(),this}getChildren(){return this.children.getChildren()}getAllChildren(t){void 0===t&&(t=[]);for(var e,i=this.children.getChildren(),s=0,r=i.length;s<r;s++)e=i[s],t.push(e),e.hasOwnProperty("isRexContainerLite")&&t.push(...e.getAllChildren());return t}contains(t){if(this.children.contains(t))return!0;for(var e,i=this.children.getChildren(),s=0,r=i.length;s<r;s++)if((e=i[s]).isRexContainerLite&&e.contains(t))return!0;return!1}worldToLocal(t){return t.x-=this.x,t.y-=this.y,n(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t}localToWorld(t){return t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t.x*=this.scaleX,t.y*=this.scaleY,n(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}updateChildPosition(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var e=this.getLocalState(t);return t.x=e.x,t.y=e.y,this.localToWorld(t),t.scaleX=e.scaleX*this.scaleX,t.scaleY=e.scaleY*this.scaleY,void 0!==t.flipX&&(t.flipX=this.flipX?!e.flipX:e.flipX,t.flipY=this.flipY?!e.flipY:e.flipY),t.rotation=e.rotation+this.rotation,t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this}updateChildVisible(t){return t.visible=this.visible&&this.getLocalState(t).visible,this}updateChildAlpha(t){return t.alpha=this.alpha*this.getLocalState(t).alpha,this}updateChildMask(t){return null==this.mask?this:((this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this)}updateChildScrollFactor(t){return t.setScrollFactor(this.scrollFactorX,this.scrollFactorY),this}syncPosition(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildPosition,this),this}syncVisible(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildVisible,this),this}syncAlpha(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildAlpha,this),this}syncMask(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildMask,this),this}syncScrollFactor(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildScrollFactor,this),this}syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncMask(),this}getLocalState(t){return t.hasOwnProperty("rexContainer")||(t.rexContainer={}),t.rexContainer}resetChildState(t){var e=this.getLocalState(t);return e.x=t.x,e.y=t.y,this.worldToLocal(e),e.scaleX=h(t.scaleX,this.scaleX),e.scaleY=h(t.scaleY,this.scaleY),void 0!==t.flipX&&(e.flipX=t.flipX,e.flipY=t.flipY),e.rotation=t.rotation-this.rotation,e.alpha=h(t.alpha,this.alpha),e.visible=t.visible,this}setChildLocalPosition(t,e,i){var s=this.getLocalState(t);return s.x=e,s.y=i,this.updateChildPosition(t),this}_add(t){return this.children.add(t),this.resetChildState(t).updateChildVisible(t).updateChildScrollFactor(t).updateChildMask(t),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.syncPosition())}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.syncPosition())}get visible(){return super.visible}set visible(t){this.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return this._alpha}set alpha(t){this._alpha!==t&&(this._alpha=t,this.syncAlpha())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}setMask(t){return this.mask=t,this}clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children.getChildren()}getByName(t){return o.GetFirst(this.list,"name",t)}getRandom(t,e){return o.GetRandom(this.list,t,e)}getFirst(t,e,i,s){return o.GetFirstElement(this.list,t,e,i,s)}getAll(t,e,i,s){return o.GetAll(this.list,t,e,i,s)}count(t,e,i,s){return o.CountAllMatching(this.list,t,e,i,s)}swap(t,e){return o.Swap(this.list,t,e),this}moveTo(t,e){return o.MoveTo(this.list,t,e),this}setAll(t,e,i,s){return o.SetAll(this.list,t,e,i,s),this}resize(t,e){return this.setSize(t,e),this.updateDisplayOrigin(),this}}Object.assign(a.prototype,r.Alpha,r.Flip);var h=function(t,e){return t===e?1:t/e};e.a=a},function(t,e,i){"use strict";const s=Phaser.Utils.Objects.GetValue;var r=new class{constructor(t){this.nextId=s(t,"start",1),this.uidKey=s(t,"uidKey","$uid"),this.autoRemove=s(t,"remove",!0),this.refs={},this.count=0}add(t,e){var i=this.refs,s=this.uidKey;if(s&&null!=(e=t[s]))return this;if(null==e)do{e=this.nextId,this.nextId++}while(i.hasOwnProperty(e));return i.hasOwnProperty(e)?e=null:(i[e]=t,this.count++,s&&(t[s]=e),this.autoRemove&&t.on&&t.on("destroy",function(){this.remove(e)},this)),s?this:e}addMultiple(t){for(var e=0,i=t.length;e<i;e++)this.add(t[e]);return this}get(t){return this.refs[t]}has(t){return this.refs.hasOwnProperty(t)}remove(t){var e=this.refs;return e.hasOwnProperty(t)&&(this.uidKey&&(e[t][this.uidKey]=void 0),delete e[t],this.count--),this}forEach(t,e){var i,s=this.refs;for(var r in s)i=s[r],e?t.call(e,i,r):t(i,r)}clear(){this.forEach(function(t){this.remove(t)},this)}}({uidKey:"$uid",remove:!1});e.a=r},function(t,e,i){var s=i(38),r=s.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=s:(n(s,e),e.Buffer=o),n(r,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var s=r(t);return void 0!==e?"string"==typeof i?s.fill(e,i):s.fill(e):s.fill(0),s},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s.SlowBuffer(t)}},function(t,e,i){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,s,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var n,o,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,i)});case 3:return e.nextTick(function(){t.call(null,i,s)});case 4:return e.nextTick(function(){t.call(null,i,s,r)});default:for(n=new Array(a-1),o=0;o<n.length;)n[o++]=arguments[o];return e.nextTick(function(){t.apply(null,n)})}}}:t.exports=e}).call(this,i(22))},function(t,e){var i,s,r=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:n}catch(t){i=n}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(t){s=o}}();var h,l=[],u=!1,c=-1;function d(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&f())}function f(){if(!u){var t=a(d);u=!0;for(var e=l.length;e;){for(h=l,l=[];++c<e;)h&&h[c].run();c=-1,e=l.length}h=null,u=!1,function(t){if(s===clearTimeout)return clearTimeout(t);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new p(t,e)),1!==l.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";e.a=function(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=e.length),t.length=s-i;for(var r=0,n=t.length;r<n;r++)t[r]=e[r+i];return t}},function(t,e,i){"use strict";const s=Phaser.Display.Canvas.CanvasPool;var r={},n=function(t){var e=s.create(this),i=e.getContext("2d");t.syncFont(e,i);var n=Math.ceil(i.measureText(t.testString).width*t.baselineX),o=n,a=2*o;o=o*t.baselineY|0,e.width=n,e.height=a,i.fillStyle="#f00",i.fillRect(0,0,n,a),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,o);var h=r;if(!i.getImageData(0,0,n,a))return h.ascent=o,h.descent=o+6,h.fontSize=h.ascent+h.descent,s.remove(e),h;var l,u,c=i.getImageData(0,0,n,a).data,d=c.length,f=4*n,p=0,g=!1;for(l=0;l<o;l++){for(u=0;u<f;u+=4)if(255!==c[p+u]){g=!0;break}if(g)break;p+=f}for(h.ascent=o-l,p=d-f,g=!1,l=a;l>o;l--){for(u=0;u<f;u+=4)if(255!==c[p+u]){g=!0;break}if(g)break;p-=f}return h.descent=l-o,h.fontSize=h.ascent+h.descent,s.remove(e),h},o=i(0);const a=Phaser.Utils.Objects.GetAdvancedValue,h=Phaser.Utils.Objects.GetValue;var l={backgroundColor:["backgroundColor",null],fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],underlineColor:["underline.color","#000"],underlineThickness:["underline.thickness",0],underlineOffset:["underline.offset",0],halign:["halign",0],valign:["valign",0],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],lineSpacing:["lineSpacing",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wrapMode:["wrap.mode",0],wrapWidth:["wrap.width",null]};const u={left:o.a.hleft,center:o.a.hcenter,right:o.a.hright},c={top:o.a.vtop,center:o.a.vcenter,bottom:o.a.vbottom},d={none:o.a.NO_WRAP,word:o.a.WORD_WRAP,char:o.a.CHAR_WRAP,character:o.a.CHAR_WRAP};e.a=class{constructor(t,e){this.parent=t,this.backgroundColor,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(e,!1);var i=h(e,"metrics",!1);this.metrics=i?{ascent:h(i,"ascent",0),descent:h(i,"descent",0),fontSize:h(i,"fontSize",0)}:n(this)}setStyle(t,e){if(void 0===e&&(e=!0),t&&t.hasOwnProperty("halign")&&"string"==typeof t.halign&&(t.halign=u[t.halign.toLowerCase()]||0),t&&t.hasOwnProperty("valign")&&"string"==typeof t.valign&&(t.valign=c[t.valign.toLowerCase()]||0),t&&t.hasOwnProperty("wrap")){var i=t.wrap;if(i.hasOwnProperty("mode")){var s=i.mode;"string"==typeof s&&(i.mode=d[s.toLowerCase()]||0)}else i.hasOwnProperty("width")&&(i.mode=1)}for(var r in t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),l)this[r]="wrapCallback"===r||"wrapCallbackScope"===r?h(t,l[r][0],l[r][1]):a(t,l[r][0],l[r][1]);var n=h(t,"font",null);this._font=null===n?this.fontStyle+" "+this.fontSize+" "+this.fontFamily:n;var o=h(t,"fill",null);return null!==o&&(this.color=o),e?this.update(!0):this.parent}syncFont(t,e){e.font=this._font}syncStyle(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily,this.metrics=n(this)),this.parent.updateText(t)}buildFont(){var t=this.fontStyle+" "+this.fontSize+" "+this.fontFamily;return t!==this._font&&(this._font=t),this}setFont(t){return"string"==typeof t?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=h(t,"fontFamily","Courier"),this.fontSize=h(t,"fontSize","16px"),this.fontStyle=h(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setBackgroundColor(t){return this.backgroundColor=t,this.update(!1)}setFill(t){return this.color=t,this.update(!1)}setColor(t){return this.color=t,this.update(!1)}setStroke(t,e){return void 0===t?this.strokeThickness=0:(void 0===e&&(e=this.strokeThickness),this.stroke=t,this.strokeThickness=e),this.update(!0)}setShadow(t,e,i,s,r,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===s&&(s=0),void 0===r&&(r=!1),void 0===n&&(n=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=i,this.shadowBlur=s,this.shadowStroke=r,this.shadowFill=n,this.update(!1)}setShadowOffset(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}setShadowColor(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)}setShadowBlur(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,e,i){return void 0===t&&(t="#000"),void 0===e&&(e=0),void 0===i&&(i=0),this.underlineColor=t,this.underlineThickness=e,this.underlineOffset=i,this.update(!1)}setUnderlineColor(t){return void 0===t&&(t="#000"),this.underlineColor=t,this.update(!1)}setUnderlineThickness(t){return void 0===t&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return void 0===t&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return"string"==typeof t&&(t=d[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){this.wrapWidth=t;var e=0!==this.wrapMode;return this.update(e)}setAlign(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),"string"==typeof t&&(t=u[t.toLowerCase()]||0),"string"==typeof e&&(e=u[e.toLowerCase()]||0),this.halign=t,this.valign=e,this.update(!1)}setHAlign(t){return void 0===t&&(t=0),"string"==typeof t&&(t=u[t.toLowerCase()]||0),this.halign=t,this.update(!1)}setVAlign(t){return void 0===t&&(t=0),"string"==typeof t&&(t=u[t.toLowerCase()]||0),this.valign=t,this.update(!1)}setMaxLines(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={};for(var e in l)t[e]=this[e];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}}},function(t,e,i){"use strict";var s=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i;e.a=function(t){return"string"!=typeof t?t:(""===t?t=null:s.test(t)?t=parseFloat(t):"false"===screen?t=!1:"true"===t&&(t=!0),t)}},function(t,e,i){var s,r,n;r=[],void 0===(n="function"==typeof(s=function(){"use strict";var t,e,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==s?s:{},r=!s.document&&!!s.postMessage,n=r&&/(\?|&)papaworker(=|&|$)/.test(s.location.search),o=!1,a={},h=0,l={parse:function(e,i){var r=(i=i||{}).dynamicTyping||!1;if(S(r)&&(i.dynamicTypingFunction=r,r={}),i.dynamicTyping=r,i.transform=!!S(i.transform)&&i.transform,i.worker&&l.WORKERS_SUPPORTED){var n=function(){if(!l.WORKERS_SUPPORTED)return!1;if(!o&&null===l.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var e=l.SCRIPT_PATH||t;e+=(-1!==e.indexOf("?")?"&":"?")+"papaworker";var i=new s.Worker(e);return i.onmessage=b,i.id=h++,a[i.id]=i,i}();return n.userStep=i.step,n.userChunk=i.chunk,n.userComplete=i.complete,n.userError=i.error,i.step=S(i.step),i.chunk=S(i.chunk),i.complete=S(i.complete),i.error=S(i.error),delete i.worker,void n.postMessage({input:e,config:i,workerId:n.id})}var u=null;return e===l.NODE_STREAM_INPUT?(u=new v(i)).getStream():("string"==typeof e?u=i.download?new d(i):new p(i):!0===e.readable&&S(e.read)&&S(e.on)?u=new g(i):(s.File&&e instanceof File||e instanceof Object)&&(u=new f(i)),u.stream(e))},unparse:function(t,e){var i=!1,s=!0,r=",",n="\r\n",o='"';"object"==typeof e&&("string"==typeof e.delimiter&&1===e.delimiter.length&&-1===l.BAD_DELIMITERS.indexOf(e.delimiter)&&(r=e.delimiter),("boolean"==typeof e.quotes||e.quotes instanceof Array)&&(i=e.quotes),"string"==typeof e.newline&&(n=e.newline),"string"==typeof e.quoteChar&&(o=e.quoteChar),"boolean"==typeof e.header&&(s=e.header));var a=new RegExp(o,"g");if("string"==typeof t&&(t=JSON.parse(t)),t instanceof Array){if(!t.length||t[0]instanceof Array)return u(null,t);if("object"==typeof t[0])return u(h(t[0]),t)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),t.data instanceof Array&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=t.data[0]instanceof Array?t.fields:h(t.data[0])),t.data[0]instanceof Array||"object"==typeof t.data[0]||(t.data=[t.data])),u(t.fields||[],t.data||[]);throw"exception: Unable to serialize unrecognized input";function h(t){if("object"!=typeof t)return[];var e=[];for(var i in t)e.push(i);return e}function u(t,e){var i="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=t instanceof Array&&t.length>0,a=!(e[0]instanceof Array);if(o&&s){for(var h=0;h<t.length;h++)h>0&&(i+=r),i+=c(t[h],h);e.length>0&&(i+=n)}for(var l=0;l<e.length;l++){for(var u=o?t.length:e[l].length,d=0;d<u;d++){d>0&&(i+=r);var f=o&&a?t[d]:d;i+=c(e[l][f],d)}l<e.length-1&&(i+=n)}return i}function c(t,e){if(void 0===t||null===t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);t=t.toString().replace(a,o+o);var s="boolean"==typeof i&&i||i instanceof Array&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return!0;return!1}(t,l.BAD_DELIMITERS)||t.indexOf(r)>-1||" "===t.charAt(0)||" "===t.charAt(t.length-1);return s?o+t+o:t}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\ufeff",l.BAD_DELIMITERS=["\r","\n",'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!r&&!!s.Worker,l.SCRIPT_PATH=null,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=m,l.ParserHandle=y,l.NetworkStreamer=d,l.FileStreamer=f,l.StringStreamer=p,l.ReadableStreamStreamer=g,l.DuplexStreamStreamer=v,s.jQuery){var u=s.jQuery;u.fn.parse=function(t){var e=t.config||{},i=[];return this.each(function(t){var r="INPUT"===u(this).prop("tagName").toUpperCase()&&"file"===u(this).attr("type").toLowerCase()&&s.FileReader;if(!r||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)i.push({file:this.files[n],inputElem:this,instanceConfig:u.extend({},e)})}),r(),this;function r(){if(0!==i.length){var e,s,r,o,a=i[0];if(S(t.before)){var h=t.before(a.file,a.inputElem);if("object"==typeof h){if("abort"===h.action)return e="AbortError",s=a.file,r=a.inputElem,o=h.reason,void(S(t.error)&&t.error({name:e},s,r,o));if("skip"===h.action)return void n();"object"==typeof h.config&&(a.instanceConfig=u.extend(a.instanceConfig,h.config))}else if("skip"===h)return void n()}var c=a.instanceConfig.complete;a.instanceConfig.complete=function(t){S(c)&&c(t,a.file,a.inputElem),n()},l.parse(a.file,a.instanceConfig)}else S(t.complete)&&t.complete()}function n(){i.splice(0,1),r()}}}function c(t){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=T(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new y(e),this._handle.streamer=this,this._config=e}.call(this,t),this.parseChunk=function(t,e){if(this.isFirstChunk&&S(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1;var r=this._partialLine+t;this._partialLine="";var o=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var a=o.meta.cursor;this._finished||(this._partialLine=r.substring(a-this._baseIndex),this._baseIndex=a),o&&o.data&&(this._rowCount+=o.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)s.postMessage({results:o,workerId:l.WORKER_ID,finished:h});else if(S(this._config.chunk)&&!e){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return;o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!h||!S(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||o&&o.meta.paused||this._nextChunk(),o}},this._sendError=function(t){S(this._config.error)?this._config.error(t):n&&this._config.error&&s.postMessage({workerId:l.WORKER_ID,error:t,finished:!1})}}function d(t){var e;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),c.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=O(this._chunkLoaded,this),e.onerror=O(this._chunkError,this)),e.open("GET",this._input,!r),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}if(this._config.chunkSize){var s=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+s),e.setRequestHeader("If-None-Match","webkit-no-cache")}try{e.send()}catch(t){this._chunkError(t.message)}r&&0===e.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||e.status>=400?this._chunkError():(this._finished=!this._config.chunkSize||this._start>function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substr(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var i=e.statusText||t;this._sendError(new Error(i))}}function f(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),c.call(this,t);var s="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,s?((e=new FileReader).onload=O(this._chunkLoaded,this),e.onerror=O(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,r)}var n=e.readAsText(t,this._config.encoding);s||this._chunkLoaded({target:{result:n}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function p(t){var e;t=t||{},c.call(this,t),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,i=t?e.substr(0,t):e;return e=t?e.substr(t):"",this._finished=!e,this.parseChunk(i)}}}function g(t){t=t||{},c.call(this,t);var e=[],i=!0,s=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=O(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=O(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=O(function(){this._streamCleanUp(),s=!0,this._streamData("")},this),this._streamCleanUp=O(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(t){var e=i(84).Duplex,s=T(t),r=!0,n=!1,o=[],a=null;this._onCsvData=function(t){for(var e=t.data,i=0;i<e.length;i++)a.push(e[i])||this._handle.paused()||this._handle.pause()},this._onCsvComplete=function(){a.push(null)},s.step=O(this._onCsvData,this),s.complete=O(this._onCsvComplete,this),c.call(this,s),this._nextChunk=function(){n&&1===o.length&&(this._finished=!0),o.length?o.shift()():r=!0},this._addToParseQueue=function(t,e){o.push(O(function(){if(this.parseChunk("string"==typeof t?t:t.toString(s.encoding)),S(e))return e()},this)),r&&(r=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(t,e,i){this._addToParseQueue(t,i)},this._onWriteComplete=function(){n=!0,this._addToParseQueue("")},this.getStream=function(){return a},(a=new e({readableObjectMode:!0,decodeStrings:!1,read:O(this._onRead,this),write:O(this._onWrite,this)})).once("finish",O(this._onWriteComplete,this))}function y(t){var e,i,s,r=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,o=this,a=0,h=0,u=!1,c=!1,d=[],f={data:[],errors:[],meta:{}};if(S(t.step)){var p=t.step;t.step=function(e){if(f=e,v())g();else{if(g(),0===f.data.length)return;a+=e.data.length,t.preview&&a>t.preview?i.abort():p(f,o)}}}function g(){if(f&&s&&(b("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),s=!1),t.skipEmptyLines)for(var e=0;e<f.data.length;e++)1===f.data[e].length&&""===f.data[e][0]&&f.data.splice(e--,1);return v()&&function(){if(f){for(var e=0;v()&&e<f.data.length;e++)for(var i=0;i<f.data[e].length;i++){var s=f.data[e][i];t.trimHeaders&&(s=s.trim()),d.push(s)}f.data.splice(0,1)}}(),function(){if(!f||!t.header&&!t.dynamicTyping&&!t.transform)return f;for(var e=0;e<f.data.length;e++){var i,s=t.header?{}:[];for(i=0;i<f.data[e].length;i++){var r=i,n=f.data[e][i];t.header&&(r=i>=d.length?"__parsed_extra":d[i]),t.transform&&(n=t.transform(n,r)),n=y(r,n),"__parsed_extra"===r?(s[r]=s[r]||[],s[r].push(n)):s[r]=n}f.data[e]=s,t.header&&(i>d.length?b("FieldMismatch","TooManyFields","Too many fields: expected "+d.length+" fields but parsed "+i,h+e):i<d.length&&b("FieldMismatch","TooFewFields","Too few fields: expected "+d.length+" fields but parsed "+i,h+e))}return t.header&&f.meta&&(f.meta.fields=d),h+=f.data.length,f}()}function v(){return t.header&&0===d.length}function y(e,i){return function(e){return t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)}(e)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(r.test(i)?parseFloat(i):n.test(i)?new Date(i):""===i?null:i):i}function b(t,e,i,s){f.errors.push({type:t,code:e,message:i,row:s})}this.parse=function(r,n,o){if(t.newline||(t.newline=function(t){var e=(t=t.substr(0,1048576)).split("\r"),i=t.split("\n"),s=i.length>1&&i[0].length<e[0].length;if(1===e.length||s)return"\n";for(var r=0,n=0;n<e.length;n++)"\n"===e[n][0]&&r++;return r>=e.length/2?"\r\n":"\r"}(r)),s=!1,t.delimiter)S(t.delimiter)&&(t.delimiter=t.delimiter(r),f.meta.delimiter=t.delimiter);else{var a=function(e,i,s,r){for(var n,o,a,h=[",","\t","|",";",l.RECORD_SEP,l.UNIT_SEP],u=0;u<h.length;u++){var c=h[u],d=0,f=0,p=0;a=void 0;for(var g=new m({comments:r,delimiter:c,newline:i,preview:10}).parse(e),v=0;v<g.data.length;v++)if(s&&1===g.data[v].length&&0===g.data[v][0].length)p++;else{var y=g.data[v].length;f+=y,void 0!==a?y>1&&(d+=Math.abs(y-a),a=y):a=y}g.data.length>0&&(f/=g.data.length-p),(void 0===o||d<o)&&f>1.99&&(o=d,n=c)}return t.delimiter=n,{successful:!!n,bestDelimiter:n}}(r,t.newline,t.skipEmptyLines,t.comments);a.successful?t.delimiter=a.bestDelimiter:(s=!0,t.delimiter=l.DefaultDelimiter),f.meta.delimiter=t.delimiter}var h=T(t);return t.preview&&t.header&&h.preview++,e=r,i=new m(h),f=i.parse(e,n,o),g(),u?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,i.abort(),e=e.substr(i.getCharIndex())},this.resume=function(){u=!1,o.streamer.parseChunk(e,!0)},this.aborted=function(){return c},this.abort=function(){c=!0,i.abort(),f.meta.aborted=!0,S(t.complete)&&t.complete(f),e=""}}function m(t){var e,i=(t=t||{}).delimiter,s=t.newline,r=t.comments,n=t.step,o=t.preview,a=t.fastMode,h=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(h=t.escapeChar),("string"!=typeof i||l.BAD_DELIMITERS.indexOf(i)>-1)&&(i=","),r===i)throw"Comment character same as delimiter";!0===r?r="#":("string"!=typeof r||l.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),"\n"!==s&&"\r"!==s&&"\r\n"!==s&&(s="\n");var u=0,c=!1;this.parse=function(t,l,d){if("string"!=typeof t)throw"Input must be a string";var f=t.length,p=i.length,g=s.length,v=r.length,y=S(n);u=0;var m=[],b=[],x=[],w=0;if(!t)return L();if(a||!1!==a&&-1===t.indexOf(e)){for(var T=t.split(s),O=0;O<T.length;O++){if(x=T[O],u+=x.length,O!==T.length-1)u+=s.length;else if(d)return L();if(!r||x.substr(0,v)!==r){if(y){if(m=[],j(x.split(i)),Y(),c)return L()}else j(x.split(i));if(o&&O>=o)return m=m.slice(0,o),L(!0)}}return L()}for(var _,C=t.indexOf(i,u),P=t.indexOf(s,u),k=new RegExp(h.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")+e,"g");;)if(t[u]!==e)if(r&&0===x.length&&t.substr(u,v)===r){if(-1===P)return L();u=P+g,P=t.indexOf(s,u),C=t.indexOf(i,u)}else if(-1!==C&&(C<P||-1===P))x.push(t.substring(u,C)),u=C+p,C=t.indexOf(i,u);else{if(-1===P)break;if(x.push(t.substring(u,P)),A(P+g),y&&(Y(),c))return L();if(o&&m.length>=o)return L(!0)}else for(_=u,u++;;){if(-1===(_=t.indexOf(e,_+1)))return d||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:m.length,index:u}),I();if(_===f-1){var M=t.substring(u,_).replace(k,e);return I(M)}if(e!==h||t[_+1]!==h){if(e===h||0===_||t[_-1]!==h){var R=D(C);if(t[_+1+R]===i){x.push(t.substring(u,_).replace(k,e)),u=_+1+R+p,C=t.indexOf(i,u),P=t.indexOf(s,u);break}var E=D(P);if(t.substr(_+1+E,g)===s){if(x.push(t.substring(u,_).replace(k,e)),A(_+1+E+g),C=t.indexOf(i,u),y&&(Y(),c))return L();if(o&&m.length>=o)return L(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:m.length,index:u}),_++}}else _++}return I();function j(t){m.push(t),w=u}function D(e){var i=0;if(-1!==e){var s=t.substring(_+1,e);s&&""===s.trim()&&(i=s.length)}return i}function I(e){return d?L():(void 0===e&&(e=t.substr(u)),x.push(e),u=f,j(x),y&&Y(),L())}function A(e){u=e,j(x),x=[],P=t.indexOf(s,u)}function L(t){return{data:m,errors:b,meta:{delimiter:i,linebreak:s,aborted:c,truncated:!!t,cursor:w+(l||0)}}}function Y(){n(L()),m=[],b=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function b(t){var e=t.data,i=a[e.workerId],s=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var r={abort:function(){s=!0,x(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(S(i.userStep)){for(var n=0;n<e.results.data.length&&(i.userStep({data:[e.results.data[n]],errors:e.results.errors,meta:e.results.meta},r),!s);n++);delete e.results}else S(i.userChunk)&&(i.userChunk(e.results,r,e.file),delete e.results)}e.finished&&!s&&x(e.workerId,e.results)}function x(t,e){var i=a[t];S(i.userComplete)&&i.userComplete(e),i.terminate(),delete a[t]}function w(){throw"Not implemented."}function T(t){if("object"!=typeof t||null===t)return t;var e=t instanceof Array?[]:{};for(var i in t)e[i]=T(t[i]);return e}function O(t,e){return function(){t.apply(e,arguments)}}function S(t){return"function"==typeof t}return n?s.onmessage=function(t){var e=t.data;if(void 0===l.WORKER_ID&&e&&(l.WORKER_ID=e.workerId),"string"==typeof e.input)s.postMessage({workerId:l.WORKER_ID,results:l.parse(e.input,e.config),finished:!0});else if(s.File&&e.input instanceof File||e.input instanceof Object){var i=l.parse(e.input,e.config);i&&s.postMessage({workerId:l.WORKER_ID,results:i,finished:!0})}}:l.WORKERS_SUPPORTED&&(e=document.getElementsByTagName("script"),t=e.length?e[e.length-1].src:"",document.body?document.addEventListener("DOMContentLoaded",function(){o=!0},!0):o=!0),d.prototype=Object.create(c.prototype),d.prototype.constructor=d,f.prototype=Object.create(c.prototype),f.prototype.constructor=f,p.prototype=Object.create(p.prototype),p.prototype.constructor=p,g.prototype=Object.create(c.prototype),g.prototype.constructor=g,v.prototype=Object.create(c.prototype),v.prototype.constructor=v,l})?s.apply(e,r):s)||(t.exports=n)},function(t,e,i){"use strict";e.a=function(t){var e=typeof t;return"number"===e||"string"===e}},function(t,e,i){"use strict";(function(e,s,r){var n=i(21).nextTick;function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var s=t.entry;t.entry=null;for(;s;){var r=s.callback;e.pendingcb--,r(i),s=s.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=m;var a,h=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?s:n;m.WritableState=y;var l=i(16);l.inherits=i(12);var u={deprecate:i(74)},c=i(39),d=i(20).Buffer,f=r.Uint8Array||function(){};var p,g=i(37);function v(){}function y(t,e){a=a||i(10),t=t||{};var s=e instanceof a;this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,l=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:s&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,s=i.sync,r=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,s,r){--e.pendingcb,i?(n(r,s),n(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",s)):(r(s),t._writableState.errorEmitted=!0,t.emit("error",s),S(t,e))}(t,i,s,e,r);else{var o=T(i);o||i.corked||i.bufferProcessing||!i.bufferedRequest||w(t,i),s?h(x,t,i,o,r):x(t,i,o,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function m(t){if(a=a||i(10),!(p.call(m,this)||this instanceof a))return new m(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),c.call(this)}function b(t,e,i,s,r,n,o){e.writelen=s,e.writecb=o,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,n,e.onwrite),e.sync=!1}function x(t,e,i,s){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,s(),S(t,e)}function w(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var s=e.bufferedRequestCount,r=new Array(s),n=e.corkedRequestsFree;n.entry=i;for(var a=0,h=!0;i;)r[a]=i,i.isBuf||(h=!1),i=i.next,a+=1;r.allBuffers=h,b(t,e,!0,e.length,r,"",n.finish),e.pendingcb++,e.lastBufferedRequest=null,n.next?(e.corkedRequestsFree=n.next,n.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,u=i.encoding,c=i.callback;if(b(t,e,!1,e.objectMode?1:l.length,l,u,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),S(t,e)})}function S(t,e){var i=T(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,n(O,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}l.inherits(m,c),y.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===m&&(t&&t._writableState instanceof y)}})):p=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,i){var s,r=this._writableState,o=!1,a=!r.objectMode&&(s=t,d.isBuffer(s)||s instanceof f);return a&&!d.isBuffer(t)&&(t=function(t){return d.from(t)}(t)),"function"==typeof e&&(i=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof i&&(i=v),r.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),n(e,i)}(this,i):(a||function(t,e,i,s){var r=!0,o=!1;return null===i?o=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),n(s,o),r=!1),r}(this,r,t,i))&&(r.pendingcb++,o=function(t,e,i,s,r,n){if(!i){var o=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,i));return e}(e,s,r);s!==o&&(i=!0,r="buffer",s=o)}var a=e.objectMode?1:s.length;e.length+=a;var h=e.length<e.highWaterMark;h||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:s,encoding:r,isBuf:i,callback:n,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,a,s,r,n);return h}(this,r,a,t,e,i)),o},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},m.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,i){var s=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!==t&&void 0!==t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||s.finished||function(t,e,i){e.ending=!0,S(t,e),i&&(e.finished?n(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,s,i)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=g.destroy,m.prototype._undestroy=g.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i(22),i(76).setImmediate,i(11))},function(t,e,i){(e=t.exports=i(40)).Stream=e,e.Readable=e,e.Writable=i(28),e.Duplex=i(10),e.Transform=i(35),e.PassThrough=i(73)},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function n(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,o,a,h,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(n(i=this._events[t]))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(r(i))for(a=Array.prototype.slice.call(arguments,1),o=(l=i.slice()).length,h=0;h<o;h++)l[h].apply(this,a);return!0},i.prototype.addListener=function(t,e){var o;if(!s(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,s(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(o=n(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!s(e))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},i.prototype.removeListener=function(t,e){var i,n,o,a;if(!s(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(i=this._events[t]).length,n=-1,i===e||s(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(a=o;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){n=a;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(s(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?s(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(s(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){"use strict";const s=Math.sqrt(3);e.a=function(t){return 0===t.type?s*t.size:2*t.size}},function(t,e,i){"use strict";const s=Math.sqrt(3);e.a=function(t){return 0===t.type?2*t.size:s*t.size}},function(t,e,i){"use strict";var s=i(18),r=i(4);var n=class{constructor(t,e){this.container=null,this.data=null,this.setParent(t),this._deltaHeight=0}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(){var t=this.parent;0!==this.deltaHeight&&t.nonZeroDeltaHeightCount--,this.cleanData(),this.destroyContainer(),this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this}destroyContainer(){this.container&&(this.container.destroy(),this.container=null)}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}return null}setXY(t,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,e),this}setData(t,e){return this.data||(this.data={}),this.data[t]=e,this}getData(t,e){this.data||(this.data={});var i=this.data;return i.hasOwnProperty(t)?i[t]:e}cleanData(){this.data&&Object(r.a)(this.data)}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){null==t&&(t=0);var e=this.parent;0===this._deltaHeight&&0!==t?e.nonZeroDeltaHeightCount++:0!==this._deltaHeight&&0===t&&e.nonZeroDeltaHeightCount--,this._deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}get height(){var t=this.parent;return this.deltaHeight+t.defaultCellHeight}set height(t){var e,i=this.parent;e=void 0===t?0:t-i.defaultCellHeight,this.setDeltaHeight(e)}setHeight(t){return this.height=t,this}get width(){return this.parent.defaultCellWidth}get scene(){return this.parentContainer.scene}},o=i(9).a;const a=Phaser.Utils.Objects.GetValue,h=Phaser.Utils.Array.SpliceOne;var l=new o;var u=class{constructor(t,e){this.parent=t,this.cells=[],this.resetFromJSON(e)}resetFromJSON(t){return this.colCount=void 0,this._nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(a(t,"cellHeight",30)),this.setDefaultCellWidth(a(t,"cellWidth",30)),this.initCells(a(t,"cellsCount",0)),this.setColumnCount(a(t,"columns",1)),this}destroy(){for(var t=0,e=this.cells.length;t<e;t++)this.freeCell(this.cells[t]);this.cells=void 0,this.parent=void 0}get nonZeroDeltaHeightCount(){return this._nonZeroDeltaHeightCount}set nonZeroDeltaHeightCount(t){this._nonZeroDeltaHeightCount!==t&&(this._nonZeroDeltaHeightCount=t,this.resetTotalRowsHeight())}get defaultCellHeightMode(){return 0===this.nonZeroDeltaHeightCount}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var e=this.cells;e.length=t;for(var i=0;i<t;i++)e[i]=null;return this}insertNewCell(t,e){var i=this.cells;if(t===i.length){var s=t+e;i.legth=s;for(var r=t;r<s;r++)i[r]=null}else{var n=[];for(n.length=e,r=0;r<e;r++)n[r]=null;this.cells.splice(t,0,...n)}return this.resetTotalRowsHeight(),this}removeCell(t,e){for(var i=t+e,s=t;s<i;s++)this.freeCell(s);return i===this.cells.length?this.cells.length=t:(1===e?h(this.cells,t):this.cells.splice(t,e),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,e){if(this.defaultCellHeightMode){var i=t/this.defaultCellHeight;return i=e?Math.ceil(i):Math.floor(i)}var s,r=this.rowCount,n=t;for(i=0;;){if(n-=this.getRowHeight(i),s=i>=0&&i<r,!(n>0&&s)){if(0===n)return i;if(e){var o=i;(s=(i+=1)>=0&&i<r)||(i=o)}return i}i+=1}}widthToColIndex(t,e){var i=t/this.defaultCellWidth;return i=e?Math.ceil(i):Math.floor(i)}colRowToCellIndex(t,e){return e*this.colCount+t}rowIndexToHeight(t,e){if(this.defaultCellHeightMode)return(e-t+1)*this.defaultCellHeight;for(var i=0,s=t;s<=e;s++)i+=this.getRowHeight(s);return i}colIndexToWidth(t,e){return(e-t+1)*this.defaultCellWidth}getRowHeight(t){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var i,s=0,r=0;r<e;r++)s<(i=this.getCellHeight(this.colRowToCellIndex(r,t)))&&(s=i);return s}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var i=this.getCell(t,!1),s=i?i.deltaHeight:0;e=this.defaultCellHeight+s}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return null===this._totalRowsHeight&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,e){if(!this.isValidCellIdx(t))return null;if(void 0===e&&(e=!0),null===this.cells[t]&&e){var i=this.newCell(t);this.cells[t]=i}return this.cells[t]}newCell(t){var e=l.pop();return null===e?e=new n(this):e.setParent(this),e.index=t,e}buildCellIndex(t){void 0===t&&(t=0);for(var e,i=this.cells,s=t,r=i.length;s<r;s++)(e=i[s])&&(e.index=s);return this}getParentContainer(){return this.parent}freeCell(t){return"number"==typeof t&&(t=this.cells[t]),t?(t.destroy(),l.push(t),this):this}},c=i(62);const d=s.a,f=Phaser.GameObjects.Components,p=Phaser.Structs.Set,g=Phaser.Utils.Objects.GetValue,v=Phaser.Math.Clamp;class y extends d{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.type="rexGridTable",this.updateFlag=!0,this._tableOX=0,this._tableOY=0,this.visibleCells=new p,this.preVisibleCells=new p,this.visibleStartX=null,this.visibleEndX=null,this.visibleStartY=null,this.visibleEndY=null,this.lastVisibleCellIdx=null,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var o=g(n,"cellVisibleCallback",null);if(null!==o){var a=g(n,"cellVisibleCallbackScope",void 0);this.on("cellvisible",o,a)}if(null!==(o=g(n,"cellInvisibleCallback",null))){a=g(n,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",o,a)}var h=g(n,"mask",!0);!0===h&&(h=this.getDefaultMask()),h&&this.setMask(h),this.setScrollMode(g(n,"scrollMode",0)),this.setClampMode(g(n,"clamplTableOXY",!0)),this.table=new u(this,n),this.updateTable()}destroy(t){this.scene&&(this.setCellsCount(0),this.table.destroy(),this.table=void 0,super.destroy(t))}setScrollMode(t){"string"==typeof t&&(t=m[t.toLowerCase()]),this.scrollMode=t}setClampMode(t){return this.clampTableOXYMode=t,this}setCellsCount(t){var e=this.cellsCount;return e===t?this:(e>t?this.removeCell(t,e-t):this.insertNewCell(e,t-e),this)}setColumnCount(t){return this.table.colCount===t?this:(this.table.setColumnCount(t),this.updateFlag=!0,this)}setGridSize(t,e){return this.setCellsCount(t*e),this.table.setColumnCount(t),this}insertNewCell(t,e){return"object"==typeof t&&(t=t.index),void 0===e&&(e=1),e<=0?this:(t=v(t,0,this.cellsCount),this.table.insertNewCell(t,e),t<=this.lastVisibleCellIdx&&(this.updateFlag=!0),this)}removeCell(t,e){if("object"==typeof t&&(t=t.index),void 0===e&&(e=1),t<0&&(e+=t,t=0),e<=0)return this;if(t>this.cellsCount)return this;if(t<=this.lastVisibleCellIdx)for(var i,s=this.preVisibleCells,r=this.visibleCells,n=t,o=t+e;n<o;n++)(i=this.getCell(n,!1))&&(r.contains(i)&&(this.hideCell(i),this.updateFlag=!0,r.delete(i)),s.delete(i));return this.table.removeCell(t,e),this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){var e=this.table,i=this.topTableOY,s=this.bottomTableOY,r=this.tableOYExceedTop(t),n=this.tableOYExeceedBottom(t);this.clampTableOXYMode&&(e.rowCount<e.heightToRowIndex(this.instHeight,!0)?t=0:r?t=i:n&&(t=s));this._tableOY!==t&&(this.updateFlag=!0,this._tableOY=t),r&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=r,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,s)),this.execeedBottomState=n}set tableOX(t){var e=this.table,i=this.leftTableOX,s=this.rightTableOX,r=this.tableOXExeceedLeft(t),n=this.tableOXExeceedRight(t);this.clampTableOXYMode&&(e.colCount<e.widthToColIndex(this.instWidth,!0)?t=0:r?t=i:n&&(t=s));this._tableOX!==t&&(this.updateFlag=!0,this._tableOX=t),r&&(this.execeedLeftState||this.emit("execeedleft",this,t,i)),this.execeedLeftState=r,n&&(this.execeedRightState||this.emit("execeedright",this,t,s)),this.execeedRightState=n}setTableOY(t){return this.tableOY=t,this}setTableOX(t){return this.tableOX=t,this}setTableOXY(t,e){return this.tableOX=t,this.tableOY=e,this}addTableOX(t){return this.tableOX+=t,this}addTableOY(t){return this.tableOY+=t,this}addTableOXY(t,e){return this.tableOX+=t,this.tableOY+=e,this}setTableOYByPercentage(t){return t=v(t,0,1),this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){return this.tableOY/-this.tableVisibleHeight}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}updateTable(t){return t&&(this.updateFlag=!0),this.updateFlag?(this.updateFlag=!1,t&&(this.cleanVisibleCellIndexes(),this.hideCells()),this.cleanVisibleCellIndexes(),this.showCells(),this.hideCells(),this):this}getCell(t){return this.table.getCell(t,!0)}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,e){"number"==typeof t&&(this.table.getCell(t,!0).height=e);return this}eachVisibleCell(t,e){return this.visibleCells.each(t,e),this}iterateVisibleCell(t,e){return this.visibleCells.iterate(t,e),this}getDefaultMask(){var t=new c.a(this);return this.add(t),t.createGeometryMask()}resize(t,e){if(super.resize(t,e),this.updateTable(!0),this.mask){var i=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;i.resize&&i.resize(t,e)}return this}cleanVisibleCellIndexes(){var t=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=t,this.visibleCells.clear()}showCells(){var t=this.table,e=t.heightToRowIndex(-this.tableOY);e<0&&(e=0);var i=t.widthToColIndex(-this.tableOX);i<0&&(i=0);var s=t.colRowToCellIndex(i,e),r=this.bottomBound,n=this.rightBound,o=t.cellsCount-1,a=t.colCount-1,h=this.getTLX(i),l=h,u=this.getTLY(e);for(this.visibleStartY=null,this.visibleEndY=null,this.visibleStartX=null,this.visibleEndX=null,this.lastVisibleCellIdx=null;u<r&&s<=o;){if(this.table.isValidCellIdx(s)){null===this.visibleStartY&&(this.visibleStartY=e,this.visibleEndY=e),null===this.visibleStartX&&(this.visibleStartX=i,this.visibleEndX=i),null===this.lastVisibleCellIdx&&(this.lastVisibleCellIdx=s),this.visibleEndY<e&&(this.visibleEndY=e),this.visibleEndX<i&&(this.visibleEndX=i),this.lastVisibleCellIdx<s&&(this.lastVisibleCellIdx=s);var c=t.getCell(s,!0);this.visibleCells.set(c),this.preVisibleCells.contains(c)||this.showCell(c),0===this.scrollMode?c.setXY(l,u):c.setXY(u,l)}l<n&&i<a?(l+=t.getColWidth(i),i+=1):(l=h,u+=t.getRowHeight(e),i=this.visibleStartX,e+=1),s=t.colRowToCellIndex(i,e)}}showCell(t){this.emit("cellvisible",t)}hideCells(){var t=this.preVisibleCells,e=this.visibleCells;t.iterate(function(t){e.contains(t)||this.hideCell(t)},this)}hideCell(t){this.emit("cellinvisible",t),t.destroyContainer()}get instHeight(){return 0===this.scrollMode?this.height:this.width}get instWidth(){return 0===this.scrollMode?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}tableOYExceedTop(t){return void 0===t&&(t=this.tableOY),t>this.topTableOY}tableOYExeceedBottom(t){return void 0===t&&(t=this.tableOY),t<this.bottomTableOY}tableOXExeceedLeft(t){return void 0===t&&(t=this.tableOX),t>this.leftTableOX}tableOXExeceedRight(t){return void 0===t&&(t=this.tableOX),t<this.rightTableOX}get tableVisibleHeight(){var t=this.tableHeight,e=this.instHeight;return t>e?t-e:0}get tableVisibleWidth(){var t=this.tableWidth,e=this.instWidth;return t>e?t-e:t}get bottomLeftY(){return-this.displayHeight*this.originY+this.displayHeight}get topRightX(){return-this.displayWidth*this.originX+this.displayWidth}get topLeftX(){return-this.displayWidth*this.originX}get topLeftY(){return-this.displayHeight*this.originY}get bottomBound(){return 0===this.scrollMode?this.bottomLeftY:this.topRightX}get rightBound(){return 0===this.scrollMode?this.topRightX:this.bottomLeftY}getTLX(t){var e=0===this.scrollMode?this.topLeftX:this.topLeftY;return this.tableOX+this.table.colIndexToWidth(0,t-1)+e}getTLY(t){var e=0===this.scrollMode?this.topLeftY:this.topLeftX;return this.tableOY+this.table.rowIndexToHeight(0,t-1)+e}}Object.assign(y.prototype,f.GetBounds);const m={v:0,vertical:0,h:1,horizontal:1};e.a=y},function(t,e,i){"use strict";const s=Phaser.Events.EventEmitter,r=Phaser.Utils.Objects.GetValue;var n=class extends s{constructor(t){super();var e=r(t,"states",void 0);e&&this.addStates(e);var i=r(t,"extend",void 0);if(i)for(var s in i)this.hasOwnProperty(s)&&void 0!==this[s]||(this[s]=i[s]);this._stateLock=!1,this.resetFromJSON(t)}resetFromJSON(t){this.setEnable(r(t,"enable",!0)),this.start(r(t,"start",void 0));var e=r(t,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}set state(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var e="exit_"+this._prevState,i=this[e];i&&i.call(this),this.emit(e,this)}if(this._stateLock=!1,null!=this._state){var s="enter_"+this._state,r=this[s];r&&r.call(this),this.emit(s,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return null!=t&&(this.state=t),this}next(){var t,e=this["next_"+this.state];return e&&(t="string"==typeof e?e:e.call(this)),this.goto(t),this}addState(t,e){var i=r(e,"next",void 0);i&&(this["next_"+t]=i);var s=r(e,"exit",void 0);s&&(this["exit_"+t]=s);var n=r(e,"enter",void 0);return n&&(this["enter_"+t]=n),this}addStates(t){for(var e in t)this.addState(e,t[e]);return this}update(t,e,i){void 0===i&&(i="update");var s=this[i+"_"+this.state];s&&s.call(this,t,e)}preupdate(t,e){this.update(t,e,"preupdate")}postupdate(t,e){this.update(t,e,"postupdate")}};e.a=n},function(t,e,i){"use strict";t.exports=n;var s=i(10),r=i(16);function n(t){if(!(this instanceof n))return new n(t);s.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState;i.transforming=!1;var s=i.writecb;if(!s)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),s(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"==typeof this._flush?this._flush(function(e,i){a(t,e,i)}):a(this,null,null)}function a(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=i(12),r.inherits(n,s),n.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},n.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},n.prototype._write=function(t,e,i){var s=this._transformState;if(s.writecb=i,s.writechunk=t,s.writeencoding=e,!s.transforming){var r=this._readableState;(s.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},n.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},n.prototype._destroy=function(t,e){var i=this;s.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},function(t,e,i){"use strict";var s=i(20).Buffer,r=s.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(s.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=l,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=u,this.end=c,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�".repeat(i);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�".repeat(i+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�".repeat(i+2)}}(this,t,e);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var s=i.charCodeAt(i.length-1);if(s>=55296&&s<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=n,n.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},n.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�".repeat(this.lastTotal-this.lastNeed):e},n.prototype.text=function(t,e){var i=function(t,e,i){var s=e.length-1;if(s<i)return 0;var r=o(e[s]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--s<i)return 0;if((r=o(e[s]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--s<i)return 0;if((r=o(e[s]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var s=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,s),t.toString("utf8",e,s)},n.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){"use strict";var s=i(21).nextTick;function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||s(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(s(r,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){"use strict";(function(t){var s=i(82),r=i(81),n=i(80);function o(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,i){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return l(this,t,e,i)}function l(t,e,i,s){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,s){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(s||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===s?new Uint8Array(e):void 0===s?new Uint8Array(e,i):new Uint8Array(e,i,s);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=d(t,e);return t}(t,e,i,s):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!h.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var s=0|p(e,i),r=(t=a(t,s)).write(e,i);r!==s&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(h.isBuffer(e)){var i=0|f(e.length);return 0===(t=a(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(s=e.length)!=s?a(t,0):d(t,e);if("Buffer"===e.type&&n(e.data))return d(t,e.data)}var s;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(u(e),t=a(t,e<0?0:0|f(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function d(t,e){var i=e.length<0?0:0|f(e.length);t=a(t,i);for(var s=0;s<i;s+=1)t[s]=255&e[s];return t}function f(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var s=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return U(t).length;default:if(s)return X(t).length;e=(""+e).toLowerCase(),s=!0}}function g(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function v(t,e,i,s,r){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=h.from(e,s)),h.isBuffer(e))return 0===e.length?-1:y(t,e,i,s,r);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,s,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,s,r){var n,o=1,a=t.length,h=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,i/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){var u=-1;for(n=i;n<a;n++)if(l(t,n)===l(e,-1===u?0:n-u)){if(-1===u&&(u=n),n-u+1===h)return u*o}else-1!==u&&(n-=n-u),u=-1}else for(i+h>a&&(i=a-h),n=i;n>=0;n--){for(var c=!0,d=0;d<h;d++)if(l(t,n+d)!==l(e,d)){c=!1;break}if(c)return n}return-1}function m(t,e,i,s){i=Number(i)||0;var r=t.length-i;s?(s=Number(s))>r&&(s=r):s=r;var n=e.length;if(n%2!=0)throw new TypeError("Invalid hex string");s>n/2&&(s=n/2);for(var o=0;o<s;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[i+o]=a}return o}function b(t,e,i,s){return B(X(e,t.length-i),t,i,s)}function x(t,e,i,s){return B(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function w(t,e,i,s){return x(t,e,i,s)}function T(t,e,i,s){return B(U(e),t,i,s)}function O(t,e,i,s){return B(function(t,e){for(var i,s,r,n=[],o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),s=i>>8,r=i%256,n.push(r),n.push(s);return n}(e,t.length-i),t,i,s)}function S(t,e,i){return 0===e&&i===t.length?s.fromByteArray(t):s.fromByteArray(t.slice(e,i))}function _(t,e,i){i=Math.min(t.length,i);for(var s=[],r=e;r<i;){var n,o,a,h,l=t[r],u=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c<=i)switch(c){case 1:l<128&&(u=l);break;case 2:128==(192&(n=t[r+1]))&&(h=(31&l)<<6|63&n)>127&&(u=h);break;case 3:n=t[r+1],o=t[r+2],128==(192&n)&&128==(192&o)&&(h=(15&l)<<12|(63&n)<<6|63&o)>2047&&(h<55296||h>57343)&&(u=h);break;case 4:n=t[r+1],o=t[r+2],a=t[r+3],128==(192&n)&&128==(192&o)&&128==(192&a)&&(h=(15&l)<<18|(63&n)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(u=h)}null===u?(u=65533,c=1):u>65535&&(u-=65536,s.push(u>>>10&1023|55296),u=56320|1023&u),s.push(u),r+=c}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=C));return i}(s)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,i){return l(null,t,e,i)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,i){return function(t,e,i,s){return u(e),e<=0?a(t,e):void 0!==i?"string"==typeof s?a(t,e).fill(i,s):a(t,e).fill(i):a(t,e)}(null,t,e,i)},h.allocUnsafe=function(t){return c(null,t)},h.allocUnsafeSlow=function(t){return c(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,s=e.length,r=0,n=Math.min(i,s);r<n;++r)if(t[r]!==e[r]){i=t[r],s=e[r];break}return i<s?-1:s<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var s=h.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var o=t[i];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(s,r),r+=o.length}return s},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?_(this,0,t):function(t,e,i){var s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,i);case"utf8":case"utf-8":return _(this,e,i);case"ascii":return P(this,e,i);case"latin1":case"binary":return k(this,e,i);case"base64":return S(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,i);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,i,s,r){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===r&&(r=this.length),e<0||i>t.length||s<0||r>this.length)throw new RangeError("out of range index");if(s>=r&&e>=i)return 0;if(s>=r)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,s>>>=0,r>>>=0,this===t)return 0;for(var n=r-s,o=i-e,a=Math.min(n,o),l=this.slice(s,r),u=t.slice(e,i),c=0;c<a;++c)if(l[c]!==u[c]){n=l[c],o=u[c];break}return n<o?-1:o<n?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},h.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var n=!1;;)switch(s){case"hex":return m(this,t,e,i);case"utf8":case"utf-8":return b(this,t,e,i);case"ascii":return x(this,t,e,i);case"latin1":case"binary":return w(this,t,e,i);case"base64":return T(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,i);default:if(n)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),n=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function P(t,e,i){var s="";i=Math.min(t.length,i);for(var r=e;r<i;++r)s+=String.fromCharCode(127&t[r]);return s}function k(t,e,i){var s="";i=Math.min(t.length,i);for(var r=e;r<i;++r)s+=String.fromCharCode(t[r]);return s}function M(t,e,i){var s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);for(var r="",n=e;n<i;++n)r+=N(t[n]);return r}function R(t,e,i){for(var s=t.slice(e,i),r="",n=0;n<s.length;n+=2)r+=String.fromCharCode(s[n]+256*s[n+1]);return r}function E(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,i,s,r,n){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<n)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function D(t,e,i,s){e<0&&(e=65535+e+1);for(var r=0,n=Math.min(t.length-i,2);r<n;++r)t[i+r]=(e&255<<8*(s?r:1-r))>>>8*(s?r:1-r)}function I(t,e,i,s){e<0&&(e=4294967295+e+1);for(var r=0,n=Math.min(t.length-i,4);r<n;++r)t[i+r]=e>>>8*(s?r:3-r)&255}function A(t,e,i,s,r,n){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function L(t,e,i,s,n){return n||A(t,0,i,4),r.write(t,e,i,s,23,4),i+4}function Y(t,e,i,s,n){return n||A(t,0,i,8),r.write(t,e,i,s,52,8),i+8}h.prototype.slice=function(t,e){var i,s=this.length;if(t=~~t,e=void 0===e?s:~~e,t<0?(t+=s)<0&&(t=0):t>s&&(t=s),e<0?(e+=s)<0&&(e=0):e>s&&(e=s),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=h.prototype;else{var r=e-t;i=new h(r,void 0);for(var n=0;n<r;++n)i[n]=this[n+t]}return i},h.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var s=this[t],r=1,n=0;++n<e&&(r*=256);)s+=this[t+n]*r;return s},h.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var s=this[t+--e],r=1;e>0&&(r*=256);)s+=this[t+--e]*r;return s},h.prototype.readUInt8=function(t,e){return e||E(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||E(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||E(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var s=this[t],r=1,n=0;++n<e&&(r*=256);)s+=this[t+n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},h.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var s=e,r=1,n=this[t+--s];s>0&&(r*=256);)n+=this[t+--s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},h.prototype.readInt8=function(t,e){return e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||E(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){e||E(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||E(t,4,this.length),r.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||E(t,4,this.length),r.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||E(t,8,this.length),r.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||E(t,8,this.length),r.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,i,s){(t=+t,e|=0,i|=0,s)||j(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,n=0;for(this[e]=255&t;++n<i&&(r*=256);)this[e+n]=t/r&255;return e+i},h.prototype.writeUIntBE=function(t,e,i,s){(t=+t,e|=0,i|=0,s)||j(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,n=1;for(this[e+r]=255&t;--r>=0&&(n*=256);)this[e+r]=t/n&255;return e+i},h.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e|=0,!s){var r=Math.pow(2,8*i-1);j(this,t,e,i,r-1,-r)}var n=0,o=1,a=0;for(this[e]=255&t;++n<i&&(o*=256);)t<0&&0===a&&0!==this[e+n-1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+i},h.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e|=0,!s){var r=Math.pow(2,8*i-1);j(this,t,e,i,r-1,-r)}var n=i-1,o=1,a=0;for(this[e+n]=255&t;--n>=0&&(o*=256);)t<0&&0===a&&0!==this[e+n+1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,i){return L(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return L(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return Y(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return Y(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,s){if(i||(i=0),s||0===s||(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);var r,n=s-i;if(this===t&&i<e&&e<s)for(r=n-1;r>=0;--r)t[r+e]=this[r+i];else if(n<1e3||!h.TYPED_ARRAY_SUPPORT)for(r=0;r<n;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+n),e);return n},h.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!h.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{var o=h.isBuffer(t)?t:X(new h(t,s).toString()),a=o.length;for(n=0;n<i-e;++n)this[n+e]=o[n%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function X(t,e){var i;e=e||1/0;for(var s=t.length,r=null,n=[],o=0;o<s;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(o+1===s){(e-=3)>-1&&n.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&n.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&n.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;n.push(i)}else if(i<2048){if((e-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return n}function U(t){return s.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,i,s){for(var r=0;r<s&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(this,i(11))},function(t,e,i){t.exports=i(30).EventEmitter},function(t,e,i){"use strict";(function(e,s){var r=i(21).nextTick;t.exports=b;var n,o=i(83);b.ReadableState=m;i(30).EventEmitter;var a=function(t,e){return t.listeners(e).length},h=i(39),l=i(20).Buffer,u=e.Uint8Array||function(){};var c=i(16);c.inherits=i(12);var d=i(79),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g=i(78),v=i(37);c.inherits(b,h);var y=["error","close","destroy","pause","resume"];function m(t,e){n=n||i(10),t=t||{};var s=e instanceof n;this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:s&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=i(36).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(n=n||i(10),!(this instanceof b))return new b(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),h.call(this)}function x(t,e,i,s,r){var n,o=t._readableState;null===e?(o.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,S(t)}(t,o)):(r||(n=function(t,e){var i;s=e,l.isBuffer(s)||s instanceof u||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var s;return i}(o,e)),n?t.emit("error",n):o.objectMode||e&&e.length>0?("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),s?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!i?(e=o.decoder.write(e),o.objectMode||0!==e.length?w(t,o,e,!1):C(t,o)):w(t,o,e,!1))):s||(o.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function w(t,e,i,s){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,s?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&S(t)),C(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var i,s=this._readableState;return s.objectMode?i=!0:"string"==typeof t&&((e=e||s.defaultEncoding)!==s.encoding&&(t=l.from(t,e),e=""),i=!0),x(this,t,e,!1,i)},b.prototype.unshift=function(t){return x(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=i(36).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var T=8388608;function O(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r(_,t):_(t))}function _(t){f("emit readable"),t.emit("readable"),R(t)}function C(t,e){e.readingMore||(e.readingMore=!0,r(P,t,e))}function P(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function k(t){f("readable nexttick read 0"),t.read(0)}function M(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),R(t),e.flowing&&!e.reading&&t.read(0)}function R(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function E(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var s;t<e.head.data.length?(s=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):s=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,s=1,r=i.data;t-=r.length;for(;i=i.next;){var n=i.data,o=t>n.length?n.length:t;if(o===n.length?r+=n:r+=n.slice(0,t),0===(t-=o)){o===n.length?(++s,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=n.slice(o));break}++s}return e.length-=s,r}(t,e):function(t,e){var i=l.allocUnsafe(t),s=e.head,r=1;s.data.copy(i),t-=s.data.length;for(;s=s.next;){var n=s.data,o=t>n.length?n.length:t;if(n.copy(i,i.length-t,0,o),0===(t-=o)){o===n.length?(++r,s.next?e.head=s.next:e.head=e.tail=null):(e.head=s,s.data=n.slice(o));break}++r}return e.length-=r,i}(t,e);return s}(t,e.buffer,e.decoder),i);var i}function j(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r(D,e,t))}function D(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function I(t,e){for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1}b.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):S(this),null;if(0===(t=O(t,e))&&e.ended)return 0===e.length&&j(this),null;var s,r=e.needReadable;return f("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",r=!0),e.ended||e.reading?f("reading or ended",r=!1):r&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=O(i,e))),null===(s=t>0?E(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&j(this)),null!==s&&this.emit("data",s),s},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,f("pipe count=%d opts=%j",n.pipesCount,e);var h=(!e||!1!==e.end)&&t!==s.stdout&&t!==s.stderr?u:b;function l(e,s){f("onunpipe"),e===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,f("cleanup"),t.removeListener("close",y),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",v),t.removeListener("unpipe",l),i.removeListener("end",u),i.removeListener("end",b),i.removeListener("data",g),d=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function u(){f("onend"),t.end()}n.endEmitted?r(h):i.once("end",h),t.on("unpipe",l);var c=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,R(t))}}(i);t.on("drain",c);var d=!1;var p=!1;function g(e){f("ondata"),p=!1,!1!==t.write(e)||p||((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==I(n.pipes,t))&&!d&&(f("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function v(e){f("onerror",e),b(),t.removeListener("error",v),0===a(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",m),b()}function m(){f("onfinish"),t.removeListener("close",y),b()}function b(){f("unpipe"),i.unpipe(t)}return i.on("data",g),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?o(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",v),t.once("close",y),t.once("finish",m),t.emit("pipe",i),n.flowing||(f("pipe resume"),i.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var s=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var n=0;n<r;n++)s[n].emit("unpipe",this,i);return this}var o=I(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)},b.prototype.on=function(t,e){var i=h.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var s=this._readableState;s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.emittedReadable=!1,s.reading?s.length&&S(this):r(k,this))}return i},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r(M,t,e))}(this,t)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,i=this._readableState,s=!1;for(var r in t.on("end",function(){if(f("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(r){(f("wrapped data"),i.decoder&&(r=i.decoder.write(r)),!i.objectMode||null!==r&&void 0!==r)&&((i.objectMode||r&&r.length)&&(e.push(r)||(s=!0,t.pause())))}),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var n=0;n<y.length;n++)t.on(y[n],this.emit.bind(this,y[n]));return this._read=function(e){f("wrapped _read",e),s&&(s=!1,t.resume())},this},b._fromList=E}).call(this,i(11),i(22))},function(t,e,i){"use strict";var s=i(17);const r=Phaser.Math.DegToRad;e.a=function(t,e,i,n,o){void 0===o&&(o=Object(s.a)(6));for(var a,h=0===n?0:-30,l=0;l<6;l++)a=r(60*l+h),o[l].x=t+i*Math.cos(a),o[l].y=e+i*Math.sin(a);return o}},function(t,e,i){"use strict";var s=i(8),r=i(2);const n=Phaser.Utils.Objects.GetValue,o=Phaser.Math.Distance.Between,a=Phaser.Math.Linear,h=Phaser.Math.Angle.Between;e.a=class extends s.a{constructor(t,e){super(t,e),this.gameObject=t,this.scene=Object(r.a)(t),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=n(t,"isRunning",!1),this.setEnable(n(t,"enable",!0)),this.timeScale=n(t,"timeScale",1),this.setSpeed(n(t,"speed",400)),this.setRotateToTarget(n(t,"rotateToTarget",!1)),this.targetX=n(t,"targetX",0),this.targetY=n(t,"targetY",0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,rotateToTarget:this.rotateToTarget,targetX:this.targetX,targetY:this.targetY,tickingMode:this.tickingMode}}boot(){super.boot(),this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene.events.off("update",this.update,this)}setEnable(t){return void 0==t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}setRotateToTarget(t){return this.rotateToTarget=t,this}moveTo(t,e){if("number"!=typeof t){var i=t;t=n(i,"x",void 0),e=n(i,"y",void 0)}return null==t||null==e?this:(this.targetX=t,this.targetY=e,super.start(),this)}update(t,e){if(!this.isRunning||!this.enable)return this;var i=this.gameObject,s=i.x,r=i.y,n=this.targetX,l=this.targetY;if(s===n&&r===l)return this.complete(),this;if(0===this.speed||0===e||0===this.timeScale)return this;var u,c,d=e*this.timeScale/1e3,f=this.speed*d,p=o(s,r,n,l);if(f<p){var g=f/p;u=a(s,n,g),c=a(r,l,g)}else u=n,c=l;return i.setPosition(u,c),this.rotateToTarget&&(i.rotation=h(s,r,u,c)),this}}},function(t,e,i){"use strict";const s=Phaser.Utils.Objects.GetValue;var r=function(t,e,i){return void 0===t?{x:e,y:i}:"number"==typeof t?{x:t,y:t}:t},n=class{constructor(t,e,i,s,r){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,i,s,r)}setTo(t,e,i,s,r){return this.setPosition(t,e),this.setRadius(r),this.setSize(i,s),this}setPosition(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}setRadius(t){var e,i;void 0===t&&(t=0),"number"==typeof t?(e=t,i=t):(e=s(t,"x",0),i=s(t,"y",0));var n=this.cornerRadius;return n.tl=r(s(t,"tl",void 0),e,i),n.tr=r(s(t,"tr",void 0),e,i),n.bl=r(s(t,"bl",void 0),e,i),n.br=r(s(t,"br",void 0),e,i),this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}},o=function(t,e,i){var s=i.length;if(s>=2){var r=i[s-2],n=i[s-1];if(t===r&&e===n)return i}return i.push(t,e),i};const a=Phaser.Utils.Objects.GetValue,h=Phaser.Math.DegToRad;var l=function(t,e,i,s,r,n,l,u){var c,d,f,p=a(i,"x",i),g=a(i,"y",i);n&&(r+=360),s=h(s);for(var v=((r=h(r))-s)/l,y=0;y<=l;y++)f=s+v*y,c=t+p*Math.cos(f),d=e+g*Math.sin(f),o(c,d,u);return u},u=i(89),c=i.n(u),d=i(88),f=i.n(d),p=i(87),g=i.n(p),v=function(t,e,i,s,r){var n=this.pipeline,o=n._tempMatrix1,a=n._tempMatrix2,h=n._tempMatrix3;t.setPipeline(n),a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),o.copyFrom(s.matrix),r?(o.multiplyWithOffset(r,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),a.e=e.x,a.f=e.y):(a.e-=s.scrollX*e.scrollFactorX,a.f-=s.scrollY*e.scrollFactorY),o.multiply(a,h);var l=e._displayOriginX,u=e._displayOriginY,c=s.alpha*e.alpha;e.isFilled&&f()(n,h,e,c,l,u),e.isStroked&&g()(n,e,c,l,u)},y=i(86),m=i.n(y),b=i(85),x=i.n(b);const w=Phaser.Renderer.Canvas.SetTransform;var T=function(t,e,i,s,r){var n=t.currentContext;if(w(t,n,e,s,r)){var o=e._displayOriginX,a=e._displayOriginY,h=e.pathData,l=h.length-1,u=h[0]-o,c=h[1]-a;n.beginPath(),n.moveTo(u,c),e.closePath||(l-=2);for(var d=2;d<l;d+=2){var f=h[d]-o,p=h[d+1]-a;n.lineTo(f,p)}n.closePath(),e.isFilled&&(m()(n,e),n.fill()),e.isStroked&&(x()(n,e),n.stroke())}},O=i(3),S=(O.a,O.a,{renderWebGL:v,renderCanvas:T});const _=Phaser.Utils.Objects.GetValue;class C extends Phaser.GameObjects.Shape{constructor(t,e,i,s,r,o,a,h){void 0===e&&(e=0),void 0===i&&(i=0);var l=_(o,"iteration",void 0);o=_(o,"radius",o),super(t,"RoundRectangle",new n(0,0,s,r,o)),this.setIteration(l),this.setPosition(e,i),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()}updateData(){var t=this.geom,e=this.pathData;e.length=0;var i,s=t.cornerRadius,r=this.iteration+1;if(i=s.br,P(i)){var n=t.width-i.x,a=t.height-i.y;l(n,a,i,0,90,!1,r,e)}else o(t.width,t.height,e);if(i=s.bl,P(i)){n=i.x,a=t.height-i.y;l(n,a,i,90,180,!1,r,e)}else o(0,t.height,e);if(i=s.tl,P(i)){n=i.x,a=i.y;l(n,a,i,180,270,!1,r,e)}else o(0,0,e);if(i=s.tr,P(i)){n=t.width-i.x,a=i.y;l(n,a,i,270,360,!1,r,e)}else o(t.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=c()(e),this}get width(){return this.geom.width}set width(t){this.width!==t&&(this.geom.width=t,this.updateDisplayOrigin(),this.updateData())}get height(){return this.geom.height}set height(t){this.height!==t&&(this.geom.height=t,this.updateDisplayOrigin(),this.updateData())}resize(t,e){return void 0===e&&(e=t),this.geom.width===t&&this.geom.height===e?this:(this.geom.height=e,this.geom.width=t,this.updateDisplayOrigin(),this.updateData(),this)}get iteration(){return this._iteration}set iteration(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.updateData()):this._iteration=t}setIteration(t){return void 0===t&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.updateData()}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}}var P=function(t){return 0!==t.x&&0!==t.y};Object.assign(C.prototype,S);e.a=C},function(t,e,i){"use strict";const s=Phaser.Renderer.WebGL.Utils;var r=function(t,e,i,r,n){if(""!==e.text){var o=e.frame,a=o.width,h=o.height,l=s.getTintAppendFloatAlpha;this.pipeline.batchTexture(e,o.glTexture,a,h,e.x,e.y,a/e.style.resolution,h/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,h,l(e._tintTL,r.alpha*e._alphaTL),l(e._tintTR,r.alpha*e._alphaTR),l(e._tintBL,r.alpha*e._alphaBL),l(e._tintBR,r.alpha*e._alphaBR),e._isTinted&&e.tintFill,0,0,r,n)}},n=function(t,e,i,s,r){""!==e.text&&t.batchSprite(e,e.frame,s,r)},o=i(3),a=(o.a,o.a,{renderWebGL:r,renderCanvas:n}),h=i(24),l=i(9),u=i(0);const c=Phaser.Utils.Objects.GetValue,d=u.a.NO_NEWLINE,f=u.a.RAW_NEWLINE;var p=class{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=c(t,"text",""),this.x=c(t,"x",0),this.y=c(t,"y",0),this.width=c(t,"width",0);var e=c(t,"prop",null);null===e&&(e={}),this.prop=e,this.newLineMode=c(t,"newLineMode",0),this.startIndex=c(t,"startIndex",0)}get rawText(){var t=this.text;return this.newLineMode===f&&(t+="\n"),t}get wrapText(){var t=this.text;return this.newLineMode!==d&&(t+="\n"),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===f&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}},g=i(6);const v=Phaser.Utils.Objects.GetFastValue,y=u.a.NO_NEWLINE;var m=new l.a,b=new l.a;class x{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=v(t,"pensPool",m),this.LinesPool=v(t,"linesPool",b),this.tagToText=v(t,"tagToText",o.a),this.tagToTextScope=v(t,"tagToTextScope",void 0)}destroy(){this.freePens(),this.tagToText=void 0,this.tagToTextScope=void 0}freePens(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addPen(t,e,i,s,r,n){var o=this.PensPool.pop();null==o&&(o=new p),w.text=t,w.x=e,w.y=i,w.width=s,w.prop=r,w.newLineMode=n,o.resetFromJSON(w);var a=this.lastPen;o.startIndex=null==a?0:a.endIndex,this.pens.push(o);var h=this.lastLine;null==h&&(h=this.LinesPool.pop()||[],this.lines.push(h)),h.push(o),o.newLineMode!==y&&(h=this.LinesPool.pop()||[],this.lines.push(h)),this.maxLinesWidth=void 0}clone(t){null==t&&(t=new x),t.freePens();for(var e=0,i=this.lines.length;e<i;e++)for(var s=this.lines[e],r=0,n=s.length;r<n;r++){var o=s[r];t.addPen(o.text,o.x,o.y,o.width,Object(g.a)(o.prop),o.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e[0]?e[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var e,i,s=!1;for(e=t;e>=0&&!(s=null!=(i=this.lines[e])&&i.length>0);e--);return s?i[i.length-1].endIndex:0}getLineWidth(t){var e=this.lines[t];if(!e)return 0;var i=e[e.length-1];return null==i?0:i.lastX}getMaxLineWidth(){if(void 0!==this.maxLinesWidth)return this.maxLinesWidth;for(var t,e=0,i=0,s=this.lines.length;i<s;i++)(t=this.getLineWidth(i))>e&&(e=t);return this.maxLinesWidth=e,e}getLineWidths(){for(var t=[],e=0,i=this.lines.length;e<i;e++)t.push(this.getLineWidth(e));return t}get linesCount(){return this.lines.length}get rawText(){for(var t="",e=this.pens,i=0,s=e.length;i<s;i++)t+=e[i].rawText;return t}get rawTextLength(){for(var t=0,e=this.pens,i=0,s=this.pens.length;i<s;i++)t+=e[i].rawTextLength;return t}getSliceTagText(t,e,i){if(void 0===t&&(t=0),void 0===e){var s=this.lastPen;if(null==s)return"";e=s.endIndex}void 0===i&&(i=!1);for(var r,n,o,a,h,l,u="",c=0,d=this.pens.length;c<d&&((a=(r=this.pens[c]).endIndex)<t||(r=this.pens[c],n=i?r.wrapText:r.rawText,h=r.prop,(o=r.startIndex)>=t&&a<=e||(n=n.substring(t-o,e-o)),this.tagToTextScope?u+=this.tagToText.call(this.tagToTextScope,n,h,l):u+=this.tagToText(n,h,l),l=h,!(a>=e)));c++);return u}}var w={},T=x;Phaser.Utils.GetValue;const O=u.a.NO_NEWLINE,S=u.a.RAW_NEWLINE,_=u.a.WRAPPED_NEWLINE,C=u.a.NO_WRAP,P=u.a.WORD_WRAP,k=(u.a.CHAR_WRAP,u.a.SPLITREGEXP);var M=[],R=new l.a;R.newline=function(t,e,i){var s=this.pop();return null===s&&(s={}),s.text=t,s.width=e,s.newLineMode=i,s};var E=function(t,e,i,s,r){var n=M;if(R.pushMultiple(n),!t||!t.length)return n;for(var o,a,h,l=t.split(k),u=0,c=l.length;u<c;u++)if(o=l[u],h=u===c-1?O:S,i!==C){var d,f;if(a=0===u?s-r:s,o.length<=100&&(x=e(o))<=a){n.push(R.newline(o,x,h));continue}for(var p,g="",v="",y=0,m=0,b=(d=i===P?o.split(" "):o).length;m<b;m++)f=d[m],i===P?(g+=f,m<b-1&&(g+=" ")):g+=f,(p=e(g))>a&&(0===m?n.push(R.newline("",0,_)):(n.push(R.newline(v,y,_)),g=f,i===P&&m<b-1&&(g+=" "),p=e(g)),a=s),v=g,y=p;n.push(R.newline(v,y,h))}else{var x=e(o);n.push(R.newline(o,x,h))}return n};const j=Phaser.Utils.Objects.GetValue,D=(u.a.NO_WRAP,u.a.NO_NEWLINE),I=(u.a.hleft,u.a.hcenter),A=u.a.hright,L=(u.a.vtop,u.a.vcenter),Y=u.a.vbottom;var F={},N=class{constructor(t){this.context=j(t,"context",null),this.canvas=this.context.canvas,this.parser=j(t,"parser",null),this.defatultStyle=j(t,"style",null),this.autoRound=!0,this.pensPool=j(t,"pensPool",null),this.pensManager=this.newPenManager(),this._tmpPensManager=null;var e=this.context;this.getTextWidth=function(t){return e.measureText(t).width}}updatePensManager(t,e,i,s,r){if(void 0===r&&(r=this.pensManager),r.freePens(),""===t)return r;for(var n,o,a,h,l,u=this.canvas,c=this.context,d=0,f=0,p=this.parser.splitText(t),v=0,y=p.length;v<y;v++)if(n=(h=this.parser.tagTextToProp(p[v],o)).rawText,o=h.prop,""!==n){this.context.save(),(a=this.parser.propToContextStyle(this.defatultStyle,o)).buildFont(),a.syncFont(u,c),a.syncStyle(u,c);for(var m=0,b=(l=E(n,this.getTextWidth,e,i,d)).length;m<b;m++){var x=l[m];r.addPen(x.text,d,f,x.width,Object(g.a)(o),x.newLineMode),x.newLineMode!==D?(d=0,f+=s):d+=x.width}this.context.restore()}return r}draw(t,e,i,s,r){void 0===r&&(r=this.pensManager);var n=this.context;n.save(),this.drawBackground();var o=this.defatultStyle;t+=o.strokeThickness/2,e+=o.strokeThickness/2+o.metrics.ascent;var a,h,l,u,c,d,f=o.halign,p=o.valign,g=o.lineHeight,v=r.lines,y=v.length,m=o.maxLines;m>0&&y>m?(h=m,l=p===L?Math.floor((y-h)/2):p===Y?y-h:0):(h=y,l=0),u=l+h,d=p===L?Math.max((s-h*g)/2,0):p===Y?Math.max(s-h*g-2,0):0,d+=e;for(var b=l;b<u;b++)if(0!==(a=r.getLineWidth(b))){c=f===I?(i-a)/2:f===A?i-a:0,c+=t;for(var x=v[b],w=0,T=x.length;w<T;w++)this.drawPen(x[w],c,d)}n.restore()}clear(){var t=this.canvas;this.context.clearRect(0,0,t.width,t.height)}drawBackground(){var t=this.defatultStyle.backgroundColor;if(null!==t){var e=this.context,i=this.canvas;e.fillStyle=t,e.fillRect(0,0,i.width,i.height)}}drawUnderline(t,e,i,s,r){if(!(s<=0)){var n=this.context,o=n.lineCap;n.lineCap="butt",n.beginPath(),n.strokeStyle=r,n.lineWidth=s,n.moveTo(t,e),n.lineTo(t+i,e),n.stroke(),n.lineCap=o}}drawPen(t,e,i){var s=this.canvas,r=this.context;r.save();var n=this.parser.propToContextStyle(this.defatultStyle,t.prop);n.buildFont(),n.syncFont(s,r),n.syncStyle(s,r),e+=t.x,i+=t.y,this.autoRound&&(e=Math.round(e),i=Math.round(i));var o=t.text,a=t.width;this.drawUnderline(e,i+n.underlineOffset,a,n.underlineThickness,n.underlineColor),n.strokeThickness&&(n.syncShadow(r,n.shadowStroke),r.strokeText(o,e,i)),n.color&&"none"!==n.color&&(n.syncShadow(r,n.shadowFill),r.fillText(o,e,i)),r.restore()}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defatultStyle=void 0,this.pensManager.destroy(),this.pensManager=void 0,this._tmpPensManager&&(this._tmpPensManager.destroy(),this._tmpPensManager=void 0)}get lines(){return this.pensManager.lines}get desplayLinesCount(){var t=this.pensManager.linesCount,e=this.defatultStyle.maxLines;return e>0&&t>e&&(t=e),t}get linesWidth(){return this.pensManager.getMaxLineWidth()}get linesHeight(){var t=this.desplayLinesCount,e=this.defatultStyle.lineHeight*t;return t>0&&(e-=this.defatultStyle.lineSpacing),e}newPenManager(){return F.pensPool=this.pensPool,F.tagToText=this.parser.propToTagText,F.tagToTextScope=this.parser,new T(F)}get tmpPenManager(){return null===this._tmpPensManager&&(this._tmpPensManager=this.newPenManager()),this._tmpPensManager}getPlainText(t,e,i){var s;if(null==t)s=this.pensManager.rawText;else{var r=this.parser.splitText(t,1);s="";for(var n=0,o=r.length;n<o;n++)s+=r[n]}return null==e&&null==i||(null==e&&(e=0),null==i&&(i=s.length),s=s.substring(e,i)),s}getPenManager(t,e){if(void 0===t)return this.copyPensManager(e,this.pensManager);void 0===e&&(e=this.newPenManager());var i=this.defatultStyle;return this.updatePensManager(t,i.wrapMode,i.wrapWidth,i.lineHeight,e),e}getText(t,e,i,s){if(null==t)return this.pensManager.getSliceTagText(e,i,s);var r=this.tmpPenManager,n=this.defatultStyle;return this.updatePensManager(t,n.wrapMode,n.wrapWidth,n.lineHeight,r),r.getSliceTagText(e,i,s)}copyPensManager(t,e){return void 0===e&&(e=this.pensManager),e.copy(t)}getTextWidth(t){return void 0===t&&(t=this.pensManager),t.getMaxLineWidth()}getLastPen(t){return void 0===t&&(t=this.pensManager),t.lastPen}};const X=Phaser.DOM.AddToDOM,U=Phaser.Display.Canvas.CanvasPool,B=Phaser.GameObjects.Components,W=Phaser.GameObjects.GameObject,V=Phaser.Utils.Objects.GetValue,G=Phaser.DOM.RemoveFromDOM,z=u.a.SPLITREGEXP;var H={},K=new Phaser.Class({Extends:W,Mixins:[B.Alpha,B.BlendMode,B.ComputedSize,B.Crop,B.Depth,B.Flip,B.GetBounds,B.Mask,B.Origin,B.Pipeline,B.ScaleMode,B.ScrollFactor,B.Tint,B.Transform,B.Visible,a],initialize:function(t,e,i,s,r,n,o){if(void 0===e&&(e=0),void 0===i&&(i=0),W.call(this,t,n),this.renderer=t.sys.game.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=U.create(this),this.context=this.canvas.getContext("2d"),r&&r.hasOwnProperty("align")){var a=r.align;delete r.align,r.halign=a}this.style=new h.a(this,r),this.autoRound=!0,this._text="",this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=t.sys.game.config.resolution),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),H.hasOwnProperty(n)||(H[n]=new l.a),J.context=this.context,J.parser=o,J.style=this.style,J.pensPool=H[n],this.canvasText=new N(J),r&&r.padding&&this.setPadding(r.padding),this.setText(s),t.sys.game.config.renderType===Phaser.WEBGL&&t.sys.game.renderer.onContextRestored(function(){this.dirty=!0},this)},text:{set:function(t){this.setText(t)},get:function(){return this._text}},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",X(this.canvas,this.scene.sys.canvas),this.originX=1)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText(!0)),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,s,r,n){return this.style.setShadow(t,e,i,s,r,n)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setHAlign(t)},setLineSpacing:function(t){return this.style.setLineSpacing(t)},setPadding:function(t,e,i,s){if("object"==typeof t){var r=t,n=V(r,"x",null);null!==n?(t=n,i=n):(t=V(r,"left",0),i=V(r,"right",t));var o=V(r,"y",null);null!==o?(e=o,s=o):(e=V(r,"top",0),s=V(r,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===s&&(s=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=s,this.updateText()},setResolution:function(t){return this.style.setResolution(t)},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(t){void 0===t&&(t=!1);var e=this.canvasText,i=this.style;t&&e.updatePensManager(this._text,i.wrapMode,i.wrapWidth,i.lineHeight);var s=e.linesWidth,r=e.linesHeight,n=this.padding,o=s+n.left+n.right,a=r+n.top+n.bottom;0===i.fixedWidth&&(this.width=o),0===i.fixedHeight&&(this.height=a),this.updateDisplayOrigin();var h=i.resolution;o*=h,a*=h,o=Math.max(Math.ceil(o),1),a=Math.max(Math.ceil(a),1);var l=this.canvas,u=this.context;return l.width!==o||l.height!==a?(l.width=o,l.height=a,this.frame.setSize(o,a)):u.clearRect(0,0,o,a),u.save(),u.scale(h,h),e.draw(n.left,n.top,s,r),u.restore(),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(l,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0,this},getTextMetrics:function(){return this.style.getTextMetrics()},toJSON:function(){var t=B.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&G(this.canvas),U.remove(this.canvas),this.canvasText.destroy()},getWrappedText:function(t,e,i){return(t=this.canvasText.getText(t,e,i,!0)).split(z)},getPlainText:function(t,e,i){return this.canvasText.getPlainText(t,e,i)},getText:function(t,e,i){return this.canvasText.getText(t,e,i,!1)},getSubString:function(t,e,i){return this.getText(t,e,i)},copyPensManager:function(t){return this.canvasText.copyPensManager(t)},getPenManager:function(t,e){return this.canvasText.getPenManager(t,e)}}),J={};e.a=K},function(t,e,i){"use strict";var s=i(61),r=i(55),n=i(54);var o=[[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]]],a=i(1);const h=a.a.ODD_R,l=a.a.EVEN_R,u=a.a.ODD_Q,c=a.a.EVEN_Q;var d=function(t,e,i){var s;switch(t){case h:case l:s=1&i;break;case u:case c:s=1&e}return s},f=function(t,e,i){var s=d(this.mode,t,e);return t+o[this.mode][s][i][0]},p=function(t,e,i){var s=d(this.mode,t,e);return e+o[this.mode][s][i][1]},g=function(t){var e,i,s,r={};for(var n in t)i=(e=t[n])[0],s=e[1],r.hasOwnProperty(i)||(r[i]={}),r[i][s]=n;return r};var v=[[g(o[0][0]),g(o[0][1])],[g(o[1][0]),g(o[1][1])],[g(o[2][0]),g(o[2][1])],[g(o[3][0]),g(o[3][1])]],m=function(t,e){var i=d(this.mode,t.x,t.y),s=v[this.mode][i],r=e.x-t.x,n=e.y-t.y;if(s.hasOwnProperty(r)){var o=s[r];if(o.hasOwnProperty(n))return o[n]}return null},b=i(53);const w=a.a.ODD_R,T=a.a.EVEN_R,O=a.a.ODD_Q,S=a.a.EVEN_Q;var _={x:0,y:0},C=function(t,e,i,s){void 0===s&&(s=_);var r=t.x+e,n=t.y+i;switch(this.mode){case w:0!=(1&i)&&0==(1&n)&&(r+=1);break;case T:0!=(1&i)&&0==(1&n)&&(r-=1);break;case O:0!=(1&e)&&0==(1&r)&&(n+=1);break;case S:0!=(1&e)&&0==(1&r)&&(n-=1)}return s.x=r,s.y=n,s},P=i(5);const k=Phaser.Math.Wrap;var M={x:0,y:0},R=function(t,e,i){void 0===i&&(i=M),e=k(e,0,5);var s,r,n,o=this.mode,a=t.x,h=t.y,l=Object(P.a)(o,a,h),u=Object(P.b)(o,a,h),c=Object(P.c)(o,a,h);switch(e){case 1:s=-c,r=-l,n=-u;break;case 2:s=u,r=c,n=l;break;case 3:s=-x,r=-y,n=-z;break;case 4:s=c,r=l,n=u;break;case 5:s=-u,r=-c,n=-l;break;default:s=l,r=u,n=c}return i.x=Object(P.d)(o,s,r,n),i.y=Object(P.e)(o,s,r,n),i},E=i(14),j=function(t,e,i){var s=this.mode,r=t.x,n=t.y,o=e.x,a=e.y,h=Object(P.a)(s,o,a)-Object(P.a)(s,r,n),l=Object(P.b)(s,o,a)-Object(P.b)(s,r,n),u=Object(P.c)(s,o,a)-Object(P.c)(s,r,n);return(Object(E.a)(h)+Object(E.a)(l)+Object(E.a)(u))/2},D=i(41),I=i(17),A=Object(I.a)(6),L=function(t,e,i){var s,r;void 0===i?i=Object(I.a)(6):!0===i&&(i=A),void 0===t?(s=0,r=0):(s=this.getWorldX(t,e),r=this.getWorldY(t,e));var n=0===this.staggeraxis?this.width/2:this.height/2;return Object(D.a)(s,r,n,this.staggeraxis,i),i},Y=i(48),F=new Y.a,N=function(t,e,i){var s,r;void 0===t?(s=0,r=0):(s=this.getWorldX(t,e),r=this.getWorldY(t,e));var n=0===this.staggeraxis?this.width/2:this.height/2;return void 0===i?i=new Y.a(s,r,n,this.staggeraxis):(!0===i&&(i=F),i.setTo(s,r,n,this.staggeraxis)),i};class X extends s.a{constructor(t){super(t)}resetFromJSON(t){super.resetFromJSON(t),this.directions=6}setDirectionMode(t){return this}get allDirections(){return U}get halfDirections(){return B}}const U=[0,1,2,3,4,5],B=[0,1,2];var W={saveOrigin:r.a,restoreOrigin:n.a,getNeighborTileX:f,getNeighborTileY:p,getNeighborTileDirection:m,getOppositeDirection:b.a,offset:C,rotate:R,getDistance:j,getGridPoints:L,getGridPolygon:N};Object.assign(X.prototype,W);e.a=X},function(t,e,i){"use strict";var s=i(60),r=i(55),n=i(54);const o=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],a=o,h=[[[0,1],[-1,1],[-1,-1],[0,-1],[0,2],[-1,0],[0,-2],[1,0]],[[1,1],[0,1],[0,-1],[1,-1],[0,2],[-1,0],[0,-2],[1,0]]];var l=function(t,e,i){switch(this.mode){case 0:t+=o[i][0];break;case 1:t+=a[i][0];break;case 2:t+=h[1&e][i][0]}return t},u=function(t,e,i){switch(this.mode){case 0:e+=o[i][1];break;case 1:e+=a[i][1];break;case 2:e+=h[1&e][i][1]}return e},c=function(t){var e,i,s,r={};for(var n in t)i=(e=t[n])[0],s=e[1],r.hasOwnProperty(i)||(r[i]={}),r[i][s]=n;return r};const d=c(o),f=d,p=[c(h[0]),c(h[1])];var g=function(t,e){var i;switch(this.mode){case 0:i=d;break;case 1:i=f;break;case 2:i=p[1&tileY]}var s=e.x-t.x,r=e.y-t.y;if(i.hasOwnProperty(s)){var n=i[s];if(n.hasOwnProperty(r))return n[r]}return null},v=i(53),y={x:0,y:0},m=function(t,e,i,s){void 0===s&&(s=y);var r=t.x+e,n=t.y+i;return s.x=r,s.y=n,s};const b=Phaser.Math.Wrap;var x={x:0,y:0},w=function(t,e,i){var s,r;switch(void 0===i&&(i=x),e=b(e,0,3)){case 1:s=-t.y,r=t.x;break;case 2:s=-t.x,r=-t.y;break;case 3:s=t.y,r=-t.x;break;default:s=t.x,r=t.y}return i.x=s,i.y=r,i},T=i(14),O=function(t,e,i){var s=e.x-t.x,r=e.y-t.y;return i?Object(T.a)(s)+Object(T.a)(r):Math.sqrt(s*s+r*r)},S=i(17),_=function(t,e,i,s,r,n){void 0===n&&(n=Object(S.a)(4));var o=i/2,a=s/2;return 0===r?(n[0].x=t+o,n[0].y=e-a,n[1].x=t+o,n[1].y=e+a,n[2].x=t-o,n[2].y=e+a,n[3].x=t-o,n[3].y=e-a):(n[0].x=t+o,n[0].y=e,n[1].x=t,n[1].y=e+a,n[2].x=t-o,n[2].y=e,n[3].x=t,n[3].y=e-a),n},C=Object(S.a)(4),P=function(t,e,i){var s,r;void 0===i?i=Object(S.a)(4):!0===i&&(i=C),void 0===t?(s=0,r=0):(s=this.getWorldX(t,e),r=this.getWorldY(t,e));var n=0===this.mode?0:1;return _(s,r,this.width,this.height,n,i),i},k=i(13);const M=Phaser.Geom.Polygon,R=Phaser.Utils.Objects.IsPlainObject,E=Phaser.Utils.Objects.GetValue,j=Phaser.Geom.Line;class D extends M{constructor(t,e,i,s,r){if(super(),R(t)){var n=t;t=E(n,"x",0),e=E(n,"y",0),i=E(n,"width",0),s=E(n,"height",0),r=E(n,"type",0)}for(var o=this.points,a=0;a<4;a++)o.push({});this.setTo(t,e,i,s,r)}setTo(t,e,i,s,r){return"string"==typeof r&&(r=I[r]),this.type=r,this._x=t,this._y=e,this._width=i,this._height=s,_(this.centerX,this.centerY,i,s,r,this.points),this.calculateArea(),this}get x(){return this._x}set x(t){var e=t-this.x;0!==e&&(Object(k.a)(this,e,0),this._x=t)}get y(){return this._y}set y(t){var e=t-this.y;0!==e&&(Object(k.a)(this,0,e),this._y=t)}setPosition(t,e){var i=t-this.x,s=e-this.y;return 0===i&&0===s?this:(Object(k.a)(this,i,s),this._x=t,this._y=e,this)}get left(){return this.x-this.width/2}set left(t){this.x+=t-this.left}get right(){return this.x+this.width/2}set right(t){this.x+=t-this.right}get top(){return this.y-this.height/2}set top(t){this.y+=t-this.top}get bottom(){return this.y+this.height/2}set bottom(t){this.y+=t-this.bottom}get centerX(){return this.x}set centerX(t){this.x+=t-this.centerX}get centerY(){return this.y}set centerY(t){this.y+=t-this.centerY}get width(){return this._width}set width(t){this.setTo(this._x,this._y,t,this._height)}get height(){return this._height}set height(t){this.setTo(this._x,this._y,this._width,t)}setSize(t,e){return this.setTo(this._x,this._y,t,e),this}isEmpty(){return this.width<=0||this.height<=0}getEdge(t,e){void 0===e&&(e=new j);var i=this.points[t],s=this.points[(t+1)%4];return e.setTo(i.x,i.y,s.x,s.y),e}getLineA(t){return this.getEdge(0,t)}getLineB(t){return this.getEdge(1,t)}getLineC(t){return this.getEdge(2,t)}getLineD(t){return this.getEdge(3,t)}}const I={rectangle:0,rhombus:1};Phaser.Geom.rexQuad=D;var A=D,L=new A,Y=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var s=this.getWorldX(t,e),r=this.getWorldY(t,e),n=0===this.mode?0:1;return void 0===i?i=new A(s,r,this.width,this.height,n):(!0===i&&(i=L),i.setTo(s,r,this.width,this.height,n)),i};const F=Phaser.Utils.Objects.GetValue;class N extends s.a{constructor(t){super(t)}resetFromJSON(t){super.resetFromJSON(t),this.setDirectionMode(F(t,"dir",4))}setDirectionMode(t){return"string"==typeof t&&(t=G[t]),this.directions=t,this}get allDirections(){return 4===this.directions?X:U}get halfDirections(){return 4===this.directions?B:W}}const X=[0,1,2,3],U=[0,1,2,3,4,5,6,7],B=[0,1],W=[0,1,4,5];var V={saveOrigin:r.a,restoreOrigin:n.a,getNeighborTileX:l,getNeighborTileY:u,getNeighborTileDirection:g,getOppositeDirection:v.a,offset:m,rotate:w,getDistance:O,getGridPoints:P,getGridPolygon:Y};Object.assign(N.prototype,V);const G={"4dir":4,"8dir":8};e.a=N},function(t,e,i){"use strict";var s=i(15),r=i(19),n=i(27);const o=r.a.uidKey;var a=function(t){return Object(n.a)(t)?t:Object(s.a)(t)[o]},h=i(4),l=i(49);var u=class{constructor(){this.XYZToUID={},this.UIDToXYZ={},this.reset()}shutdown(){return this.XYZToUID=void 0,this.UIDToXYZ=void 0,this}destroy(){return this.shutdown(),this}reset(){return this.removeAll(),this}clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}removeAll(){return Object(h.a)(this.UIDToXYZ),Object(h.a)(this.XYZToUID),this.chessCount=0,this.clearBounds(),this}addUID(t,e,i,s){this.XYZToUID.hasOwnProperty(e)||(this.XYZToUID[e]={});var r=this.XYZToUID[e];return r.hasOwnProperty(i)||(r[i]={}),r[i][s]=t,this.UIDToXYZ[t]={x:e,y:i,z:s},this.chessCount++,this.clearBounds(),this}getUID(t,e,i){var s=this.XYZToUID[t];return s&&(s=s[e])&&void 0!==i&&(s=s[i]),s}removeUID(t,e,i){if(!this.XYZToUID.hasOwnProperty(t))return this;var s=this.XYZToUID[t];if(!s.hasOwnProperty(e))return this;var r=s[e];if(!r.hasOwnProperty(i))return this;var n=r[i];return delete r[i],delete this.UIDToXYZ[n],Object(l.a)(r)&&delete s[e],Object(l.a)(s)&&delete this.XYZToUID[t],this.chessCount--,this.clearBounds(),this}exists(t){return this.UIDToXYZ.hasOwnProperty(t)}contains(t,e,i){return null!=this.getUID(t,e,i)}getXYZ(t){return this.exists(t)?this.UIDToXYZ[t]:null}get xMax(){if(void 0===this._xMax){this._xMax=-1/0;var t,e=this.UIDToXYZ;for(var i in e)t=e[i].x,this._xMax<t&&(this._xMax=t)}return this._xMax}get xMin(){if(void 0===this._xMin){this._xMin=1/0;var t,e=this.UIDToXYZ;for(var i in e)t=e[i].x,this._xMin>t&&(this._xMin=t)}return this._xMin}get yMax(){if(void 0===this._yMax){this._yMax=-1/0;var t,e=this.UIDToXYZ;for(var i in e)t=e[i].y,this._yMax<t&&(this._yMax=t)}return this._yMax}get yMin(){if(void 0===this._yMin){this._yMin=1/0;var t,e=this.UIDToXYZ;for(var i in e)t=e[i].y,this._yMin>t&&(this._yMin=t)}return this._yMin}},c=function(t){if(this.infinityMode)return this;if(void 0===this.width||this.width<=t)return this.width=t,this;var e,i,s;for(e=t;e<this.width;e++)for(i=0;i<this.height;i++)for(s in this.boardData.getUID(e,i))this.RemoveChess(!1,e,i,s);return this.width=t,this},d=function(t){if(this.infinityMode)return this;if(void 0===this.height||this.height<=t)return this.height=t,this;var e,i,s;for(i=t;i<this.height;i++)for(e=0;e<this.width;e++)for(s in this.boardData.getUID(e,i))this.RemoveChess(!1,e,i,s);return this.height=t,this},f=function(t,e){return this.grid.getWorldX(t,e)},p=function(t,e){return this.grid.getWorldY(t,e)},g=function(t,e){return this.grid.getTileX(t,e)},v=function(t,e){return this.grid.getTileY(t,e)},y=function(t,e,i){if(this.infinityMode&&void 0===i)return!0;var s=this.worldXYToTileX(t,e),r=this.worldXYToTileY(t,e);return this.contains(s,r,i)},m=function(t,e,i){if(void 0===t)for(var s=this.getAllChess(),r=0,o=s.length;r<o;r++)this.gridAlign(s[r]);else{if(Object(n.a)(t)&&(t=this.uidToChess(t)),void 0===e){var a=this.chessToTileXYZ(t);e=a.x,i=a.y}t.x=this.tileXYToWorldX(e,i),t.y=this.tileXYToWorldY(e,i)}return this},b=function(t){return null==t?null:this.boardData.exists(t)?r.a.get(t).parent:null},x=function(t,e,i,s,r){if(!this.contains(e,i))return this;var n=this.chessToTileXYZ(t);if(void 0===s&&(s=n?n.z:0),n&&n.x===e&&n.y===i&&n.z===s)return this;var o=this.tileXYZToChess(e,i,s);return o&&this.emit("kickout",t,o,n),this.removeChess(t),o&&this.removeChess(o,e,i,s),this.boardData.addUID(this.getChessUID(t),e,i,s),this.getChessData(t).setBoard(this),r&&this.gridAlign(t,e,i),this},w=function(t,e,i,s,r,n){if(void 0===n&&(n=!1),t){var o=this.chessToTileXYZ(t);if(!o)return this;e=o.x,i=o.y,s=o.z}else if(!(t=this.tileXYZToChess(e,i,s)))return this;return n||this.boardData.removeUID(e,i,s),this.getChessData(t).setBoard(null),r&&t.destroy&&t.destroy(),this},T=function(t,e){for(var i=this.getAllChess(),s=0,r=i.length;s<r;s++)this.removeChess(i[s],void 0,void 0,void 0,t,e);return this},O=function(t,e,i){var s=this.chessToTileXYZ(t),r=this.chessToTileXYZ(e);if(null==s||null==r)return this;this.removeChess(t),this.removeChess(e),this.addChess(t,r.x,r.y,r.z,i),this.addChess(e,s.x,s.y,s.z,i)},S=function(t){void 0===t&&(t=[]);var e=this.boardData.UIDToXYZ;for(var i in e)t.push(this.uidToChess(i));return t},_=function(t,e,i){var s;return(s=!!this.infinityMode||t>=0&&t<this.width&&e>=0&&e<this.height)&&void 0!==i&&(s=this.boardData.contains(t,e,i)),s},C={x:0,y:0},P=function(t,e,i){switch(void 0===i&&(i=0),i){case 0:for(var s=0;s<this.height;s++)for(var r=0;r<this.width;r++)C.x=r,C.y=s,e?t.call(e,C,this):t(C,this);break;case 1:for(s=0;s<this.height;s++)for(r=this.width-1;r>=0;r--)C.x=r,C.y=s,e?t.call(e,C,this):t(C,this);break;case 2:for(r=0;r<this.width;r++)for(s=0;s<this.height;s++)C.x=r,C.y=s,e?t.call(e,C,this):t(C,this);break;case 3:for(r=0;r<this.width;r++)for(s=this.height-1;s>=0;s--)C.x=r,C.y=s,e?t.call(e,C,this):t(C,this)}return this};const k=Phaser.Math.Wrap;var M=function(t,e){return this.wrapMode?t=k(t,0,this.width):!this.infinityMode&&(t<0||t>=this.width)&&(t=null),t};const R=Phaser.Math.Wrap;var E=function(t,e){return this.wrapMode?e=R(e,0,this.height):!this.infinityMode&&(e<0||e>=this.height)&&(e=null),e},j=function(t,e,i){var s=this.boardData.getUID(t,e,i);return this.uidToChess(s)},D=function(t,e,i){void 0===i&&(i=[]);var s=this.boardData.getUID(t,e);if(null==s)return i;for(var r in s)i.push(this.uidToChess(s[r]));return i},I=function(t,e){void 0===e&&(e=[]);var i=this.boardData.UIDToXYZ;for(var s in i)i[s].z===t&&e.push(this.uidToChess(s));return e},A=function(t,e,i){Array.isArray(e)&&(i=e,e=void 0),void 0===i&&(i=[]);for(var s,r=null!=e,n=0,o=t.length;n<o;n++)s=t[n],r?i.push(this.tileXYZToChess(s.x,s.y,e)):this.tileXYToChessArray(s.x,s.y,i);return i},L=function(t){return this.boardData.getXYZ(this.getChessUID(t))},Y={x:0,y:0},F=function(t,e,i,s){if(void 0===s&&(s=Y),0===e&&0===i)s.x=t.x,s.y=t.y;else{var r=this.grid.offset(t,e,i);s.x=r.x,s.y=r.y}return s},N={x:0,y:0},X={x:0,y:0},U=function(t,e,i,s){return void 0===s&&(s=X),void 0===i&&(i=N),this.offset(t,-i.x,-i.y,s),this.grid.rotate(s,e,s),this.offset(s,i.x,i.y,s),s},B=function(t,e,i){return this.grid.getOppositeDirection(t,e,i)},W=function(t,e,i){return this.grid.getDistance(t,e,i)},V=function(t){var e,i=1/0,s=1/0;for(var r in t)e=t[r],i=Math.min(i,e.x),s=Math.min(s,e.y);if(0!==i||0!==s)for(var r in t)e=t[r],this.offset(e,-i,-s,e);var n=-1/0,o=-1/0;for(var r in t)e=t[r],n=Math.max(n,e.x),o=Math.max(o,e.y);return this.setBoardWidth(n),this.setBoardHeight(o),t},G=function(t,e){void 0===e&&(e=[]),void 0===t&&(t=0);for(var i=0;i<this.height;i++)for(var s=0;s<this.width;s++)null===this.tileXYZToChess(s,i,t)&&e.push({x:s,y:i});return e};const z=Phaser.Math.Between,H=Phaser.Utils.Array.GetRandom;var K={x:0,y:0},J=function(t,e){var i,s;void 0===t&&(t=0),void 0===e&&(e=K);for(var r=!0,n=20;r&&n>0;)i=z(0,this.width-1),s=z(0,this.height-1),r=null!==this.tileXYZToChess(i,s,t),n--;if(r){var o=this.getEmptyTileXYArray(t,o);if(0===o.length)return null;var a=H(o);return e.x=a.x,e.y=a.y,o.length=0,e}return e.x=i,e.y=s,e},Z={x:0,y:0},q=function(t,e,i){var s,r;if("number"==typeof e){s=e,void 0===i&&(i=Z);var n=this.grid.getNeighborTileX(t.x,t.y,s),o=this.grid.getNeighborTileY(t.x,t.y,s),a=this.getWrapTileX(n,o),h=this.getWrapTileY(n,o);return null==a||null==h?i=null:(i.x=a,i.y=h),i}null==e&&(e=this.grid.allDirections),void 0===i&&(i=[]);for(var l=0,u=e.length;l<u;l++)s=e[l],null!==(r=this.getNeighborTileXY(t,s))&&i.push({x:r.x,y:r.y});return i},Q=function(t,e,i,s){var r,n,o,a=this.chessToTileXYZ(t);if(null===a)return null;if(null==i&&(i=a.z),"number"==typeof e)return r=e,null===(n=this.getNeighborTileXY(a,r))?null:this.tileXYZToChess(n.x,n.y,i);void 0===s&&(s=[]);for(var h=0,l=(n=this.getNeighborTileXY(a,e)).length;h<l;h++)null!=(o=this.tileXYZToChess(n[h].x,n[h].y,i))&&s.push(o);return s},$=i(52),tt=[],et=function(t,e){if(null===t||null===e)return null;if(Object($.a)(t,e))return null;var i=this.grid.getNeighborTileDirection(t,e);if(this.wrapMode&&null===i){for(var s=0,r=(tt=this.getNeighborTileXY(t,null,tt)).length;s<r;s++)if(Object($.a)(e,tt[s])){i=s;break}tt.length=0}return i},it=function(t,e){var i=this.chessToTileXYZ(t),s=this.chessToTileXYZ(e);return this.getNeighborTileDirection(i,s)},st=function(t,e){return null!==this.getNeighborChessDirection(t,e)},rt=[],nt=function(t,e,i){var s;if(void 0===i){for(var r=0,n=(s=this.tileXYToChessArray(t,e,rt)).length;r<n;r++)if(!0===this.getChessData(s[r]).blocker)return rt.length=0,!0;return rt.length=0,!1}return null!==(s=this.tileXYZToChess(t,e,i))&&!0===this.getChessData(s).blocker},ot=function(t,e){return!1===t||!0===t?t:!0===t[e]},at=[],ht=function(t,e,i,s){var r;if(void 0===i){for(var n=0,o=(r=this.tileXYToChessArray(t,e,at)).length;n<o;n++)if(ot(this.getChessData(r[n]).blocker))return at.length=0,!0;return at.length=0,!1}return null!==(r=this.tileXYZToChess(t,e,i))&&ot(this.getChessData(r).blocker)},lt=function(t){if(this.input.enable&&t.isDown){null===this.input.pointer&&(this.input.pointer=t);var e=this.worldXYToTileX(t.x,t.y),i=this.worldXYToTileY(t.x,t.y);if(this.input.tilePosition.x=e,this.input.tilePosition.y=i,this.contains(e,i)){this.emit("tiledown",t,this.input.tilePosition),dt.length=0;for(var s,r=this.tileXYToChessArray(e,i,dt),n=0,o=r.length;n<o;n++)(s=r[n]).emit&&s.emit("board.pointerdown",t),this.emit("gameobjectdown",t,s);dt.length=0}}},ut=function(t){if(this.input.enable){var e=this.worldXYToTileX(t.x,t.y),i=this.worldXYToTileY(t.x,t.y);if(this.input.tilePosition.x=e,this.input.tilePosition.y=i,this.contains(e,i)){this.emit("tileup",t,this.input.tilePosition),dt.length=0;for(var s,r=this.tileXYToChessArray(e,i,dt),n=0,o=r.length;n<o;n++)(s=r[n]).emit&&s.emit("board.pointerup",t),this.emit("gameobjectup",t,s);dt.length=0,this.input.pointer===t&&(this.input.pointer=null)}}},ct=function(t){if(this.input.enable){var e=this.worldXYToTileX(t.x,t.y),i=this.worldXYToTileY(t.x,t.y);if(this.input.tilePosition.x!==e||this.input.tilePosition.y!==i)if(this.input.tilePosition.x=e,this.input.tilePosition.y=i,this.contains(e,i)){null===this.input.pointer&&(this.input.pointer=t),this.emit("tilemove",t,this.input.tilePosition),dt.length=0;for(var s,r=this.tileXYToChessArray(e,i,dt),n=0,o=r.length;n<o;n++)(s=r[n]).emit&&s.emit("board.pointermove",t),this.emit("gameobjectmove",t,s);dt.length=0}else this.input.pointer===t&&(this.input.pointer=null)}},dt=[],ft=function(t){return void 0===t&&(t=!0),this.input||(this.input={enable:!0,pointer:null,tilePosition:{x:void 0,y:void 0}},this.scene.input.on("pointerdown",lt,this),this.scene.input.on("pointerup",ut,this),this.scene.input.on("pointermove",ct,this),this.on("destroy",function(){this.scene.input.off("pointerdown",lt,this),this.scene.input.off("pointerup",ut,this),this.scene.input.off("pointermove",ct,this)},this)),this.input.enable=t,t||(this.input.pointer=null),this},pt=function(t,e,i){return this.grid.getGridPoints(t,e,i)},gt=function(t,e,i){return this.grid.getGridPolygon(t,e,i)},vt=i(46),yt=i(45),mt={quadGrid:vt.a,hexagonGrid:yt.a};const bt=Phaser.Events.EventEmitter,xt=Phaser.Utils.Objects.GetValue,wt=Phaser.Utils.Objects.IsPlainObject;class Tt extends bt{constructor(t,e){super(),this.scene=t,this.boardData=new u,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setGrid(xt(t,"grid",void 0)),this.setWrapMode(xt(t,"wrap",!1)),this.setInfinityBoard(xt(t,"inifinity",!1)),this.setBoardWidth(xt(t,"width",0)),this.setBoardHeight(xt(t,"height",0)),this}boot(){this.scene.events.on("destroy",this.destroy,this)}shutdown(){return this.removeAllChess(!0,!0),super.shutdown(),this.boardData.shutdown(),this.scene=void 0,this.boardData=void 0,this}destroy(){return this.emit("destroy"),this.shutdown(),this}setGrid(t){if(wt(t)){var e=t,i=xt(e,"gridType","quadGrid");t=new mt[i](e)}return this.grid=t,this}setWrapMode(t){return void 0===t&&(t=!0),this.wrapMode=t,this}setInfinityBoard(t){return void 0===t&&(t=!0),this.infinityMode=t,this}setBoardSize(t,e){return this.setBoardWidth(t),this.setBoardHeight(e),this}exists(t){return this.boardData.exists(this.getChessUID(t))}get chessCount(){return this.boardData.chessCount}}var Ot={getChessData:s.a,getChessUID:a,setBoardWidth:c,setBoardHeight:d,tileXYToWorldX:f,tileXYToWorldY:p,worldXYToTileX:g,worldXYToTileY:v,isOverlappingPoint:y,gridAlign:m,uidToChess:b,addChess:x,removeChess:w,removeAllChess:T,swapChess:O,moveChess:x,getAllChess:S,contains:_,forEachTileXY:P,getWrapTileX:M,getWrapTileY:E,tileXYZToChess:j,tileXYToChessArray:D,tileZToChessArray:I,tileXYArrayToChess:A,chessToTileXYZ:L,offset:F,rotate:U,getOppositeDirection:B,getDistance:W,fit:V,getEmptyTileXYArray:G,getRandomEmptyTileXY:J,getNeighborTileXY:q,getNeighborChess:Q,getNeighborTileDirection:et,getNeighborChessDirection:it,areNeighbors:st,hasBlocker:nt,hasEdgeBlocker:ht,setInteractive:ft,getGridPoints:pt,getGridPolygon:gt};Object.assign(Tt.prototype,Ot);e.a=Tt},function(t,e,i){"use strict";var s=i(13),r=i(32),n=i(31),o=i(41);const a=Phaser.Geom.Polygon,h=Phaser.Utils.Objects.IsPlainObject,l=Phaser.Utils.Objects.GetValue,u=Phaser.Geom.Line;class c extends a{constructor(t,e,i,s){if(super(),h(t)){var r=t;t=l(r,"x",0),e=l(r,"y",0),i=l(r,"size",0),s=l(r,"type",1)}for(var n=this.points,o=0;o<6;o++)n.push({});this.setTo(t,e,i,s)}setTo(t,e,i,s){return"string"==typeof s&&(s=d[s]),this._x=t,this._y=e,this._size=i,this._type=s,Object(o.a)(t,e,i,s,this.points),this.calculateArea(),this.width=Object(r.a)(this),this.height=Object(n.a)(this),this}get x(){return this._x}set x(t){var e=t-this.x;0!==e&&(Object(s.a)(this,e,0),this._x=t)}get y(){return this._y}set y(t){var e=t-this.y;0!==e&&(Object(s.a)(this,0,e),this._y=t)}get centerX(){return this.x}set centerX(t){this.x=t}get centerY(){return this.y}set centerY(t){this.y=t}setPosition(t,e){var i=t-this.x,r=e-this.y;return 0===i&&0===r?this:(Object(s.a)(this,i,r),this._x=t,this._y=e,this)}get left(){return this.x-this.width/2}set left(t){this.x+=t-this.left}get right(){return this.x+this.width/2}set right(t){this.x+=t-this.right}get top(){return this.y-this.height/2}set top(t){this.y+=t-this.top}get bottom(){return this.y+this.height/2}set bottom(t){this.y+=t-this.bottom}get size(){return this._size}set size(t){this.setTo(this._x,this._y,t,this.type)}setSize(t){return this.size=t,this}get type(){return this._type}set type(t){this.setTo(this._x,this._y,this._size,t)}setType(t){this.type=t}isEmpty(){return this.size<=0}getEdge(t,e){void 0===e&&(e=new u);var i=this.points[t],s=this.points[(t+1)%6];return e.setTo(i.x,i.y,s.x,s.y),e}getLineA(t){return this.getEdge(0,t)}getLineB(t){return this.getEdge(1,t)}getLineC(t){return this.getEdge(2,t)}getLineD(t){return this.getEdge(3,t)}getLineE(t){return this.getEdge(4,t)}getLineF(t){return this.getEdge(5,t)}}const d={flat:0,y:0,pointy:1,x:1};Phaser.Geom.rexHexagon=c,e.a=c},function(t,e,i){"use strict";e.a=function(t){for(var e in t)return!1;return!0}},function(t,e,i){"use strict";var s=i(8),r=i(2);const n=Phaser.Utils.Objects.GetValue;var o=class extends s.a{constructor(t,e){super(t,e),this.parent=t,this.scene=Object(r.a)(t),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=n(t,"isRunning",!1),this.timeScale=n(t,"timeScale",1),this.now=n(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}boot(){super.boot(),this.parent.on&&this.parent.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.parent=void 0,this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene.events.off("update",this.update,this)}start(t){return void 0===t&&(t=0),this.now=t,super.start(),this}seek(t){return this.now=t,this}update(t,e){return this.isRunning&&0!==this.timeScale?(this.now+=e*this.timeScale,this):this}};e.a=o},function(t,e,i){"use strict";var s=i(23),r=i(25);const n=Phaser.Utils.Objects.GetValue;var o=function(t,e,i){var s,r=n(i,"reverse",!1);if("string"==typeof t[0])s=a(t,e,i);else if(r)for(h=(l=t.length)-1;h>=0;h--)s=o(t[h],e,i);else for(var h=0,l=t.length;h<l;h++)s=o(t[h],e,i);return s},a=function(t,e,i){var o=n(i,"argsConvert",void 0),a=n(i,"argsConvertScope",void 0),l=t[0];if(h=Object(s.a)(h,t,1),o){!0===o&&(o=r.a,a=void 0);for(var u=0,c=h.length;u<c;u++)h[u]=a?o.call(a,h[u],t):o(h[u],t)}var d=e[l];return null==d&&(d=n(e,l,null)),d.apply(e,h)},h=[],l=o;e.a=l},function(t,e,i){"use strict";e.a=function(t,e){return t.x===e.x&&t.y===e.y}},function(t,e,i){"use strict";e.a=function(t,e,i){return(i+3)%6}},function(t,e,i){"use strict";e.a=function(){return this.x=this._savedOriginX,this.y=this._savedOriginY,this}},function(t,e,i){"use strict";e.a=function(){return this._savedOriginX=this.x,this._savedOriginY=this.y,this}},function(t,e,i){"use strict";var s=i(44),r={rawText:null,prevProp:null},n=new(i(24).a);var o=function(t){for(var e,i,s,r={},n=0,o=(t=t.split(";")).length;n<o;n++)if(i=(e=t[n].split(":"))[0],s=e[1],!a(i)&&!a(s)){switch(i){case"stroke":var h=s.split(" ");s={},(u=h.length)>=1&&(s.color=h[0]),u>=2&&(s.thinkness=parseInt(h[1].replace("px","")));break;case"shadow":var l=s.split(" ");s={},(u=l.length)>=1&&(s.color=l[0]),u>=2&&(s.offsetX=parseInt(l[1].replace("px",""))),u>=3&&(s.offsetY=parseInt(l[2].replace("px",""))),u>=4&&(s.blur=parseInt(l[3].replace("px","")));break;case"u":case"underline":var u,c=s.split(" ");s={},(u=c.length)>=1&&(s.color=c[0]),u>=2&&(s.thinkness=parseInt(c[1].replace("px",""))),u>=3&&(s.offset=parseInt(c[2].replace("px","")))}r[i]=s}return r},a=function(t){return 0===(t=t.replace(f,"")).length},h=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,l=/<\s*class=/i,u=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,c=/<\s*style=/i,d=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,f=/^\s+|\s+$/,p=class{constructor(t){void 0===t&&(t={}),this.tags=t}addTag(t,e){this.tags[t]=e}splitText(t,e){for(var i,s,r,n=[],o=0,a=t.length,f=a;i=h.exec(t);)s=i[0],o<(f=h.lastIndex-s.length)&&n.push(t.substring(o,f)),void 0===e?n.push(s):1===e&&(l.test(s)?(r=s.match(u),n.push(r[2])):c.test(s)&&(r=s.match(d),n.push(r[2]))),o=h.lastIndex;return o<a&&n.push(t.substring(o,a)),n}tagTextToProp(t,e){var i,s;if(l.test(t)){if(null!=(h=t.match(u))){var n=h[1],a=this.tags;(s=a.hasOwnProperty(n)?a[n]:{})._class=n,i=h[2]}}else if(c.test(t)){var h;if(null!=(h=t.match(d))){var f=h[1];(s=o(f))._style=f,i=h[2]}}null==i&&(i=t),null==s&&(s={});var p=r;return p.rawText=i,p.prop=s,p}propToContextStyle(t,e){var i=n;if(e.hasOwnProperty("img"))i.image=e.img;else{if(i.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var s=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];i.fontFamily=s}else i.fontFamily=t.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var r=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];"number"==typeof r&&(r=r.toString()+"px"),i.fontSize=r}else i.fontSize=t.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var o=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];i.fontStyle=o}else i.fontStyle=t.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")?(e.hasOwnProperty("color")?e.color:e["font-color"],i.color=e.color):i.color=t.color,e.hasOwnProperty("stroke")){var a=e.stroke;i.stroke=a.hasOwnProperty("color")?a.color:t.stroke,i.strokeThickness=a.hasOwnProperty("thinkness")?a.thinkness:t.strokeThickness}else i.stroke=t.stroke,i.strokeThickness=t.strokeThickness}if(e.hasOwnProperty("shadow")){var h=e.shadow;i.shadowColor=h.hasOwnProperty("color")?h.color:t.shadowColor,i.shadowOffsetX=h.hasOwnProperty("offsetX")?h.offsetX:t.shadowOffsetX,i.shadowOffsetY=h.hasOwnProperty("offsetY")?h.offsetY:t.shadowOffsetY,i.shadowBlur=h.hasOwnProperty("blur")?h.blur:t.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0}else i.shadowColor=t.shadowColor,i.shadowOffsetX=t.shadowOffsetX,i.shadowOffsetY=t.shadowOffsetY,i.shadowBlur=t.shadowBlur,i.shadowStroke=t.shadowStroke,i.shadowFill=t.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var l=e.hasOwnProperty("u")?e.u:e.underline;i.underlineColor=l.hasOwnProperty("color")?l.color:t.underlineColor,i.underlineThickness=l.hasOwnProperty("thinkness")?l.thinkness:t.underlineThickness,i.underlineOffset=l.hasOwnProperty("offset")?l.offset:t.underlineOffset}else i.underlineColor=t.underlineColor,i.underlineThickness=t.underlineThickness,i.underlineOffset=t.underlineOffset;return i}propToTagText(t,e,i){return e.hasOwnProperty("_class")?""===t&&this.isTextTag(e._class)?"":"<class='"+e._class+"'>"+t+"</class>":e.hasOwnProperty("_style")?"<style='"+e._style+"'>"+t+"</style>":void 0}destroy(){this.tags=void 0}isTextTag(t){var e=this.tags[t];return!!e&&null==e.img}};const g=Phaser.Utils.Objects.GetValue;e.a=class extends s.a{constructor(t,e,i,s,r){var n=g(r,"tags",void 0),o=new p(n);super(t,e,i,s,r,"rexTagText",o),this.parser=o}addTag(t,e){return this.parser.addTag(t,e),this.updateText(!0)}addTags(t){for(var e in t)this.parser.addTag(e,t[e]);return this.updateText(!0)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}},function(t,e,i){"use strict";var s=i(44),r={rawText:null,prevProp:null},n=new(i(24).a),o={},a={splitText:function(t,e){for(var i,s,r=[],n=0,o=t.length,a=o;i=u.exec(t);)s=i[0],n<(a=u.lastIndex-s.length)&&r.push(t.substring(n,a)),void 0===e&&r.push(s),n=u.lastIndex;return n<o&&r.push(t.substring(n,o)),r},tagTextToProp:function(t,e){var i,s;null==e&&(e={}),e.img&&h(e,M,"img"),c.test(t)?(h(e,R,"b",!0),i=""):d.test(t)?(h(e,M,"b"),i=""):f.test(t)?(h(e,R,"i",!0),i=""):p.test(t)?(h(e,M,"i"),i=""):g.test(t)?(s=t.match(g),h(e,R,"size",s[1]+"px"),i=""):v.test(t)?(h(e,M,"size"),i=""):y.test(t)?(s=t.match(y),h(e,R,"color",s[1]),i=""):m.test(t)?(h(e,M,"color"),i=""):b.test(t)?(s=t.match(b),h(e,R,"u",!0),i=""):x.test(t)?(s=t.match(x),h(e,R,"u",s[1]),i=""):w.test(t)?(h(e,M,"u"),i=""):T.test(t)?(h(e,R,"shadow",!0),i=""):O.test(t)?(h(e,M,"shadow"),i=""):S.test(t)?(h(e,R,"stroke",!0),i=""):_.test(t)?(s=t.match(_),h(e,R,"stroke",s[1]),i=""):C.test(t)?(h(e,M,"stroke"),i=""):P.test(t)?(s=t.match(P),h(e,R,"img",s[1]),i=""):k.test(t)?(h(e,M,"img"),i=""):i=t;var n=r;return n.rawText=i,n.prop=e,n},propToContextStyle:function(t,e){var i=n;if(e.hasOwnProperty("img"))i.image=e.img;else{if(i.image=null,e.hasOwnProperty("family")?i.fontFamily=e.family:i.fontFamily=t.fontFamily,e.hasOwnProperty("size")){var s=e.size;"number"==typeof s&&(s=s.toString()+"px"),i.fontSize=s}else i.fontSize=t.fontSize;i.fontStyle=l(e.b,e.i),e.hasOwnProperty("color")?i.color=e.color:i.color=t.color,e.hasOwnProperty("stroke")?!0===e.stroke?(i.stroke=t.stroke,i.strokeThickness=t.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=t.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=0)}return e.hasOwnProperty("shadow")?!0===e.shadow?(i.shadowColor=t.shadowColor,i.shadowOffsetX=t.shadowOffsetX,i.shadowOffsetY=t.shadowOffsetY,i.shadowBlur=t.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=e.shadow,i.shadowOffsetX=t.shadowOffsetX,i.shadowOffsetY=t.shadowOffsetY,i.shadowBlur=t.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),e.hasOwnProperty("u")?!0===e.u?(i.underlineColor=t.underlineColor,i.underlineThickness=t.underlineThickness,i.underlineOffset=t.underlineOffset):(i.underlineColor=e.u,i.underlineThickness=t.underlineThickness,i.underlineOffset=t.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),i},propToTagText:function(t,e,i){for(var s in null==i&&(i=o),i)e.hasOwnProperty(s)||(t="[/"+s+"]"+t);var r="";for(var s in e)i[s]!==e[s]&&("size"===s?r+="[size="+e[s].replace("px","")+"]":"color"===s||"stroke"===s||"img"===s?r+="["+s+"="+e[s]+"]":"u"===s?!0===e[s]?r+="[u]":r+="[u="+e[s]+"]":r+="["+s+"]");return t=r+t}},h=function(t,e,i,s){return e===R?t[i]=s:t.hasOwnProperty(i)&&delete t[i],t},l=function(t,e){return t&&e?"bold italic":t?"bold":e?"italic":""},u=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[img=([^\]]+)\]|\[\/img\]/gi,c=/\[b\]/i,d=/\[\/b\]/i,f=/\[i\]/i,p=/\[\/i\]/i,g=/\[size=(\d+)\]/i,v=/\[\/size\]/i,y=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,m=/\[\/color\]/i,b=/\[u\]/i,x=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,w=/\[\/u\]/i,T=/\[shadow\]/i,O=/\[\/shadow\]/i,S=/\[stroke\]/i,_=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,C=/\[\/stroke\]/i,P=/\[img=([^\]]+)\]/i,k=/\[\/img\]/i;const M=!1,R=!0;var E=a;e.a=class extends s.a{constructor(t,e,i,s,r){super(t,e,i,s,r,"rexBBCodeText",E)}}},function(t,e,i){"use strict";const s=Phaser.Renderer.WebGL.Utils;var r=function(t,e,i,r,n){e.dirty&&(e.updateTexture(),e.dirty=!1);var o=e.frame,a=o.width,h=o.height,l=s.getTintAppendFloatAlpha;this.pipeline.batchTexture(e,o.glTexture,a,h,e.x,e.y,e.width,e.height,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,h,l(e._tintTL,r.alpha*e._alphaTL),l(e._tintTR,r.alpha*e._alphaTR),l(e._tintBL,r.alpha*e._alphaBL),l(e._tintBR,r.alpha*e._alphaBR),e._isTinted&&e.tintFill,0,0,r,n)},n=function(t,e,i,s,r){t.batchSprite(e,e.frame,s,r)},o=i(3),a=(o.a,o.a,{renderWebGL:r,renderCanvas:n});const h=Phaser.Display.Canvas.CanvasPool,l=Phaser.GameObjects.Components,u=Phaser.GameObjects.GameObject;var c=new Phaser.Class({Extends:u,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScaleMode,l.ScrollFactor,l.Tint,l.Transform,l.Visible,a],initialize:function(t,e,i,s,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),u.call(this,t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=t.sys.game.config.resolution,this.canvas=h.create(this,this.resolution*s,this.resolution*r),this.context=this.canvas.getContext("2d"),this.dirty=!0,this.setPosition(e,i),this.setSize(s,r),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer.gl&&(s>0&&r>0?this.updateTexture():(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null)),t.sys.game.config.renderType===Phaser.WEBGL&&t.sys.game.renderer.onContextRestored(function(){this.dirty=!0},this)},getCanvas:function(t){return t||(this.dirty=!0),this.canvas},needRedraw:function(){return this.dirty=!0,this},clear:function(){var t=this.canvas;return t.getContext("2d").clearRect(0,0,t.width,t.height),this.dirty=!0,this},fill:function(t){var e=this.canvas,i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,e.width,e.height),this.dirty=!0,this},preDestroy:function(){h.remove(this.canvas)},updateTexture:function(t,e){return t&&(e?t.call(e,this.canvas,this.context):t(this.canvas,this.context)),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1,this},generateTexture:function(t,e,i,s,r){var n,o=this.canvas,a=this.scene.sys,h=a.game.renderer;void 0===e&&(e=0),void 0===i&&(i=0),void 0===s?s=o.width:s*=this.resolution,void 0===r?r=o.height:r*=this.resolution;var l=(n=a.textures.exists(t)?a.textures.get(t):a.textures.createCanvas(t,s,r)).getSourceImage();l.width!==s&&(l.width=s),l.height!==r&&(l.height=r);var u=l.getContext("2d");return u.clearRect(0,0,s,r),u.drawImage(o,e,i,s,r),h.gl&&n&&(n.source[0].glTexture=h.canvasToTexture(l,n.source[0].glTexture,!0,0)),this},loadTexture:function(t,e){var i=this.scene.sys;if(!i.textures.exists(t))return this;void 0===e&&(e=!0);var s=i.textures.get(t).getSourceImage(),r=(s.getContext("2d"),this.canvas);r.width!==s.width&&(r.width=s.width),r.height!==s.height&&(r.height=s.height);var n=r.getContext("2d");return n.clearRect(0,0,r.width,r.height),n.drawImage(s,0,0,r.width,r.height),this.updateTexture(),e&&this.setSize(r.width/this.resolution,r.height/this.resolution),this},resize:function(t,e){return this.canvas.width=this.resolution*t,this.canvas.height=this.resolution*e,this.setSize(t,e),this.updateDisplayOrigin(),this}});e.a=c},function(t,e,i){"use strict";var s=i(2);const r=Phaser.Events.EventEmitter,n=Phaser.Utils.Objects.GetValue,o=Phaser.Math.Distance.Between;var a=class extends r{constructor(t,e){super(),this.gameObject=t,this.scene=Object(s.a)(t),t.setInteractive(n(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.setEnable(n(t,"enable",!0)),this.holdThreshold=n(t,"holdThreshold",50),this}boot(){this.gameObject.on("pointerdown",this.onPointIn,this),this.gameObject.on("pointerover",this.onPointIn,this),this.gameObject.on("pointerup",this.onPointOut,this),this.gameObject.on("pointerout",this.onPointOut,this),this.gameObject.on("pointermove",this.onPointerMove,this),this.gameObject.on("destroy",this.destroy,this),this.scene.events.on("preupdate",this.preupdate,this)}shutdown(){super.shutdown(),this.scene.events.off("preupdate",this.preupdate,this),this.pointer=void 0,this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}setEnable(t){return void 0===t&&(t=!0),this.enable===t?this:(t||(this.isInTouched=!1,this.pointer=void 0),this.enable=t,this.gameObject.input.enabled=t,this)}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return void 0===this.pointer}get justMoved(){return this.pointer&&this.pointer.justMoved}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){return this.scene.sys.game.loop.delta}get speed(){return this.x===this.preX&&this.y===this.preY?0:o(this.preX,this.preY,this.x,this.y)/(.001*this.dt)}get speedX(){return this.dx/(.001*this.dt)}get speedY(){return this.dy/(.001*this.dt)}onPointIn(t,e,i){t.isDown&&void 0===this.pointer&&(this.pointer=t,this.localX=e,this.localY=i)}onPointOut(t){this.pointer===t&&(this.pointer=void 0)}onPointerMove(t,e,i){t.isDown&&this.pointer===t&&(this.localX=e,this.localY=i)}preupdate(t,e){var i=this.pointer;i&&!this.isInTouched?(this.x=i.x,this.y=i.y,this.preX=i.x,this.preY=i.y,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",i,this.localX,this.localY)):i&&this.isInTouched?this.x===i.x&&this.y===i.y?void 0===this.holdStartTime?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=i.x,this.y=i.y,this.holdStartTime=void 0,this.emit("touchmove",i,this.localX,this.localY)):!i&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",i))}};e.a=a},function(t,e,i){"use strict";var s=function(t,e){var i;switch(this.mode){case 0:i=t*this.width;break;case 1:i=(t-e)*this._halfWidth;break;case 2:i=t*this.width,1&e&&(i+=this._halfWidth)}return i+this.x},r=function(t,e){var i;switch(this.mode){case 0:i=e*this.height;break;case 1:i=(t+e)*this._halfHeight;break;case 2:i=e*this._halfHeight}return i+this.y},n=function(t,e){var i;switch(this.mode){case 0:t-=this.x,i=Math.round(t/this.width);break;case 1:t-=this.x,e-=this.y,i=.5*(Math.round(e/this._halfHeight)+Math.round(t/this._halfWidth));break;case 2:var s=this.getTileY(t,e);t-=this.x,1&s&&(t-=this._halfWidth),i=Math.round(t/this.width)}return i},o=function(t,e){var i;switch(this.mode){case 0:e-=this.y,i=Math.round(e/this.height);break;case 1:t-=this.x,e-=this.y,i=.5*(Math.round(e/this._halfHeight)-Math.round(t/this._halfWidth));break;case 2:e-=this.y,i=Math.round(e/this._halfHeight)}return i};const a=Phaser.Utils.Objects.GetValue;class h{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.setType(a(t,"type",0)),this.setOriginPosition(a(t,"x",0),a(t,"y",0)),this.setCellSize(a(t,"cellWidth",0),a(t,"cellHeight",0))}setOriginPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this._width=t,this._halfWidth=t/2}get height(){return this._height}set height(t){this._height=t,this._halfHeight=t/2}setCellSize(t,e){return this.width=t,this.height=e,this}get cellWidth(){return this.width}set cellWidth(t){this.width=t}get cellHeight(){return this.height}set cellHieght(t){this.height=t}setType(t){return"string"==typeof t&&(t=u[t]),this.mode=t,this}}var l={getWorldX:s,getWorldY:r,getTileX:n,getTileY:o};Object.assign(h.prototype,l);const u={orthogonal:0,isometric:1,staggered:2};e.a=h},function(t,e,i){"use strict";var s=i(32),r=i(31),n=i(1);const o=n.a.ODD_R,a=n.a.EVEN_R,h=n.a.ODD_Q,l=n.a.EVEN_Q;var u=function(t,e){var i=this.width,s=t*i;switch(this.mode){case o:1&e&&(s+=i/2);break;case a:1&e&&(s-=i/2);break;case h:case l:s*=.75}return s+this.x};const c=n.a.ODD_R,d=n.a.EVEN_R,f=n.a.ODD_Q,p=n.a.EVEN_Q;var g=function(t,e){var i=this.height,s=e*i;switch(this.mode){case c:case d:s*=.75;break;case f:1&t&&(s+=i/2);break;case p:1&t&&(s-=i/2)}return s+this.y};const v=n.a.ODD_R,y=n.a.EVEN_R,m=n.a.ODD_Q,b=n.a.EVEN_Q;var x=function(t,e){var i=this.width;switch(t-=this.x,this.mode){case v:1&this.getTileY(t,e)&&(t-=this.width/2);break;case y:1&this.getTileY(t,e)&&(t+=this.width/2);break;case m:case b:t/=.75}return Math.round(t/i)};const w=n.a.ODD_R,T=n.a.EVEN_R,O=n.a.ODD_Q,S=n.a.EVEN_Q;var _=function(t,e){var i=this.height;switch(e-=this.y,this.mode){case w:case T:e/=.75;break;case O:1&this.getTileX(t,e)&&(e-=i/2);break;case S:1&this.getTileX(t,e)&&(e+=i/2)}return Math.round(e/i)};const C=Phaser.Utils.Objects.GetValue,P=n.a.ODD_R,k=n.a.EVEN_R,M=n.a.ODD_Q,R=n.a.EVEN_Q;class E{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.setType(C(t,"staggeraxis",1),C(t,"staggerindex",1)),this.setOriginPosition(C(t,"x",0),C(t,"y",0));var e=C(t,"size",void 0);if(void 0!==e){var i={size:e,type:this.staggeraxis},n=Object(s.a)(i),o=Object(r.a)(i);this.setCellSize(n,o)}else this.setCellSize(C(t,"cellWidth",0),C(t,"cellHeight",0))}setOriginPosition(t,e){return this.x=t,this.y=e,this}setCellSize(t,e){return this.width=t,this.height=e,this}get cellWidth(){return this.width}set cellWidth(t){this.width=t}get cellHeight(){return this.height}set cellHieght(t){this.height=t}setType(t,e){return"string"==typeof t&&(t=D[t]),"string"==typeof e&&(e=I[e]),this.staggeraxis=t,this.staggerindex=e,this.mode=0===t?0===e?R:M:0===e?k:P,this}}var j={getWorldX:u,getWorldY:g,getTileX:x,getTileY:_};Object.assign(E.prototype,j);const D={y:0,x:1},I={even:0,odd:1};e.a=E},function(t,e,i){"use strict";const s=Phaser.GameObjects.Graphics;const r={rectangle:0,circle:1};e.a=class extends s{constructor(t,e){void 0===e&&(e=0),"string"==typeof e&&(shaep=r[e]),super(t.scene,{x:t.x,y:t.y}),this.parent=t,this.shape=e,this.resize()}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,e){return void 0===t&&(t=this.parent.x),void 0===e&&(e=this.parent.y),super.setPosition(t,e),this}resize(){var t=this.parent;if(this.widthSave===t.width&&this.heightSave===t.height)return this;switch(this.clear().fillStyle(16777215),this.shape){case 1:var e=Math.min(t.width/2,t.height/2);this.fillCircle(0,0,e);break;default:this.fillRect(-t.width*t.originX,-t.height*t.originY,t.width,t.height)}return this.widthSave=t.width,this.heightSave=t.height,this}}},function(t,e,i){"use strict";var s=i(2);const r=Phaser.Utils.Objects.GetValue,n=Phaser.Utils.Objects.GetAdvancedValue;const o={stop:0,destroy:1,yoyo:2};var a=class{constructor(t,e){this.gameObject=t,this.scene=Object(s.a)(t),this.alpha={},this.tween=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setMode(r(t,"mode",0)),this.setAlphaRange(n(t,"alpha.start",this.gameObject.alpha),n(t,"alpha.end",0)),this.setDelay(n(t,"delay",0)),this.setFadeOutTime(n(t,"duration",1e3)),this}toJSON(){return{mode:this.mode,alpha:this.alpha,delay:this.delay,duration:this.duration}}boot(){this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){this.stop(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}setMode(t){return"string"==typeof t&&(t=o[t]),this.mode=t,this}setAlphaRange(t,e){return this.alpha.start=t,this.alpha.end=e,this}setDelay(t){return this.delay=t,this}setFadeOutTime(t){return this.duration=t,this}start(){if(!this.tween){var t=this.alpha;return this.gameObject.alpha=t.start,this.tween=this.scene.tweens.add({targets:this.gameObject,alpha:t.end,delay:this.delay,duration:this.duration,ease:"Linear",yoyo:2==this.mode,repeat:2==this.mode?-1:0,onComplete:this.complete,onCompleteScope:this}),this}}stop(){if(this.tween)return this.tween.stop(),this.tween=void 0,this}complete(){1===this.mode&&this.gameObject.destroy()}};e.a=a},function(t,e,i){"use strict";e.a=function(t){return"rexMiniBoard"===t.type}},function(t,e,i){"use strict";var s=function(t){return t&&"function"==typeof t},r=function(t,e,i,s){for(var r,n,o=this.board,a=o.grid.halfDirections,h=this.dirMask,l=o.width,u=o.height,c=0,d=a.length;c<d;c++)if(!1!==h[r=a[c]])for(var f=0;f<u;f++)for(var p=0;p<l;p++)if(!1!==(n=this.matchAtDir(t,p,f,r))&&(e&&(i?e.call(i,n,o):e(n,o)),s))return n;return this},n={tileXY:[],direction:void 0,pattern:void 0},o=function(t,e,i,s){var r,o="number"==typeof t;o?(r=t,t=null):r=t.length;var a,h,l=this.wildcard,u=this.board,c=n.tileXY;c.length=0;for(var d=0;d<r;d++){if(void 0===h)h={x:e,y:i};else if(null===(h=u.getNeighborTileXY(h,s,h)))return!1;if(null==(a=this.getSymbol(h.x,h.y)))return!1;if(a!==l)if(o){if(null===t)t=a;else if(t!==a)return!1}else if(t[d]!==a)return!1;c.push({x:h.x,y:h.y})}return n.direction=s,n.pattern=t,n};const a=Phaser.Utils.Objects.GetValue,h=Phaser.Utils.Objects.IsPlainObject;class l{constructor(t){this.symbols=[],this.dirMask={},this.resetFromJSON(t),this.boot()}resetFromJSON(t){this.setBoard(a(t,"board",void 0)),this.setWildcard(a(t,"wildcard",void 0));var e=a(t,"dirMask",void 0);return void 0!==e&&this.setDirMask(e),this}boot(){}shutdown(){return this.board=void 0,this.symbols=void 0,this.dirMask=void 0,this}destroy(){return this.shutdown(),this}setBoard(t){return this.board=t,t&&this.clearSymbols(),this}setDirMask(t,e){if(h(t)){var i=t;for(t in i)this.dirMask[t]=i[t]}else this.dirMask[t]=e;return this}setDirectionMode(t){return this.board.grid.setDirectionMode(t),this}clearSymbols(){return this.refreshSymbols(null),this}setSymbol(t,e,i,r){var n,o=this.board;return o.contains(t,e)?(s(i)?(u.x=t,u.y=e,n=r?i.call(r,u,o):i(u,o)):n=i,this.symbols[this.tileXYToKey(t,e)]=n,this):this}getSymbol(t,e){return this.symbols[this.tileXYToKey(t,e)]}dumpSymobls(t,e){for(var i,s,r=this.board,n=(r.width,r.height,0),o=this.symbols.length;n<o;n++)s=this.symbols[n],i=this.keyToTileXY(n),e?t.call(e,i,s,r):t(i,s,r);return this}refreshSymbols(t,e){var i,r=this.board,n=r.width,o=r.height;if(this.symbols.length=n*o,s(t))for(var a,h=0,l=this.symbols.length;h<l;h++)a=this.keyToTileXY(h),i=e?t.call(e,a,r):t(a,r),this.symbols[h]=i;else{i=t;for(h=0,l=this.symbols.length;h<l;h++)this.symbols[h]=i}return this}setWildcard(t){return this.wildcard=t,this}tileXYToKey(t,e){return t+e*this.board.width}keyToTileXY(t,e){void 0===e&&(e=u);var i=this.board.width;return e.x=t%i,e.y=Math.floor(t/i),e}anyMatch(t){return this.match(t,null,null,!0)}}var u={x:0,y:0},c={match:r,matchAtDir:o};Object.assign(l.prototype,c);e.a=l},function(t,e,i){"use strict";var s=i(42),r=i(8),n=i(15),o={x:0,y:0,direction:null},a=[],h=function(t,e,i){var s=this.chessData.board;if(null==s)return!1;var r=this.chessData.tileXYZ,n=r.x,h=r.y,l=r.z;if(t===n&&e===h)return!0;if(!s.contains(t,e))return!1;if(void 0===i&&(i=this.chessData.getTileDirection(t,e)),this.occupiedTest&&s.contains(t,e,l))return!1;if(this.blockerTest&&s.hasBlocker(t,e))return!1;if(this.edgeBlockerTest){var u=this.TileXYToChessArray(n,h,a);if(u.length>1)for(var c=0,d=u.length;c<d;c++)if(u[c]!==this.gameObject&&s.hasEdgeBlocker(n,h,this.chessToTileXYZ(u[c]).z,i))return a.length=0,!1;a.length=0}if(this.moveableTestCallback){if(o.x=t,o.y=e,o.direction=i,this.moveableTestScope)var f=this.moveableTestCallback.call(this.moveableTestScope,r,o,s);else f=this.moveableTestCallback(r,o,s);if(!f)return!1}return!0};const l=Phaser.Utils.Objects.GetValue;var u={x:0,y:0},c=function(t,e,i){var s=this.chessData.board;if(null===s)return this.lastMoveResult=!1,this;if(null!=t&&"number"!=typeof t){var r=t;t=l(r,"x",void 0),e=l(r,"y",void 0),i=l(r,"direction",void 0)}var n=this.chessData.tileXYZ;if(void 0!==i&&null==t||null==e){var o=s.getNeighborTileXY(n,i);null!==o?(t=o.x,e=o.y):(t=null,e=null)}if(null==t||null==e)return this.lastMoveResult=!1,this;if(void 0===i&&(u.x=t,u.y=e,i=s.getNeighborTileDirection(n,u)),!this.canMoveTo(t,e,i))return this.lastMoveResult=!1,this;if(this.destinationTileX=t,this.destinationTileY=e,this.destinationDirection=i,s.wrapMode&&null!==i){var a=s.grid.getNeighborTileX(n.x,n.y,i),h=s.grid.getNeighborTileY(n.x,n.y,i);if(a===t&&h===e){var c=s.tileXYToWorldX(t,e),d=s.tileXYToWorldY(t,e);this.moveAlongLine(void 0,void 0,c,d)}else{var f=s.tileXYToWorldX(a,h),p=s.tileXYToWorldY(a,h),g=s.tileXYToWorldX(n.x,n.y),v=s.tileXYToWorldY(n.x,n.y),y=(g+f)/2,m=(v+p)/2;this.moveAlongLine(void 0,void 0,y,m);var b=s.getOppositeDirection(t,e,i);a=s.grid.getNeighborTileX(t,e,b),h=s.grid.getNeighborTileY(t,e,b),f=s.tileXYToWorldX(a,h),p=s.tileXYToWorldY(a,h),g=(f+(y=s.tileXYToWorldX(t,e)))/2,v=(p+(m=s.tileXYToWorldY(t,e)))/2,this.addMoveLine(g,v,y,m)}}else c=s.tileXYToWorldX(t,e),d=s.tileXYToWorldY(t,e),this.moveAlongLine(void 0,void 0,c,d);return s.moveChess(this.gameObject,t,e),this.isRunning=!0,this.lastMoveResult=!0,this},d=function(t){return this.moveTo(void 0,void 0,t),this},f=i(6);const p=Phaser.Utils.Array.Shuffle;var g=[],v=function(){var t=this.chessData.board;if(null===t)return this.lastMoveResult=!1,this;var e=t.grid.allDirections;g.length!==e.length&&Object(f.a)(e,g),p(g);for(var i=0,s=g.length;i<s;i++)if(this.moveToward(g[i]),this.lastMoveResult)return this;return this},y={x:0,y:0},m=[],b=function(t,e,i){var s=this.chessData.board;if(null===s)return this.lastMoveResult=!1,this;if("number"!=typeof t){var r=t;t=r.x,e=r.y}y.x=t,y.y=e,void 0===i&&(i=!0);var n,o,a=this.chessData.tileXYZ,h=s.grid.allDirections;if(m.length!==h.length+1){m.length=0;for(var l=0,u=h.length;l<u;l++)m.push({direction:l});m.push({direction:null})}for(l=0,u=m.length;l<u;l++){if(null===(o=(n=m[l]).direction))n.x=a.x,n.y=a.y;else if(null===s.getNeighborTileXY(a,o,n)){n.x=null,n.y=null,n.distance=null;continue}n.distance=s.getDistance(n,y,!0)}var c=this.destinationDirection;m.sort(function(t,e){return null===t.distance?1:null===e.distance?-1:t.distance>e.distance?i?-1:1:t.distance<e.distance?i?1:-1:t.direction===c?1:e.direction===c?-1:null===t.direction?1:null===e.direction?-1:0});for(l=0,u=m.length;l<u;l++){if(null===(n=m[l]).distance)return this;if(this.moveTo(n),this.lastMoveResult)return this}return this},x=function(t,e){return this.moveAway(t,e,!1),this};const w=Phaser.Utils.Objects.GetValue;class T extends r.a{constructor(t,e){super(t,e),this.gameObject=t,this.chessData=Object(n.a)(t),this.scene=t.scene,this.moveToTask=new s.a(t,O),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=w(t,"isRunning",!1),this.setEnable(w(t,"enable",!0)),this.timeScale=w(t,"timeScale",1),this.setSpeed(w(t,"speed",400)),this.setRotateToTarget(w(t,"rotateToTarget",!1)),this.setOccupiedTest(w(t,"occupiedTest",!1)),this.setBlockerTest(w(t,"blockerTest",!1)),this.setEdgeBlockerTest(w(t,"edgeBlockerTest",!1)),this.setMoveableTestCallback(w(t,"moveableTest",void 0),w(t,"moveableTestScope",void 0)),this.destinationTileX=w(t,"destinationTileX",null),this.destinationTileY=w(t,"destinationTileY",null),this.destinationDirection=w(t,"destinationDirection",null),this.lastMoveResult=w(t,"lastMoveResult",void 0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,occupiedTest:this.occupiedTest,blockerTest:this.blockerTest,edgeBlockerTest:this.edgeBlockerTest,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,rotateToTarget:this.rotateToTarget,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}boot(){super.boot(),this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){this.moveToTask.shutdown(),super.shutdown(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene.events.off("update",this.update,this)}set enable(t){this.moveToTask.setEnable(t)}get enable(){return this.moveToTask.enable}setEnable(t){return void 0==t&&(t=!0),this.enable=t,this}get timeScale(){return this.moveToTask.timeScale}set timeScale(t){this.moveToTask.timeScale=t}set speed(t){this.moveToTask.setSpeed(t)}get speed(){return this.moveToTask.speed}setSpeed(t){return this.speed=t,this}set rotateToTarget(t){this.moveToTask.setRotateToTarget(t)}get rotateToTarget(){return this.moveToTask.rotateToTarget}setRotateToTarget(t){return this.rotateToTarget=t,this}setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}setMoveableTestCallback(t,e){return this.moveableTestCallback=t,this.moveableTestScope=e,this}pause(){return this.isRunning=!1,this}resume(){return this.isRunning=!0,this}stop(){return this.isRunning=!1,this}moveAlongLine(t,e,i,s){return void 0!==t&&(this.gameObject.x=t),void 0!==e&&(this.gameObject.y=e),this.moveToTask.moveTo(i,s),this}addMoveLine(t,e,i,s){return this.moveToTask.hasOwnProperty("nextlines")||(this.moveToTask.nextlines=[]),this.moveToTask.nextlines.push([t,e,i,s]),this}moveNextLine(){var t=this.moveToTask.nextlines;return!!t&&(0!==t.length&&(this.moveAlongLine.apply(this,t[0]),t.length=0,!0))}update(t,e){if(!this.isRunning||!this.enable)return this;var i=this.moveToTask;return i.update(t,e),i.isRunning?this:(this.moveNextLine()||this.complete(),this)}}const O={tickingMode:0};var S={canMoveTo:h,moveTo:c,moveToward:d,moveToRandomNeighbor:v,moveAway:b,moveCloser:x};Object.assign(T.prototype,S);e.a=T},function(t,e,i){"use strict";var s=i(15),r={AREA_MODE:16,PATH_MODE:0,random:0,diagonal:1,straight:2,line:3,"A*":10,"A*-random":11,"A*-line":12,BLOCKER:null,INFINITY:void 0},n=i(9),o=function(t,e,i){return void 0===i&&(i=","),t+i+e},a=i(14);const h=Phaser.Math.Angle.Between,l=Phaser.Utils.Array.Shuffle;var u=class{constructor(){this.preNodes=[],this.manager=void 0}reset(t){this.manager=t,this.sn=void 0,this.key=void 0,this.x=void 0,this.y=void 0,this._px=void 0,this._py=void 0,this.cost=void 0,this.f=0,this.g=0,this.h=0,this.closerH=0,this.visited=!1,this.closed=!1,this.preNodes.length=0}destroy(){this.preNodes.length=0,this.manager=void 0}heuristic(t,e,i){if(null===e)return 0;var s,r=this.board.getDistance(t,this,!0)*this.pathFinder.weight;if(1===e&&void 0!==i){var n=t.angleTo(i)-this.angleTo(i);s=r+Object(a.a)(n)}else s=2===e?r+Math.random():r;return s}getNeighborNodes(){var t=this.board.getNeighborTileXY(this);this.pathFinder.shuffleNeighbors&&l(t);for(var e,i=[],s=0,r=t.length;s<r;s++)e=this.manager.getNode(t[s],!0),i.push(e);return i}getCost(t){return this.pathFinder.cacheCost?void 0===this.cost&&(this.cost=this.pathFinder.getCost(this,t)):this.cost=this.pathFinder.getCost(this,t),this.cost}angleTo(t){return h(this.worldX,this.wroldY,t.worldX,t.wroldY)}get pathFinder(){return this.manager.pathFinder}get board(){return this.manager.pathFinder.board}get worldX(){return void 0===this._px&&(this._px=this.board.tileXYToWroldX(this.x,this.y)),this._px}get wroldY(){return void 0===this._py&&(this._py=this.board.tileXYToWroldY(this.x,this.y)),this._py}},c=new n.a;var d=class{constructor(t){this.sn=0,this.pool=c,this.nodes={},this.pathFinder=t,this.closestNode=null}destroy(){return this.freeAllNodes(),this.pathFinder=null,this.pool=void 0,this}getNode(t,e,i){var s;switch(typeof t){case"number":s=o(t,e);break;case"string":s=t,i=e;break;default:var r=t;i=e,t=r.x,e=r.y,s=o(t,e)}if(void 0===i&&(i=!1),this.sn++,!this.nodes.hasOwnProperty(s)){if(!i)return null;var n=this.pool.pop();null===n&&(n=new u),n.reset(this),n.sn=this.sn,n.key=s,n.x=t,n.y=e,this.nodes[s]=n}return this.nodes[s]}freeAllNodes(){this.closestNode=null;var t,e=this.nodes,i=this.pool;for(var s in e)(t=e[s]).destroy(),i.push(t),delete e[s];return this.sn=0,this}getAllNodes(){return this.nodes}};var f=class{constructor(t){this.content=[],this.scoreFunction=t}clear(){this.content.length=0}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}remove(t){var e=this.content.indexOf(t),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){for(var e=this.content[t];t>0;){var i=(t+1>>1)-1,s=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(s)))break;this.content[i]=e,this.content[t]=s,t=i}}bubbleUp(t){for(var e=this.content.length,i=this.content[t],s=this.scoreFunction(i);;){var r,n=t+1<<1,o=n-1,a=null;if(o<e){var h=this.content[o];(r=this.scoreFunction(h))<s&&(a=o)}if(n<e){var l=this.content[n];this.scoreFunction(l)<(null===a?s:r)&&(a=n)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=i,t=a}}};r.AREA_MODE;const p=r.PATH_MODE,g=r["A*"],v=r["A*-line"],y=r["A*-random"],m=r.BLOCKER,b=r.INFINITY;var x=new f(function(t){return t.f}),w=function(t,e,i,s){void 0===this.nodesManager&&(this.nodesManager=new d(this));var r=this.nodesManager;r.freeAllNodes();const n=s===p,o=this.pathMode===g||this.pathMode===v||this.pathMode===y,a=n&&o,h=n&&!o,l=a?this.pathMode==g?0:this.pathMode==v?1:this.pathMode==y?2:null:null;var u=null!==e?r.getNode(e.x,e.y,!0):null,c=r.getNode(t.x,t.y,!0);c.h=c.heuristic(u,l);var f=c,w=function(t,e){t.closerH=a?t.h:t.closerH||t.heuristic(u,l,e)};for(n&&w(f),x.push(c);x.size()>0;){var T=x.pop();if(a&&T===u)break;T.closed=!0;for(var O,S,_=T.getNeighborNodes(),C=0,P=_.length;C<P;++C)if(S=(O=_[C]).getCost(T),!O.closed&&S!==m){var k=T.g+S,M=O.visited;i!=b&&k>i||(!M||k<O.g?(O.visited=!0,O.preNodes.length=0,O.preNodes.push(T),O.h=O.h||O.heuristic(u,l,c),O.g=k,O.f=O.g+O.h,n&&(w(O,c),(O.closerH<f.closerH||O.closerH===f.closerH&&O.g<f.g)&&(f=O)),M?x.rescoreElement(O):x.push(O)):h&&k==O.g&&O.preNodes.push(T))}}return r.closestNode=n?f:null,x.clear(),this};const T=r.BLOCKER;var O=function(t,e){return this.occupiedTest&&this.board.contains(t.x,t.y,this.chessData.tileXYZ.z)?T:this.blockerTest&&this.board.hasBlocker(t.x,t.y)?T:(this.edgeBlockerTest,"number"==typeof this.costCallback?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,e,this):this.costCallback(t,e,this))};const S=r.AREA_MODE,_=r.INFINITY;var C=function(t,e){if(void 0===e&&(e=[]),null===this.board)return e;if(t!==_&&t<=0)return e;var i=this.chessData.tileXYZ,s=i.x,r=i.y;this.aStarSearch(i,null,t,S);var n,o=this.nodesManager.getAllNodes(),a=[];for(var h in o)(n=o[h]).x===s&&n.y===r||n.closed&&a.push(n);a.sort(function(t,e){var i=t.sn,s=e.sn;return i>s?1:i<s?-1:0});for(var l=0,u=a.length;l<u;l++)n=a[l],e.push({x:n.x,y:n.y,cost:n.g});return e};const P=Phaser.Math.Between,k=r.random,M=r.diagonal,R=r.straight,E=r.line,j=r["A*"],D=r["A*-line"],I=r["A*-random"];var A=function(t,e,i){for(var s,r,n,o,h,l=t.board,u=e,c=[];u.preNodes.length>0;)switch(c.push(u),h=u.preNodes.length,i){case j:case D:case I:u=o=u.preNodes[0];break;case k:u=o=1===h?u.preNodes[0]:u.preNodes[P(0,h-1)];break;case M:for(var d=0;d<h;d++)if(o=u.preNodes[d],(r=l.getNeighborTileDirection(u,o))!==s){s=r;break}u=o;break;case R:for(d=0;d<h&&(o=u.preNodes[d],(r=l.getNeighborTileDirection(u,o))!==s);d++);s=r,u=o;break;case E:if(void 0===n&&(n=e.angleTo(t)),1===h)u=o=u.preNodes[0],n=e.angleTo(u);else{o=u.preNodes[0];var f,p=Object(a.a)(e.angleTo(o)-n);for(d=1;d<h;d++)f=u.preNodes[d],Object(a.a)(e.angleTo(f)-n)<p&&(o=f);u=o}}return c.reverse()},L=function(t,e){if(void 0===e&&(e=[]),void 0===this.board)return e;var i=this.nodesManager;if(void 0===i)return e;var s=i.getNode(this.chessData.tileXYZ,!1),r=i.getNode(t,!1);if(null===s||null===r)return e;for(var n,o=A(s,r,this.pathMode),a=0,h=o.length;a<h;a++)n=o[a],e.push({x:n.x,y:n.y,cost:n.g});return e};const Y=r.PATH_MODE,F=r.INFINITY;var N=function(t,e,i,s){if(void 0===i&&(i=!0),void 0===s&&(s=[]),null===this.board)return s;if(e!==F&&e<=0)return s;var r=this.chessData.tileXYZ;this.aStarSearch(r,t,e,Y);var n=this.nodesManager,o=i?n.closestNode:n.getNode(t);return null===o?s:this.getPath(o,s)},X=function(t,e,i){if(void 0===this.nodesManager)return null;var s=this.nodesManager.getNode(t,e);return null===s?null:(void 0===i&&(i=!0),i?s.g:s.cost)};const U=Phaser.Utils.Objects.GetValue,B=r.BLOCKER,W=r.INFINITY;class V{constructor(t,e){this.gameObject=t,this.chessData=Object(s.a)(t),this.nodesManager=void 0,this.resetFromJSON(e)}resetFromJSON(t){var e=U(t,"costCallback",void 0),i=U(t,"costCallbackScope",void 0);return void 0===e&&(e=U(t,"cost",1)),this.setOccupiedTest(U(t,"occupiedTest",!1)),this.setBlockerTest(U(t,"blockerTest",!1)),this.setEdgeBlockerTest(U(t,"edgeBlockerTest",!1)),this.setCostFunction(e,i),this.setPathMode(U(t,"pathMode",0)),this.setCacheCostMode(U(t,"cacheCost",!0)),this.setWeight(U(t,"weight",10)),this.setShuffleNeighborsMode(U(t,"shuffleNeighbors",!1)),this}boot(){this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){return void 0!==this.nodesManager&&this.nodesManager.destroy(),this.gameObject=void 0,this.chessData=void 0,this}destroy(){return this.shutdown(),this}setCostFunction(t,e){return this.costCallback=t,this.costCallbackScope=e,this}setPathMode(t){return"string"==typeof t&&(t=r[t]),this.pathMode=t,this}setCacheCostMode(t){return void 0===t&&(t=!0),this.cacheCost=t,this}setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}setWeight(t){return this.weight=t,this}setShuffleNeighborsMode(t){return void 0===t&&(t=!0),this.shuffleNeighbors=t,this}get BLOCKER(){return B}get INFINITY(){return W}get board(){return this.chessData.board}}var G={aStarSearch:w,getCost:O,findArea:C,getPath:L,findPath:N,tileXYToCost:X};Object.assign(V.prototype,G);e.a=V},function(t,e,i){"use strict";var s=i(15),r=i(64);var n=function(t){for(var e,i=1/0,s=1/0,r=0,n=t.length;r<n;r++)e=t[r],i=Math.min(i,e.x),s=Math.min(s,e.y);if(0===i&&0===s)return t;for(r=0,n=t.length;r<n;r++)(e=t[r]).x-=i,e.y-=s;return t};e.a=class extends Phaser.GameObjects.Polygon{constructor(t,e,i,o,a,h,l){void 0===l&&(l=!0);var u,c=Object(r.a)(t);c&&(t=(u=t).board);var d,f,p=t.scene;l?(d=0,f=0):(d=e,f=i);var g=t.getGridPoints(void 0,void 0,!0);n(g),super(p,d,f,g,a,h),l?c?u.addChess(this,e,i,o):t.addChess(this,e,i,o,!0):Object(s.a)(this)}}},function(t,e,i){t.exports=i(29).PassThrough},function(t,e,i){t.exports=i(29).Transform},function(t,e,i){t.exports=i(10)},function(t,e,i){t.exports=i(28)},function(t,e,i){"use strict";t.exports=n;var s=i(35),r=i(16);function n(t){if(!(this instanceof n))return new n(t);s.call(this,t)}r.inherits=i(12),r.inherits(n,s),n.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var s=!1;return function(){if(!s){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),s=!0}return t.apply(this,arguments)}}}).call(this,i(11))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var s,r,n,o,a,h=1,l={},u=!1,c=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?s=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((n=new MessageChannel).port1.onmessage=function(t){p(t.data)},s=function(t){n.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,s=function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):s=function(t){setTimeout(p,0,t)}:(o="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&p(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),s=function(e){t.postMessage(o+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return l[h]=r,s(h),h++},d.clearImmediate=f}function f(t){delete l[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,s=t.args;switch(s.length){case 0:e();break;case 1:e(s[0]);break;case 2:e(s[0],s[1]);break;case 3:e(s[0],s[1],s[2]);break;default:e.apply(i,s)}}(e)}finally{f(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(11),i(22))},function(t,e,i){(function(t){var s=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(75),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(11))},function(t,e){},function(t,e,i){"use strict";var s=i(20).Buffer,r=i(77);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var e,i,r,n=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,i=n,r=a,e.copy(i,r),a+=o.data.length,o=o.next;return n},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e){e.read=function(t,e,i,s,r){var n,o,a=8*r-s-1,h=(1<<a)-1,l=h>>1,u=-7,c=i?r-1:0,d=i?-1:1,f=t[e+c];for(c+=d,n=f&(1<<-u)-1,f>>=-u,u+=a;u>0;n=256*n+t[e+c],c+=d,u-=8);for(o=n&(1<<-u)-1,n>>=-u,u+=s;u>0;o=256*o+t[e+c],c+=d,u-=8);if(0===n)n=1-l;else{if(n===h)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,s),n-=l}return(f?-1:1)*o*Math.pow(2,n-s)},e.write=function(t,e,i,s,r,n){var o,a,h,l=8*n-r-1,u=(1<<l)-1,c=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=s?0:n-1,p=s?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+c>=1?d/h:d*Math.pow(2,1-c))*h>=2&&(o++,h/=2),o+c>=u?(a=0,o=u):o+c>=1?(a=(e*h-1)*Math.pow(2,r),o+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,r),o=0));r>=8;t[i+f]=255&a,f+=p,a/=256,r-=8);for(o=o<<r|a,l+=r;l>0;t[i+f]=255&o,f+=p,o/=256,l-=8);t[i+f-p]|=128*g}},function(t,e,i){"use strict";e.byteLength=function(t){return 3*t.length/4-l(t)},e.toByteArray=function(t){var e,i,s,o,a,h=t.length;o=l(t),a=new n(3*h/4-o),i=o>0?h-4:h;var u=0;for(e=0;e<i;e+=4)s=r[t.charCodeAt(e)]<<18|r[t.charCodeAt(e+1)]<<12|r[t.charCodeAt(e+2)]<<6|r[t.charCodeAt(e+3)],a[u++]=s>>16&255,a[u++]=s>>8&255,a[u++]=255&s;2===o?(s=r[t.charCodeAt(e)]<<2|r[t.charCodeAt(e+1)]>>4,a[u++]=255&s):1===o&&(s=r[t.charCodeAt(e)]<<10|r[t.charCodeAt(e+1)]<<4|r[t.charCodeAt(e+2)]>>2,a[u++]=s>>8&255,a[u++]=255&s);return a},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,n="",o=[],a=0,h=i-r;a<h;a+=16383)o.push(u(t,a,a+16383>h?h:a+16383));1===r?(e=t[i-1],n+=s[e>>2],n+=s[e<<4&63],n+="=="):2===r&&(e=(t[i-2]<<8)+t[i-1],n+=s[e>>10],n+=s[e>>4&63],n+=s[e<<2&63],n+="=");return o.push(n),o.join("")};for(var s=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,h=o.length;a<h;++a)s[a]=o[a],r[o.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function u(t,e,i){for(var r,n,o=[],a=e;a<i;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(s[(n=r)>>18&63]+s[n>>12&63]+s[n>>6&63]+s[63&n]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){t.exports=r;var s=i(30).EventEmitter;function r(){s.call(this)}i(12)(r,s),r.Readable=i(29),r.Writable=i(72),r.Duplex=i(71),r.Transform=i(70),r.PassThrough=i(69),r.Stream=r,r.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function n(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",n),t._isStdio||e&&!1===e.end||(i.on("end",a),i.on("close",h));var o=!1;function a(){o||(o=!0,t.end())}function h(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(u(),0===s.listenerCount(this,"error"))throw t}function u(){i.removeListener("data",r),t.removeListener("drain",n),i.removeListener("end",a),i.removeListener("close",h),i.removeListener("error",l),t.removeListener("error",l),i.removeListener("end",u),i.removeListener("close",u),t.removeListener("close",u)}return i.on("error",l),t.on("error",l),i.on("end",u),i.on("close",u),t.on("close",u),t.emit("pipe",i),t}},function(t,e){t.exports=function(t,e){var i=e.strokeColor,s=e.strokeAlpha,r=(16711680&i)>>>16,n=(65280&i)>>>8,o=255&i;t.strokeStyle="rgba("+r+","+n+","+o+","+s+")",t.lineWidth=e.lineWidth}},function(t,e){t.exports=function(t,e,i){var s=i||e.fillColor,r=e.fillAlpha,n=(16711680&s)>>>16,o=(65280&s)>>>8,a=255&s;t.fillStyle="rgba("+n+","+o+","+a+","+r+")"}},function(t,e){const i=Phaser.Renderer.WebGL.Utils;t.exports=function(t,e,s,r,n){var o=t.strokeTint,a=i.getTintAppendFloatAlphaAndSwap(e.strokeColor,e.strokeAlpha*s);o.TL=a,o.TR=a,o.BL=a,o.BR=a;var h=e.pathData,l=h.length-1,u=e.lineWidth,c=u/2,d=h[0]-r,f=h[1]-n;e.closePath||(l-=2);for(var p=2;p<l;p+=2){var g=h[p]-r,v=h[p+1]-n;t.setTexture2D(),t.batchLine(d,f,g,v,c,c,u,p-2,!!e.closePath&&p===l-1),d=g,f=v}}},function(t,e){const i=Phaser.Renderer.WebGL.Utils;t.exports=function(t,e,s,r,n,o){for(var a=i.getTintAppendFloatAlphaAndSwap(s.fillColor,s.fillAlpha*r),h=s.pathData,l=s.pathIndexes,u=0;u<l.length;u+=3){var c=2*l[u],d=2*l[u+1],f=2*l[u+2],p=h[c+0]-n,g=h[c+1]-o,v=h[d+0]-n,y=h[d+1]-o,m=h[f+0]-n,b=h[f+1]-o,x=e.getX(p,g),w=e.getY(p,g),T=e.getX(v,y),O=e.getY(v,y),S=e.getX(m,b),_=e.getY(m,b);t.setTexture2D(),t.batchTri(x,w,T,O,S,_,0,0,1,1,a,a,a,t.tintEffect)}}},function(t,e,i){"use strict";function s(t,e,i){i=i||2;var s,a,h,l,u,f,g,v=e&&e.length,y=v?e[0]*i:t.length,m=r(t,0,y,i,!0),b=[];if(!m)return b;if(v&&(m=function(t,e,i,s){var o,a,h,l,u,f=[];for(o=0,a=e.length;o<a;o++)h=e[o]*s,l=o<a-1?e[o+1]*s:t.length,(u=r(t,h,l,s,!1))===u.next&&(u.steiner=!0),f.push(p(u));for(f.sort(c),o=0;o<f.length;o++)d(f[o],i),i=n(i,i.next);return i}(t,e,m,i)),t.length>80*i){s=h=t[0],a=l=t[1];for(var x=i;x<y;x+=i)u=t[x],f=t[x+1],u<s&&(s=u),f<a&&(a=f),u>h&&(h=u),f>l&&(l=f);g=Math.max(h-s,l-a)}return o(m,b,i,s,a,g),b}function r(t,e,i,s,r){var n,o;if(r===_(t,e,i,s)>0)for(n=e;n<i;n+=s)o=T(n,t[n],t[n+1],o);else for(n=i-s;n>=e;n-=s)o=T(n,t[n],t[n+1],o);return o&&m(o,o.next)&&(O(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!m(s,s.next)&&0!==y(s.prev,s,s.next))s=s.next;else{if(O(s),(s=e=s.prev)===s.next)return null;i=!0}}while(i||s!==e);return e}function o(t,e,i,s,r,c,d){if(t){!d&&c&&function(t,e,i,s){var r=t;do{null===r.z&&(r.z=f(r.x,r.y,e,i,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,s,r,n,o,a,h,l=1;do{for(i=t,t=null,n=null,o=0;i;){for(o++,s=i,a=0,e=0;e<l&&(a++,s=s.nextZ);e++);for(h=l;a>0||h>0&&s;)0!==a&&(0===h||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,h--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;i=s}n.nextZ=null,l*=2}while(o>1)}(r)}(t,s,r,c);for(var p,g,v=t;t.prev!==t.next;)if(p=t.prev,g=t.next,c?h(t,s,r,c):a(t))e.push(p.i/i),e.push(t.i/i),e.push(g.i/i),O(t),t=g.next,v=g.next;else if((t=g)===v){d?1===d?o(t=l(t,e,i),e,i,s,r,c,2):2===d&&u(t,e,i,s,r,c):o(n(t),e,i,s,r,c,1);break}}}function a(t){var e=t.prev,i=t,s=t.next;if(y(e,i,s)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(g(e.x,e.y,i.x,i.y,s.x,s.y,r.x,r.y)&&y(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,s){var r=t.prev,n=t,o=t.next;if(y(r,n,o)>=0)return!1;for(var a=r.x<n.x?r.x<o.x?r.x:o.x:n.x<o.x?n.x:o.x,h=r.y<n.y?r.y<o.y?r.y:o.y:n.y<o.y?n.y:o.y,l=r.x>n.x?r.x>o.x?r.x:o.x:n.x>o.x?n.x:o.x,u=r.y>n.y?r.y>o.y?r.y:o.y:n.y>o.y?n.y:o.y,c=f(a,h,e,i,s),d=f(l,u,e,i,s),p=t.nextZ;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(r.x,r.y,n.x,n.y,o.x,o.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&g(r.x,r.y,n.x,n.y,o.x,o.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function l(t,e,i){var s=t;do{var r=s.prev,n=s.next.next;!m(r,n)&&b(r,s,s.next,n)&&x(r,n)&&x(n,r)&&(e.push(r.i/i),e.push(s.i/i),e.push(n.i/i),O(s),O(s.next),s=t=n),s=s.next}while(s!==t);return s}function u(t,e,i,s,r,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&v(h,l)){var u=w(h,l);return h=n(h,h.next),u=n(u,u.next),o(h,e,i,s,r,a),void o(u,e,i,s,r,a)}l=l.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,s=e,r=t.x,n=t.y,o=-1/0;do{if(n<=s.y&&n>=s.next.y&&s.next.y!==s.y){var a=s.x+(n-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(a<=r&&a>o){if(o=a,a===r){if(n===s.y)return s;if(n===s.next.y)return s.next}i=s.x<s.next.x?s:s.next}}s=s.next}while(s!==e);if(!i)return null;if(r===o)return i.prev;var h,l=i,u=i.x,c=i.y,d=1/0;s=i.next;for(;s!==l;)r>=s.x&&s.x>=u&&r!==s.x&&g(n<c?r:o,n,u,c,n<c?o:r,n,s.x,s.y)&&((h=Math.abs(n-s.y)/(r-s.x))<d||h===d&&s.x>i.x)&&x(s,t)&&(i=s,d=h),s=s.next;return i}(t,e)){var i=w(e,t);n(i,i.next)}}function f(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)/r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,s,r,n,o,a){return(r-o)*(e-a)-(t-o)*(n-a)>=0&&(t-o)*(s-a)-(i-o)*(e-a)>=0&&(i-o)*(n-a)-(r-o)*(s-a)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var i=t,s=!1,r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,s){return!!(m(t,e)&&m(i,s)||m(t,s)&&m(i,e))||y(t,e,i)>0!=y(t,e,s)>0&&y(i,s,t)>0!=y(i,s,e)>0}function x(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function w(t,e){var i=new S(t.i,t.x,t.y),s=new S(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,s.next=i,i.prev=s,n.next=s,s.prev=n,s}function T(t,e,i,s){var r=new S(t,e,i);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _(t,e,i,s){for(var r=0,n=e,o=i-s;n<i;n+=s)r+=(t[o]-t[n])*(t[n+1]+t[o+1]),o=n;return r}t.exports=s,s.deviation=function(t,e,i,s){var r=e&&e.length,n=r?e[0]*i:t.length,o=Math.abs(_(t,0,n,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;o-=Math.abs(_(t,l,u,i))}var c=0;for(a=0;a<s.length;a+=3){var d=s[a]*i,f=s[a+1]*i,p=s[a+2]*i;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},s.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,r=0;r<t.length;r++){for(var n=0;n<t[r].length;n++)for(var o=0;o<e;o++)i.vertices.push(t[r][n][o]);r>0&&(s+=t[r-1].length,i.holes.push(s))}return i}},function(t,e,i){"use strict";const s=Phaser.Utils.Objects.GetValue,r=Phaser.Input.Keyboard.Key,n=Phaser.Math.Distance.Between,o=Phaser.Math.Angle.Between,a=Phaser.Math.RadToDeg;Phaser.Math.Wrap;const h={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var l=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){void 0==this.start&&(this.start={}),void 0==this.end&&(this.end={}),this.noKeyDown=s(t,"noKeyDown",!0),void 0==this.cursorKeys&&(this.cursorKeys={up:new r,down:new r,left:new r,right:new r}),this.setEnable(s(t,"enable",!0)),this.setMode(s(t,"dir","8dir")),this.setDistanceThreshold(s(t,"forceMin",16));var e=s(t,"start.x",null),i=s(t,"start.y",null),n=s(t,"end.x",null),o=s(t,"end.y",null);return this.setVector(e,i,n,o),this}toJSON(){return{enable:this.enable,dir:this.dirMode,forceMin:this.forceMin,noKeyDown:this.noKeyDown,start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}}}setMode(t){return"string"==typeof t&&(t=h[t]),this.dirMode=t,this}setEnable(t){(t=void 0==t||!!t)!==this.enable&&(!1===t&&this.cleanVector(),this.enable=t)}setDistanceThreshold(t){return t<0&&(t=0),this.forceMin=t,this}createCursorKeys(){return this.cursorKeys}setKeyState(t,e){var i=this.cursorKeys[t];if(i.enabled){var s=!e;i.isDown=e,i.isUp=s,e&&(this.noKeyDown=!1)}}getKeyState(t){return this.cursorKeys[t]}cleanVector(){for(var t in this.start.x=0,this.start.y=0,this.end.x=0,this.end.y=0,this.noKeyDown=!0,this.cursorKeys)this.setKeyState(t,!1);return this}setVector(t,e,i,s){if(this.cleanVector(),!this.enable)return this;if(null===t)return this;if(this.start.x=t,this.start.y=e,this.end.x=i,this.end.y=s,this.force<this.forceMin)return this;var r=(this.angle+360)%360;switch(this.dirMode){case 0:var n=r<180?"down":"up";this.setKeyState(n,!0);break;case 1:n=r>90&&r<=270?"left":"right",this.setKeyState(n,!0);break;case 2:n=r>45&&r<=135?"down":r>135&&r<=225?"left":r>225&&r<=315?"up":"right",this.setKeyState(n,!0);break;case 3:r>22.5&&r<=67.5?(this.setKeyState("down",!0),this.setKeyState("right",!0)):r>67.5&&r<=112.5?this.setKeyState("down",!0):r>112.5&&r<=157.5?(this.setKeyState("down",!0),this.setKeyState("left",!0)):r>157.5&&r<=202.5?this.setKeyState("left",!0):r>202.5&&r<=247.5?(this.setKeyState("left",!0),this.setKeyState("up",!0)):r>247.5&&r<=292.5?this.setKeyState("up",!0):r>292.5&&r<=337.5?(this.setKeyState("up",!0),this.setKeyState("right",!0)):this.setKeyState("right",!0)}return this}get forceX(){return this.end.x-this.start.x}get forceY(){return this.end.y-this.start.y}get force(){return n(this.start.x,this.start.y,this.end.x,this.end.y)}get rotation(){return o(this.start.x,this.start.y,this.end.x,this.end.y)}get angle(){return a(this.rotation)}get octant(){var t=0;return this.rightKeyDown?t=this.downKeyDown?45:0:this.downKeyDown?t=this.leftKeyDown?135:90:this.leftKeyDown?t=this.upKeyDown?225:180:this.upKeyDown&&(t=this.rightKeyDown?315:270),t}get upKeyDown(){return this.cursorKeys.up.isDown}get downKeyDown(){return this.cursorKeys.down.isDown}get leftKeyDown(){return this.cursorKeys.left.isDown}get rightKeyDown(){return this.cursorKeys.right.isDown}get anyKeyDown(){return!this.noKeyDown}};const u=Phaser.Events.EventEmitter,c=Phaser.Utils.Objects.GetValue,d=Phaser.Geom.Circle,f=Phaser.Geom.Circle.Contains;var p=class extends l{constructor(t,e){super(e),this.events=new u,this.scene=t.scene,this.gameObject=t,this.radius=c(e,"radius",100),t.setInteractive(new d(t.displayOriginX,t.displayOriginY,this.radius),f),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.pointer=void 0,this}toJSON(){var t=super.toJSON();return t.radius=this.radius,t}boot(){this.gameObject.on("pointerdown",this.onKeyDownStart,this),this.gameObject.on("pointerover",this.onKeyDownStart,this),this.scene.input.on("pointermove",this.onKeyDown,this),this.scene.input.on("pointerup",this.onKeyUp,this),this.gameObject.on("destroy",this.destroy,this)}shutdown(){this.scene.input.off("pointermove",this.onKeyDown,this),this.scene.input.off("pointerup",this.onKeyUp,this),this.events.destroy(),this.pointer=void 0,this.scene=void 0,this.gameObject=void 0,this.events=void 0}destroy(){this.shutdown()}onKeyDownStart(t){t.isDown&&void 0===this.pointer&&(this.pointer=t,this.onKeyDown(t))}onKeyDown(t){if(this.pointer===t){var e=this.gameObject,i=t;this.setVector(e.x,e.y,i.x,i.y),this.events.emit("update")}}onKeyUp(t){this.pointer===t&&(this.pointer=void 0,this.cleanVector(),this.events.emit("update"))}on(){var t=this.events;return t.on.apply(t,arguments),this}once(){var t=this.events;return t.once.apply(t,arguments),this}};e.a=p},function(t,e,i){"use strict";var s=function(t,e){var i;return-1==(i=e).indexOf("==")&&-1==i.indexOf("!=")&&-1==i.indexOf(">=")&&-1==i.indexOf("<=")&&-1==i.indexOf(">")&&-1==i.indexOf("<")&&(isNaN(e)&&(e="'"+e+"'"),e="==("+e+")"),"(values['"+t+"']"+e+")"};e.a=function(t,e){for(var i=[],r=0,n=t.length;r<n;r++)""!==e[r]&&null!=e[r]&&i.push(s(t[r],e[r]));var o=i.length>0?i.join("&&"):"false";return new Function("values","return "+o)}},function(t,e,i){"use strict";var s={cascadeMode:!1,setParent:function(t){return this.gameObject=t,this.scene=t.scene,this},setCascadeMode:function(t){return this.cascadeMode=t,this},bodySetVelocity(t,e){var i=this.gameObject.body,s=i.velocity.x,r=i.velocity.y;this.cascaseMode&&(t+=s,e+=r),t===s&&e===r||i.setVelocity(t,e)},bodySetAcceleration(t,e){var i=this.gameObject.body,s=i.acceleration.x,r=i.acceleration.y;this.cascaseMode&&(t+=s,e+=r),t===s&&e===r||i.setAcceleration(t,e)},bodySetGravity(t,e){var i=this.gameObject.body,s=i.gravity.x,r=i.gravity.y;this.cascaseMode&&(t+=s,e+=r),t===s&&e===r||i.setAcceleration(t,e)},bodySetAngularVelocity(t){var e=this.gameObject.body,i=e.angularVelocity;this.cascaseMode&&(t+=i),t!==i&&e.setAngularVelocity(t)},bodySetAngularAcceleration(t){var e=this.gameObject.body,i=e.angularAcceleration;this.cascaseMode&&(t+=i),t!==i&&e.setAngularAcceleration(t)}};e.a=s},function(t,e,i){"use strict";const s=Phaser.Structs.Set;var r=class{constructor(t,e){this.setCompleteCallback(t,e),this.events=new s}shutdown(){return this.setCompleteCallback(void 0,void 0),this.events.clear(),this.event=void 0,this}destroy(){return this.shutdown(),this}setCompleteCallback(t,e){return this.completeCallback=t,this.scope=e,this}waitCallback(){var t=this,e=function(){t.remove(e)};return this.events.set(e),e}waitEvent(t,e){return t.once(e,this.waitCallback()),this}remove(t){return this.events.delete(t),0===this.events.size&&(this.scope?this.completeCallback.call(this.scope):this.completeCallback()),this}};e.a=r},function(t,e,i){"use strict";var s=i(2),r=i(34);var n=class extends r.a{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t;return this.parent.dragState.isDown&&(t="DRAG"),t}update_IDLE(t,e){this.next()}next_DRAG(){var t,e=this.parent;return e.dragState.isUp&&(t=e.outOfBounds?"BACK":e.slidingEnable?"SLIDE":"IDLE"),t}update_DRAG(t,e){var i=this.parent;i.dragState.justMoved&&i.dragging(),this.next()}next_SLIDE(){var t,e=this.parent;return e.dragState.isDown?t="DRAG":e.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,e){this.parent.sliding(t,e),this.next()}next_BACK(){var t,e=this.parent;return e.dragState.isDown?t="DRAG":e.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,e){this.parent.pullBack(t,e),this.next()}},o=i(59);const a=Phaser.Utils.Objects.GetValue;var h=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(a(t,"value",0)),this.setSpeed(a(t,"speed",0)),this.setAcceleration(a(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return 0!==this.acceleration&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}};var l=class{constructor(){this.value,this.dir,this.movement=new h}init(t,e,i,s,r){return this.value=t,this.end=r,this.dir=void 0!==r?t<r:e,this.movement.setSpeed(i).setAcceleration(-s),this}stop(){this.movement.reset()}update(t){var e=this.movement.getDeltaValue(t);return this.dir||(e=-e),void 0===this.end?this.value+=e:0===e?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}};const u=Phaser.Events.EventEmitter,c=Phaser.Utils.Objects.GetValue;const d={horizontal:1,h:1,x:1,vertical:2,v:2,y:2};var f=class extends u{constructor(t,e){super(),this.gameObject=t,this.scene=Object(s.a)(t);var i=c(e,"enable",!0),r={enable:i};this._state=new n(this,r);var a={inputConfig:c(e,"inputConfig",void 0),enable:i};this.dragState=new o.a(t,a),this._value=void 0,this._slowDown=new l;var h=c(e,"valuechangeCallback",null);if(null!==h){var u=c(e,"valuechangeCallbackScope",void 0);this.on("valuechange",h,u)}null!==(h=c(e,"overmaxCallback",null))&&(u=c(e,"overmaxCallbackScope",void 0),this.on("overmax",h,u)),null!==(h=c(e,"overminCallback",null))&&(u=c(e,"overminCallbackScope",void 0),this.on("overmin",h,u)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setAxisMode(c(t,"axis",2)),this.setSlidingDeceleration(c(t,"slidingDeceleration",5e3)),this.setBackDeceleration(c(t,"backDeceleration",2e3));var e=c(t,"bounds",void 0);return e?this.setBounds(e):this.setBounds(c(t,"max",0),c(t,"min",0)),this.setValue(c(t,"value",this.maxValue||0)),this.setEnable(c(t,"enable",!0)),this}boot(){this.scene.events.on("update",this._state.update,this._state),this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.scene.events.off("update",this._state.update,this._state),this.gameObject=void 0,this.scene=void 0,this._state.destroy(),this.dragState.destroy()}destroy(){this.shutdown()}setAxisMode(t){return"string"==typeof t&&(t=d[t]),this.axisMode=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setBounds(t,e){if(Array.isArray(t)){var i=t;t=i[0],e=i[1]}return t<e?(this.minValue=t,this.maxValue=e):(this.minValue=e,this.maxValue=t),this}get value(){return this._value}set value(t){var e=this._value,i=this.overMax(t),s=this.overMin(t);i&&this.emit("overmax",t,e),s&&this.emit("overmin",t,e),this.backEnable||(i&&(t=this.maxValue),s&&(t=this.minValue)),t!==this._value&&(this._value=t,this.emit("valuechange",t,e))}setValue(t){this.value=t}setEnable(t){return this._state.setEnable(t),this.dragState.setEnable(t),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return null!=this.maxValue&&t>this.maxValue}overMin(t){return null!=this.minValue&&t<this.minValue}get backEnable(){return"number"==typeof this.backDeceleration}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return"number"==typeof this.slidingDeceleration}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return 2===this.axisMode?this.dragState.dy:1===this.axisMode?this.dragState.dx:0}get dragSpeed(){return 2===this.axisMode?this.dragState.speedY:1===this.axisMode?this.dragState.speedX:0}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,e=this.dragSpeed;if(0===e)return this._slowDown.stop(),void this._state.next();var i=this.slidingDeceleration;this._slowDown.init(t,e>0,Math.abs(e),i)}sliding(t,e){e*=.001;var i=this._slowDown.update(e).value;this.overMax(i)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(i)?(this.value=this.minValue,this._slowDown.stop()):this.value=i}onPullBack(){var t=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,i=Math.abs(e-t),s=this.backDeceleration,r=Math.sqrt(2*s*i);this._slowDown.init(t,void 0,r,s,e)}pullBack(t,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}};e.a=f},function(t,e,i){"use strict";var s=i(63),r={alpha:{}};e.a=function(t,e){r.mode=1,r.alpha.start=t.alpha,r.alpha.end=0,r.duration=e;var i=new s.a(t,r);return i.start(),i}},function(t,e,i){"use strict";i.r(e);var s=i(33);const r=Phaser.Utils.Objects.GetValue,n=Phaser.GameObjects.BuildGameObject;Phaser.GameObjects.GameObjectFactory.register("rexGridTable",function(t,e,i,r,n){var o=new s.a(this.scene,t,e,i,r,n);return this.displayList.add(o),o}),Phaser.GameObjects.GameObjectCreator.register("rexGridTable",function(t){var e=r(t,"width",256),i=r(t,"height",256),o=new s.a(this.scene,0,0,e,i,t);return o.syncChildrenEnable=!1,n(this.scene,o,t),o.syncChildrenEnable=!0,o.syncPosition().syncVisible().syncAlpha(),o}),e.default=s.a},function(t,e,i){"use strict";var s=i(61),r=i(3);const n=Phaser.Display.Align.In.QuickSet,o=Phaser.Utils.Objects.GetFastValue;var a=new(0,Phaser.GameObjects.Zone)({sys:{queueDepthSort:r.a,events:{once:r.a}}},0,0,1,1),h=new s.a,l=function(t,e){void 0===e&&(e={});var i=o(e,"width",-1),s=o(e,"height",-1),r=o(e,"cellWidth",1),l=o(e,"cellHeight",r),u=o(e,"staggeraxis",1),c=o(e,"staggerindex",1),d=o(e,"position",Phaser.Display.Align.CENTER),f=o(e,"x",0),p=o(e,"y",0);h.setOriginPosition(f,p).setCellSize(r,l).setType(u,c),a.setSize(r,l);for(var g=s-1,v=i-1,y=0,m=0,b=0,x=t.length;b<x;b++)if(a.x=h.getWorldX(m,y),a.y=h.getWorldY(m,y),n(t[b],a,d),-1===i)y++;else if(-1===s)m++;else if(m===v){if(y===g)break;m=0,y++}else m++;return t},u=i(60);const c=Phaser.Display.Align.In.QuickSet,d=Phaser.Utils.Objects.GetFastValue;var f=new(0,Phaser.GameObjects.Zone)({sys:{queueDepthSort:r.a,events:{once:r.a}}},0,0,1,1),p=new u.a,g=function(t,e){void 0===e&&(e={});var i=d(e,"width",-1),s=d(e,"height",-1),r=d(e,"cellWidth",1),n=d(e,"cellHeight",r),o=d(e,"type",0),a=d(e,"position",Phaser.Display.Align.CENTER),h=d(e,"x",0),l=d(e,"y",0);p.setOriginPosition(h,l).setCellSize(r,n).setType(o),f.setSize(r,n);for(var u=s-1,g=i-1,v=0,y=0,m=0,b=t.length;m<b;m++)if(f.x=p.getWorldX(y,v),f.y=p.getWorldY(y,v),c(t[m],f,a),-1===i)v++;else if(-1===s)y++;else if(y===g){if(v===u)break;y=0,v++}else y++;return t};i.d(e,"a",function(){return l}),i.d(e,"b",function(){return g})},function(t,e,i){"use strict";var s=i(131),r=i.n(s);const n=Phaser.Loader.FILE_POPULATED;var o=class extends Phaser.Loader.File{constructor(t,e){super(t,e)}load(){if(this.state===n)this.loader.nextFile(this,!0);else{var t=this.config;t.active=this.onLoad.bind(this),t.inactive=this.onError.bind(this),t.fontactive=this.onFontActive.bind(this),t.fontinactive=this.onFontInactive.bind(this),r.a.load(t)}}onLoad(){this.loader.nextFile(this,!0)}onError(){this.loader.nextFile(this,!1)}onFontActive(t,e){this.loader.emit("webfontactive",this,t)}onFontInactive(t,e){this.loader.emit("webfontinactive",this,t)}};const a=Phaser.Utils.Objects.IsPlainObject;e.a=function(t,e){return a(t)?(e=t).hasOwnProperty("config")?(e.type="webfont",e.url=""):e={key:"webfont",type:"webfont",url:"",config:e}:e={type:"webfont",url:"",key:t,config:e},this.addFile(new o(this,e)),this}},function(t,e,i){"use strict";const s=Phaser.Loader.FILE_POPULATED;var r=class extends Phaser.Loader.File{constructor(t,e){super(t,e)}load(){if(this.state===s)this.loader.nextFile(this,!0);else{var t=this.config,e=t.callback,i=t.scope,r=this.onLoad.bind(this),n=this.onError.bind(this);e?i?e.call(i,r,n):e(r,n):this.onLoad()}}onLoad(){this.loader.nextFile(this,!0)}onError(){this.loader.nextFile(this,!1)}};const n=Phaser.Utils.Objects.IsPlainObject;e.a=function(t,e){return n(t)?(e=t).hasOwnProperty("config")?(e.type="await",e.url=""):e={key:"await",type:"await",url:"",config:e}:e={type:"await",url:"",key:t,config:e},this.addFile(new r(this,e)),this}},function(t,e,i){var s,r=function(){function t(t,e){if(!r[t]){r[t]={};for(var i=0;i<t.length;i++)r[t][t.charAt(i)]=i}return r[t][e]}var e=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={},n={compressToBase64:function(t){if(null==t)return"";var e=n._compress(t,6,function(t){return i.charAt(t)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:n._decompress(e.length,32,function(s){return t(i,e.charAt(s))})},compressToUTF16:function(t){return null==t?"":n._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:n._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(t){for(var e=n.compress(t),i=new Uint8Array(2*e.length),s=0,r=e.length;r>s;s++){var o=e.charCodeAt(s);i[2*s]=o>>>8,i[2*s+1]=o%256}return i},decompressFromUint8Array:function(t){if(null===t||void 0===t)return n.decompress(t);for(var i=new Array(t.length/2),s=0,r=i.length;r>s;s++)i[s]=256*t[2*s]+t[2*s+1];var o=[];return i.forEach(function(t){o.push(e(t))}),n.decompress(o.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":n._compress(t,6,function(t){return s.charAt(t)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),n._decompress(e.length,32,function(i){return t(s,e.charAt(i))}))},compress:function(t){return n._compress(t,16,function(t){return e(t)})},_compress:function(t,e,i){if(null==t)return"";var s,r,n,o={},a={},h="",l="",u="",c=2,d=3,f=2,p=[],g=0,v=0;for(n=0;n<t.length;n+=1)if(h=t.charAt(n),Object.prototype.hasOwnProperty.call(o,h)||(o[h]=d++,a[h]=!0),l=u+h,Object.prototype.hasOwnProperty.call(o,l))u=l;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(s=0;f>s;s++)g<<=1,v==e-1?(v=0,p.push(i(g)),g=0):v++;for(r=u.charCodeAt(0),s=0;8>s;s++)g=g<<1|1&r,v==e-1?(v=0,p.push(i(g)),g=0):v++,r>>=1}else{for(r=1,s=0;f>s;s++)g=g<<1|r,v==e-1?(v=0,p.push(i(g)),g=0):v++,r=0;for(r=u.charCodeAt(0),s=0;16>s;s++)g=g<<1|1&r,v==e-1?(v=0,p.push(i(g)),g=0):v++,r>>=1}0==--c&&(c=Math.pow(2,f),f++),delete a[u]}else for(r=o[u],s=0;f>s;s++)g=g<<1|1&r,v==e-1?(v=0,p.push(i(g)),g=0):v++,r>>=1;0==--c&&(c=Math.pow(2,f),f++),o[l]=d++,u=String(h)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(s=0;f>s;s++)g<<=1,v==e-1?(v=0,p.push(i(g)),g=0):v++;for(r=u.charCodeAt(0),s=0;8>s;s++)g=g<<1|1&r,v==e-1?(v=0,p.push(i(g)),g=0):v++,r>>=1}else{for(r=1,s=0;f>s;s++)g=g<<1|r,v==e-1?(v=0,p.push(i(g)),g=0):v++,r=0;for(r=u.charCodeAt(0),s=0;16>s;s++)g=g<<1|1&r,v==e-1?(v=0,p.push(i(g)),g=0):v++,r>>=1}0==--c&&(c=Math.pow(2,f),f++),delete a[u]}else for(r=o[u],s=0;f>s;s++)g=g<<1|1&r,v==e-1?(v=0,p.push(i(g)),g=0):v++,r>>=1;0==--c&&(c=Math.pow(2,f),f++)}for(r=2,s=0;f>s;s++)g=g<<1|1&r,v==e-1?(v=0,p.push(i(g)),g=0):v++,r>>=1;for(;;){if(g<<=1,v==e-1){p.push(i(g));break}v++}return p.join("")},decompress:function(t){return null==t?"":""==t?null:n._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(t,i,s){var r,n,o,a,h,l,u,c=[],d=4,f=4,p=3,g="",v=[],y={val:s(0),position:i,index:1};for(r=0;3>r;r+=1)c[r]=r;for(o=0,h=Math.pow(2,2),l=1;l!=h;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=s(y.index++)),o|=(a>0?1:0)*l,l<<=1;switch(o){case 0:for(o=0,h=Math.pow(2,8),l=1;l!=h;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=s(y.index++)),o|=(a>0?1:0)*l,l<<=1;u=e(o);break;case 1:for(o=0,h=Math.pow(2,16),l=1;l!=h;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=s(y.index++)),o|=(a>0?1:0)*l,l<<=1;u=e(o);break;case 2:return""}for(c[3]=u,n=u,v.push(u);;){if(y.index>t)return"";for(o=0,h=Math.pow(2,p),l=1;l!=h;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=s(y.index++)),o|=(a>0?1:0)*l,l<<=1;switch(u=o){case 0:for(o=0,h=Math.pow(2,8),l=1;l!=h;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=s(y.index++)),o|=(a>0?1:0)*l,l<<=1;c[f++]=e(o),u=f-1,d--;break;case 1:for(o=0,h=Math.pow(2,16),l=1;l!=h;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=s(y.index++)),o|=(a>0?1:0)*l,l<<=1;c[f++]=e(o),u=f-1,d--;break;case 2:return v.join("")}if(0==d&&(d=Math.pow(2,p),p++),c[u])g=c[u];else{if(u!==f)return null;g=n+n.charAt(0)}v.push(g),c[f++]=n+g.charAt(0),n=g,0==--d&&(d=Math.pow(2,p),p++)}}};return n}();void 0===(s=function(){return r}.call(e,i,e,t))||(t.exports=s)},function(t,e,i){"use strict";var s=i(100),r=i.n(s);const n=Phaser.Utils.Objects.GetFastValue;const o={none:0,base64:1,utf16:2,uri:3},a=["compress","compressToBase64","compressToUTF16","compressToEncodedURIComponent"],h=["decompress","decompressFromBase64","decompressFromUTF16","decompressFromEncodedURIComponent"];var l=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setEncoding(n(t,"encoding",0)),this}toJSON(){return{encoding:this.encoding}}setEncoding(t){return void 0===t?t=0:"string"==typeof t&&(t=o[t.toLowerCase()]||0),this.encoding=t,this}compress(t){var e=a[this.encoding];return r.a[e](t)}decompress(t){var e=h[this.encoding];return r.a[e](t)}};e.a=l},function(t,e,i){"use strict";var s=i(50),r=i(6);const n=Phaser.Utils.Objects.GetFastValue;var o=class{constructor(t,e){this.parent=t,this.scene=GetSceneObject(t),this.clock=new s.a(t),this.resetFromJSON(e),this.boot()}resetFromJSON(t){var e=n(t,"clock",void 0);return this.clock.resetFromJSON(e),this.commands=n(t,"commands",[]),this}toJSON(){return{clock:this.clock.toJSON(),commands:this.commands}}boot(){this.scene.events.on("destroy",this.destroy,this)}shutdown(){this.clock.shutdown(),this.parent=void 0,this.scene=void 0,this.commands=void 0}destroy(){this.shutdown()}start(t){return this.clock.start(t),this.clear(),this}pause(){return this.clock.pause(),this}resume(){return this.clock.resume(),this}stop(){return this.clock.stop(),this}seek(t){return this.clock.seek(t),this}get isRecording(){return this.clock.isRunning}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}get now(){return this.clock.now}addCommand(t,e){if(!this.isRecording)return this;void 0===e&&(e=0);var i=this.clock.now+e;return this.commands.push([i,t]),this}getCommands(t){return void 0===t&&(t=!1),t?this.commands:Object(r.a)(this.commands)}clear(){this.commands.length=0}},a=i(8),h=i(2),l=i(23),u=i(51);const c=Phaser.Utils.Objects.GetValue;var d=[];const f={ms:0,s:1,sec:1},p={abs:0,absolute:0,inc:1,increment:1};var g=class extends a.a{constructor(t,e){super(t,e),this.parent=t,this.scene=Object(h.a)(t),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=c(t,"isRunning",!1),this.state=c(t,"state",0),this.commands=c(t,"commands",[]),this.scope=c(t,"scope",void 0),this.setTimeUnit(c(t,"timeUnit",0)),this.setDtMode(c(t,"dtMode",0)),this.setTimeScale(c(t,"timeScale",1)),this.index=c(t,"index",0),this.nextDt=c(t,"nextDt",0),this.seek(c(t,"now",0)),this.timeScale=c(t,"timeScale",1),this}toJSON(){return{isRunning:this.isRunning,state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextDt:this.nextDt,now:this.now,timeScale:this.timeScale,tickingMode:this.tickingMode}}boot(){super.boot(),this.scene.events.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.parent=void 0,this.scene=void 0,this.commands=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene.events.off("update",this.update,this)}load(t,e,i){this.stop();var s=c(i,"timeUnit",void 0);void 0!==s&&this.setTimeUnit(s);var r=c(i,"dtMode",void 0);return void 0!==r&&this.setDtMode(r),t=t.filter(function(t){var e=t[0];return!isNaN(e)}).map(function(t){return"string"==typeof t[0]&&(t[0]=parseFloat(t[0])),t}),0===this.dtMode&&t.sort(function(t,e){var i=t[0],s=e[0];return i>s?1:i<s?-1:0}),this.commands=t,this.scope=e,this}start(t){return void 0===t&&(t=0),this.stop(),this.index=0,this.isRunning=!0,this.state=1,this.nextDt=this.getNextDt(0),this.seek(t),this}pause(){return this.isRunning=!1,this}resume(){return this.isRunning=!0,this}stop(){return this.isRunning=!1,this.state=0,this}seek(t){return this.now=t,this}get isPlaying(){return this.isRunning}get completed(){return 2===this.state}setTimeScale(t){this.timeScale=t}update(t,e){if(!this.isRunning)return this;if(0===this.timeScale||0===e)return this;if(this.now+=e*this.timeScale,this.nextDt>this.now)return this;for(;;){var i=this.commands[this.index],s=i[1];if("string"==typeof s&&(s=Object(l.a)(d,i,1)),Object(u.a)(s,this.scope),this.emit("runcommand",s,this.scope),this.index===this.commands.length-1)return this.complete(),this;if(this.index++,this.nextDt=this.getNextDt(this.nextDt),this.nextDt>this.now)return this}}complete(){super.complete(),this.state=2}getNextDt(t){var e=this.commands[this.index][0];return 1===this.timeUnit&&(e*=1e3),1===this.dtMode&&(e+=t),e}setDtMode(t){return"string"==typeof t&&(t=p[t]),this.dtMode=t,this}setTimeUnit(t){return"string"==typeof t&&(t=f[t]),this.timeUnit=t,this}};e.a={Recorder:o,Player:g}},function(t,e,i){"use strict";const s=Phaser.Utils.Objects.GetValue,r=Phaser.Utils.Objects.GetAdvancedValue;const n={stop:1,destroy:2};var o=class{constructor(t,e,i){this.sound=e,this.scene=t,this.volume={},this.tween=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setMode(s(t,"mode",0)),this.setVolumeRange(r(t,"volume.start",this.sound.volume),r(t,"volume.end",0)),this.setDelay(r(t,"delay",0)),this.setFadeOutTime(r(t,"duration",1e3)),this}toJSON(){return{mode:this.mode,volume:this.volume,delay:this.delay,duration:this.duration}}boot(){this.scene.events.on("destroy",this.destroy,this),this.sound.on&&this.sound.on("destroy",this.destroy,this)}shutdown(){this.stop(),this.sound=void 0,this.scene=void 0}destroy(){this.shutdown()}setMode(t){return"string"==typeof t&&(t=n[t]),this.mode=t,this}setVolumeRange(t,e){return this.volume.start=t,this.volume.end=e,this}setDelay(t){return this.delay=t,this}setFadeOutTime(t){return this.duration=t,this}start(){if(!this.tween){var t=this.volume;return this.tween=this.scene.tweens.add({targets:this.sound,volume:{getStart:function(){return t.start},getEnd:function(){return t.end}},delay:this.delay,duration:this.duration,ease:"Linear",onComplete:this.complete,onCompleteScope:this}),this}}stop(){if(this.tween)return this.tween.stop(),this.tween=void 0,this}complete(){switch(this.mode){case 1:this.sound.stop();break;case 2:this.sound.destroy()}}},a={volume:{}},h=function(t,e,i,s,r){var n;return void 0===s&&(s=1),void 0===r&&(r=0),a.mode=0,a.volume.start=r,a.volume.end=s,a.duration=i,"string"==typeof e&&(e=t.sound.add(e)),e.hasOwnProperty("_fade")?(n=e._fade).stop().resetFromJSON(a):(n=new o(t,e,a),e._fade=n),n.start(),e.isPlaying||e.setVolume(r).play(),e},l={volume:{}},u=function(t,e,i,s){var r;return void 0===s&&(s=!0),l.mode=s?2:1,l.volume.start=e.volume,l.volume.end=0,l.duration=i,e.hasOwnProperty("_fade")?(r=e._fade).stop().resetFromJSON(l):(r=new o(t,e,l),e._fade=r),r.start(),e.isPlaying||e.play(),e};e.a={fadeIn:h,fadeOut:u}},function(t,e,i){"use strict";var s=i(2);const r=Phaser.Utils.Objects.GetValue,n=Phaser.Math.DegToRad,o=Phaser.Math.Angle.Between;var a=class{constructor(t,e){this.gameObject=t,this.scene=Object(s.a)(t),this._t=0,this.pathVector=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setPath(r(t,"path",void 0));var e=r(t,"t",void 0);void 0!==e&&this.setT(e);var i=r(t,"rotateToPath",!1),s=r(t,"rotationOffset",void 0);return void 0===s&&(s=n(r(t,"angleOffset",0))),this.setRotateToPath(i,s),this}toJSON(){return{path:this.path,t:this.t,rotateToPath:this.rotateToPath,rotationOffset:this.rotationOffset}}boot(){this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}setPath(t){return this.path=t,this}setT(t){return this.t=t,this}get t(){return this._t}set t(t){this._t=t,this.update()}setRotateToPath(t,e){return this.rotateToPath=t,this.rotationOffset=e,this}update(){if(void 0!==this.path){var t=this.gameObject,e=t.x,i=t.y;this.pathVector=this.path.getPoint(this.t,this.pathVector);var s=this.pathVector.x,r=this.pathVector.y;e===s&&i===r||(t.setPosition(s,r),this.rotateToPath&&(t.rotation=o(e,i,s,r)+this.rotationOffset))}}};e.a=a},function(t,e,i){"use strict";var s=i(8),r=i(2);const n=Phaser.Utils.Objects.GetValue;var o=class extends s.a{constructor(t,e){super(t,e),this.gameObject=t,this.scene=Object(r.a)(t),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=n(t,"isRunning",!1),this.setEnable(n(t,"enable",!0)),this.setDuration(n(t,"duration",500)),this.setRepeat(n(t,"repeat",2)),this.repeatCounter=n(t,"repeatCounter",0),this.nowTime=n(t,"nowTime",0),this.timeScale=n(t,"timeScale",1),this}toJSON(){return{isRunning:this.isRunning,duration:this.duration,repeat:this.repeat,repeatCounter:this.repeatCounter,nowTime:this.nowTime,timeScale:this.timeScale,tickingMode:this.tickingMode}}boot(){super.boot(),this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene.events.off("update",this.update,this)}setEnable(t){return void 0==t&&(t=!0),this.enable=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}flash(t,e){if("number"!=typeof t){var i=t;t=n(i,"duration",void 0),e=n(i,"repeat",void 0)}return void 0!==t&&this.setDuration(t),void 0!==e&&this.setRepeat(e),this.isRunning?this.repeatCounter=-1:(this.repeatCounter=0,this.nowTime=0,super.start()),this}stop(){return this.gameObject.setVisible(!0),super.stop(),this}update(t,e){if(!this.isRunning||!this.enable)return this;if(0===this.timeScale||0===e)return this;this.nowTime+=e*this.timeScale;var i=!(this.nowTime<=this.duration/2);return this.gameObject.setVisible(i),this.nowTime>=this.duration&&(-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.nowTime-=this.duration):this.complete()),this}};e.a=o},function(t,e,i){"use strict";var s=i(51),r=i(23);const n=Phaser.Events.EventEmitter,o=Phaser.Utils.Objects.GetFastValue;var a=class extends n{constructor(t){super(),this.commands=[],this.scope=void 0,this.config=void 0,this.index=0,this.indexStep=1,this.setYoyo(o(t,"yoyo",!1)),this.setRepeat(o(t,"repeat",0)),this.setLoop(o(t,"loop",!1)),this.state=0,this.task=void 0}shutdown(){super.shutdown(),this.stop(),this.commands.length=0,this.scope=void 0,this.config=void 0}destroy(){this.shutdown()}load(t,e,i){return this.stop(),this.setYoyo(o(i,"yoyo",this.yoyo)),this.setRepeat(o(i,"repeat",this.repeat)),this.setLoop(o(i,"loop",this.loop)),this.commands=Object(r.a)(this.commands,t),this.scope=e,this.config=i,this}start(){return this.stop(),this.resetRepeatCount(),this.index=0,this.indexStep=1,this.state=1,this.commands.length>0?this.runNextCommands():this.complete(),this}stop(){return this.state=0,this.task&&(this.task.off("complete",this.runNextCommands,this),this.task=void 0),this}setYoyo(t){return this.yoyo=t,this}setRepeat(t){return this.repeat=t,this.resetRepeatCount(),this}setLoop(t){return this.loop=t,this.resetRepeatCount(),this}resetRepeatCount(){return this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this}get completed(){return 0===this.state}get currentCommandIndex(){return this.index-1}runNextCommands(){for(var t,e,i;;){if(2===this.state)return void this.complete();if((t=Object(s.a)(this.commands[this.index],this.scope))&&"function"==typeof t.once?(t.once("complete",this.runNextCommands,this),this.task=t):this.task=void 0,e=0===this.index,i=this.index===this.commands.length-1,this.yoyo?this.indexStep>0&&i||this.indexStep<0&&e?(this.indexStep=-this.indexStep,this.index+=this.indexStep,this.repeatCount>0?this.repeatCount--:this.state=2):this.index+=this.indexStep:i?(this.index=0,this.repeatCount>0?this.repeatCount--:this.state=2):this.index+=this.indexStep,this.task)return this}}complete(){this.state=0,this.emit("complete",this)}};e.a=a},function(t,e,i){"use strict";var s=i(8),r=i(92);const n=Phaser.Utils.Objects.GetValue,o=Phaser.Math.DegToRad;class a extends s.a{constructor(t,e){super(t,e),this.setParent(t),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return void 0===this.body&&this.scene.physics.add.existing(this.gameObject,!1),this.setCascadeMode(n(t,"cascade",!1)),this.setEnable(n(t,"enable",!0)),this.setDirMode(n(t,"dir","8dir")),this.setSpeed(n(t,"speed",200)),this.setRotateToDirection(n(t,"rotateToDirection",!1)),this.setCursorKeys(n(t,"cursorKeys",void 0)),this}toJSON(){return{tickingMode:this.tickingMode}}boot(){super.boot(),this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),this.scene.events.on("preupdate",this.preupdate,this)}stopTicking(){super.stopTicking(),this.scene.events.off("preupdate",this.preupdate,this)}get enable(){return this.isRunning}set enable(t){this.isRunning=t,t||this.bodySetVelocity(0,0)}setEnable(t){return void 0==t&&(t=!0),this.enable=t,t&&void 0===this.body&&this.scene.physics.add.existing(this.gameObject,!1),this}setDirMode(t){return"string"==typeof t&&(t=h[t]),this.dirMode=t,this}setSpeed(t){return this.speed=t,this}setRotateToDirection(t){return this.rotateToDirection=t,this}setCursorKeys(t){return void 0===t&&(t=this.scene.input.keyboard.createCursorKeys()),this.cursorKeys=t,this}preupdate(t,e){if(!this.enable)return this.bodySetVelocity(0,0),this;var i,s,r,n=this.cursorKeys,o=n.up.isDown,a=n.down.isDown,h=n.left.isDown,f=n.right.isDown,p=(o?-1:0)+(a?1:0),g=(h?-1:0)+(f?1:0);if(0===g&&0===p)return this.bodySetVelocity(0,0),this;switch(this.dirMode){case 0:g=0;break;case 1:p=0;break;case 2:0!==p&&(g=0)}return 0===p?(s=this.speed*g,r=0,i=1===g?l:c):0===g?(s=0,r=this.speed*p,i=1===p?u:d):(i=Math.atan2(p,g),s=this.speed*Math.cos(i),r=this.speed*Math.sin(i)),this.bodySetVelocity(s,r),this.rotateToDirection&&void 0!==i&&(this.gameObject.rotation=i),this}}Object.assign(a.prototype,r.a);const h={"up&down":0,"left&right":1,"4dir":2,"8dir":3},l=o(0),u=o(90),c=o(180),d=o(270);var f=a;e.a=f},function(t,e,i){"use strict";var s=i(13);const r=Phaser.Geom.Polygon,n=Phaser.Utils.Objects.IsPlainObject,o=Phaser.Utils.Objects.GetValue,a=Phaser.Geom.Line;class h extends r{constructor(t,e,i,s){if(super(),n(t)){var r=t;t=o(r,"x",0),e=o(r,"y",0),i=o(r,"width",0),s=o(r,"height",0)}for(var a=this.points,h=0;h<4;h++)a.push({});this.setTo(t,e,i,s)}setTo(t,e,i,s){this._x=t,this._y=e,this._width=i,this._height=s;var r=this.points,n=this.centerX,o=this.centerY,a=i/2,h=s/2;return r[0].x=n+a,r[0].y=o,r[1].x=n,r[1].y=o+h,r[2].x=n-a,r[2].y=o,r[3].x=n,r[3].y=o-h,this.calculateArea(),this}get x(){return this._x}set x(t){var e=t-this.x;0!==e&&(Object(s.a)(this,e,0),this._x=t)}get y(){return this._y}set y(t){var e=t-this.y;0!==e&&(Object(s.a)(this,0,e),this._y=t)}setPosition(t,e){var i=t-this.x,r=e-this.y;return 0===i&&0===r?this:(Object(s.a)(this,i,r),this._x=t,this._y=e,this)}get left(){return this.x}set left(t){this.x+=t-this.left}get right(){return this.x+this.width}set right(t){this.x+=t-this.right}get top(){return this.y}set top(t){this.y+=t-this.top}get bottom(){return this.y+this.height}set bottom(t){this.y+=t-this.bottom}get centerX(){return this.x+this.width/2}set centerX(t){this.x+=t-this.centerX}get centerY(){return this.y+this.height/2}set centerY(t){this.y+=t-this.centetY}get width(){return this._width}set width(t){this.setTo(this._x,this._y,t,this._height)}get height(){return this._height}set height(t){this.setTo(this._x,this._y,this._width,t)}setSize(t,e){return this.setTo(this._x,this._y,t,e),this}isEmpty(){return this.width<=0||this.height<=0}getEdge(t,e){void 0===e&&(e=new a);var i=this.points[t],s=this.points[(t+1)%4];return e.setTo(i.x,i.y,s.x,s.y),e}getLineA(t){return this.getEdge(0,t)}getLineB(t){return this.getEdge(1,t)}getLineC(t){return this.getEdge(2,t)}getLineD(t){return this.getEdge(3,t)}}Phaser.Geom.rexRhombus=h;var l=h;e.a=l},function(t,e,i){"use strict";var s=i(8),r=i(92);const n=Phaser.Utils.Objects.GetValue;class o extends s.a{constructor(t,e){super(t,e),this.setParent(t),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return void 0===this.body&&this.scene.physics.add.existing(this.gameObject,!1),this.setCascadeMode(n(t,"cascade",!1)),this.setEnable(n(t,"enable",!0)),this.setSpeed(n(t,"speed",200)),this}toJSON(){return{tickingMode:this.tickingMode}}boot(){super.boot(),this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),this.scene.events.on("preupdate",this.preupdate,this)}stopTicking(){super.stopTicking(),this.scene.events.off("preupdate",this.preupdate,this)}get enable(){return this.isRunning}set enable(t){this.isRunning=t,t||this.bodySetVelocity(0,0)}setEnable(t){return void 0==t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}preupdate(t,e){if(!this.enable)return this.bodySetVelocity(0,0),this;var i=this.gameObject.rotation,s=this.speed*Math.cos(i),r=this.speed*Math.sin(i);return this.bodySetVelocity(s,r),this}}Object.assign(o.prototype,r.a);var a=o;e.a=a},function(t,e,i){"use strict";var s=i(6),r=i(49),n=i(4);const o=Phaser.Utils.Objects.GetValue,a=Phaser.Utils.Array.Shuffle;const h={shuffle:0,random:1};var l=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){void 0==this.items&&(this.items={}),void 0==this.remainder&&(this.remainder={}),void 0==this._list&&(this._list=[]),this.setMode(o(t,"mode",0)),this.setReload(o(t,"reload",!0)),this.items=Object(s.a)(o(t,"items",{}),this.items),this._list.length=0,this.result=o(t,"result",null),this._restartFlag=!0,this._restartFlag&&this.startGen();var e=o(t,"remainder",void 0);return e&&(this.remainder=Object(s.a)(e,this.remainder)),this}toJSON(){return{mode:this.mode,reload:this.reload,items:Object(s.a)(this.items),remainder:Object(s.a)(this.remainder),result:this.result,restart:!0}}startGen(){var t;for(t in this.remainder)this.items.hasOwnProperty(t)||delete this.remainder[t];for(t in this.items){var e=this.items[t];e>0&&(this.remainder[t]=e)}return 1===this.mode&&this.resetItemList(this.remainder),this._restartFlag=!1,this}setMode(t){return"string"==typeof t&&(t=h[t]),this._restartFlag=this.mode!==t,this.mode=t,this}setReload(t){return this.reload=!!t,this}setItem(t,e){return this._restartFlag=this.items[t]!==e,this.items[t]=e,this}removeItem(t){return this.items.hasOwnProperty(t)&&(delete this.items[t],this._restartFlag=!0),this}removeAllItems(){for(var t in this.items)delete this.items[t];return this._restartFlag=!0,this}getItems(){return Object(s.a)(this.items)}getRemain(){return Object(s.a)(this.remainder)}getItemCount(t){return this.items[t]||0}getRemainCount(t){return this.remainder[t]||0}forEachItem(t,e){for(var i=[null,void 0],s=2,r=arguments.length;s<r;s++)i.push(arguments[s]);for(var n in this.items)i[0]=n,i[1]=this.items[n],e?t.apply(e,i):t(i);return this}forEachRemain(t,e){for(var i=[null,void 0],s=1;s<arguments.length;s++)i.push(arguments[s]);for(var r in this.remainder)i[1]=r,i[2]=this.remainder[r],e?t.apply(e,i):t(i);return this}addItem(t,e){if(this.items.hasOwnProperty(t)||(this.items[t]=0),this.items[t]+=e,!this._restartFlag)return 0===this.mode?this.addRemainItem(t,e):this.resetItemList(this.remainder),this}putItemBack(t,e){if(1!==this.mode&&this.items.hasOwnProperty(t)&&(2!==this.mode||!this.restartGenFlg))return this.remainder.hasOwnProperty(t)||(this.remainder[t]=0),this.addShadowPattern(t,e,this.items[t]),this}next(t){var e=null;return this._restartFlag&&this.startGen(),null==t?0===this.mode?(this.resetItemList(this.remainder),e=a(this._list),this.addRemainItem(e,-1)):e=a(this._list):this.remainder.hasOwnProperty(t)?(0===this.mode&&this.addRemainItem(t,-1),e=t):e=null,this.result=e,e}destroy(){return Object(n.a)(this.items),Object(n.a)(this.remainder),Object(n.a)(this._list),this.result=null,this._restartFlag=!1,this}resetItemList(t){this._list.length=0;var e,i,s=0;for(e in t)(i=t[e])>0&&(s+=i);for(e in t)(i=t[e])>0&&this._list.push([e,i/s]);return this}addRemainItem(t,e,i){return null==t||0===e?this:(this.remainder.hasOwnProperty(t)||(this.remainder[t]=0),this.remainder[t]+=e,null!=i&&this.remainder[t]>i&&(this.remainder[t]=i),this.remainder[t]<=0&&delete this.remainder[t],0===this.mode&&this.reload&&Object(r.a)(this.remainder)&&(this._restartFlag=!0),this)}};e.a=l},function(t,e,i){"use strict";var s=i(2);const r=Phaser.Events.EventEmitter,n=Phaser.Utils.Objects.GetValue,o=Phaser.Math.Distance.Between;var a=class extends r{constructor(t,e){super(),this.gameObject=t,this.scene=Object(s.a)(t),this.gameObject.setInteractive(n(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.setEnable(n(t,"enable",!0)),this}boot(){this.gameObject.on("pointerdown",this.onPointIn,this),this.gameObject.on("pointerover",this.onPointIn,this),this.gameObject.on("pointerup",this.onPointOut,this),this.gameObject.on("pointerout",this.onPointOut,this),this.gameObject.on("pointermove",this.onPointerMove,this),this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.pointer=void 0,this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}setEnable(t){return void 0===t&&(t=!0),this.enable===t?this:(t||(this.isInTouched=!1,this.pointer=void 0),this.enable=t,this.gameObject.input.enabled=t,this)}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return void 0===this.pointer}get justMoved(){return this.pointer&&this.pointer.justMoved}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){return this.scene.sys.game.loop.delta}get speed(){return this.x===this.preX&&this.y===this.preY?0:o(this.x,this.preX,this.y,this.preY)/(.001*this.dt)}get speedX(){return this.dx/(.001*this.dt)}get speedY(){return this.dy/(.001*this.dt)}onPointIn(t,e,i){t.isDown&&void 0===this.pointer&&(this.pointer=t,this.isInTouched=!0,this.preX=t.x,this.preY=t.y,this.x=t.x,this.y=t.y,this.localX=e,this.localY=i,this.emit("touchstart",t,e,i))}onPointOut(t){this.pointer===t&&(this.pointer=void 0,this.isInTouched=!1,this.emit("touchend",t))}onPointerMove(t,e,i){t.isDown&&this.pointer===t&&(this.preX=this.x,this.preY=this.y,this.x=t.x,this.y=t.y,this.localX=e,this.localY=i,this.emit("touchmove",t,e,i))}};e.a=a},function(t,e,i){"use strict";var s=i(26),n=i.n(s),o=i(23),a=i(25);const h=Phaser.Utils.Objects.GetValue;const l={ascending:0,descending:1,"logical ascending":2,"logical descending":3};var u=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.table=h(t,"table",{}),this.rowKeys=h(t,"row",[]),this.colKeys=h(t,"col",[]),this.cursor=h(t,"cursor",{}),this}toJSON(){return{table:this.table,row:this.rowKeys,col:this.colKeys,cursor:this.cursor}}shutdown(){}destroy(){}loadCSV(t,e){var i=h(e,"delimiter",","),s=h(e,"convert",!0),r=h(e,"convertScope",void 0);s?!0===s&&(s=a.a,r=void 0):(s=void 0,r=void 0),this.clear();var l=n.a.parse(t,{delimiter:i}).data;this.colKeys=Object(o.a)(this.colKeys,l[0]),this.rowKeys.length=l.length-1;for(var u=0,c=this.rowKeys.length;u<c;u++)this.rowKeys[u]=l[u+1][0];for(var d,f,p,g,v=this.colKeys,y=this.rowKeys,m=this.table,b=0,x=y.length;b<x;b++){p={},m[f=y[b]]=p;for(var w=0,T=v.length;w<T;w++)g=l[b+1][w],d=v[w],s&&(g=r?s.call(r,g,f,d,this):s(g,f,d,this)),p[d]=g}return this.setCursor("",""),this}clear(){var t=this.table;for(var e in t)delete t[e];return this.rowKeys.length=0,this.colKeys.length=0,this}get(t,e){var i=void 0,s=this.table;if(s.hasOwnProperty(t)){var r=s[t];r.hasOwnProperty(e)&&(i=r[e])}return this.setCursor(t,e),i}set(t,e,i){var s=this.table;if(s.hasOwnProperty(e)){var r=s[e];r.hasOwnProperty(t)&&(r[t]=i)}return this.setCursor(e,t),this}add(t,e,i){var s=this.table;if(s.hasOwnProperty(e)){var r=s[e];r.hasOwnProperty(t)&&(r[t]+=i)}return this.setCursor(e,t),this}hasRowKey(t){return-1!==this.rowKeys.indexOf(t)}hasColKey(t){return-1!==this.colKeys.indexOf(t)}hasKey(t,e){return this.hasRowKey(t)&&this.hasColKey(e)}isValueInRol(t,e){if(!this.hasRowKey(t))return!1;for(var i=this.table[t],s=this.colKeys,r=0,n=s.length;r<n;r++)if(i[s[r]]===e)return!0;return!1}isValueInCol(t,e){if(!this.hasColKey(t))return!1;for(var i=this.table,s=0,r=this.rowKeys.length;s<r;s++)if(i[void 0][t]===e)return!0;return!1}appendRow(t,e,i){if(this.hasRowKey(t))return this;var s="function"==typeof e,r=s?void 0:e;this.rowKeys.push(t);var n={};this.table[t]=n;for(var o,a,h=this.colKeys,l=0,u=h.length;l<u;l++)o=h[l],a=s?i?e.call(i,this,t,o):e(this,t,o):r,n[o]=a;return this}appendCol(t,e,i){if(this.hasColKey(t))return this;var s="function"==typeof e,r=s?void 0:e;this.colKeys.push(t);for(var n,o,a=this.table,h=this.rowKeys,l=0,u=h.length;l<u;l++)n=h[l],o=s?i?e.call(i,this,n,t):e(this,n,t):r,a[n][t]=o;return this}removeRol(t){var e=this.rowKeys.indexOf(t);return-1===e?this:(this.rowKeys.splice(e,1),delete this.table[t],this)}removeCol(t){var e=this.colKeys.indexOf(t);if(-1===e)return this;this.colKeys.splice(e,1);for(var i=this.table,s=this.rowKeys,r=0,n=s.length;r<n;r++)delete i[s[r]][t];return this}eachRow(t,e,i){for(var s,r,n=this.rowKeys,o=this.hasColKey(t),a=0,h=n.length;a<h;a++)s=n[a],o&&(r=this.get(s,t)),i?e.call(i,this,s,t,r):e(this,s,t,r);return this}eachCol(t,e,i){for(var s,r,n=this.colKeys,o=this.hasRowKey(t),a=0,h=n.length;a<h;a++)s=n[a],o&&(r=this.get(t,s)),i?e.call(i,this,t,s,r):e(i,this,t,s,r);return this}convertCol(t,e,i){if(void 0===e&&(e=a.a),Array.isArray(t)){for(var s=0,r=t.length;s<r;s++)this.convertCol(t[s],e,i);return this}if(!this.hasColKey(t))return this;for(var n,o,h,l=this.table,u=this.rowKeys,c=0,d=u.length;c<d;c++)h=(n=l[o=u[c]])[t],h=i?e.call(i,this,o,t,h):e(this,o,t,h),n[t]=h;return this}convertRow(t,e,i){if(void 0===e&&(e=a.a),Array.isArray(t)){for(var s=0,n=t.length;s<n;s++)this.convertRow(t[s],e,i);return this}for(var o,h,l=this.table[t],u=this.colKeys,c=0,d=u.length;c<d;c++)h=l[o=u[r]],h=i?e.call(i,this,t,o,h):e(this,t,o,h),l[o]=h;return this}get curColKey(){return this.cursor.colKey}get curRowKey(){return this.cursor.rowKey}nextColKey(t,e){void 0===t&&(t=this.cursor.colKey),void 0===e&&(e=1);var i=this.colKeys,s=i.indexOf(t);if(-1!==s)return i[s+e]}nextRowKey(t,e){void 0===t&&(t=this.cursor.rowKey),void 0===e&&(e=1);var i=this.rowKeys,s=i.indexOf(t);if(-1!==s)return i[s+1]}previousColKey(t,e){return void 0===e&&(e=1),e=-e,this.nextColKey(t,e)}previousRowKey(t,e){return void 0===e&&(e=1),e=-e,this.nextRowlKey(t,e)}sortCol(t,e){if("function"==typeof t)e&&(t=t.bind(e));else{var i=t;if(!this.hasRowKey(i))return this;var s=sceop;"string"==typeof s&&(s=l[s]);var r=this;t=function(t,e){var n,o=r.get(t,i),a=r.get(e,i);switch(s>=2&&(o=parseFloat(o),a=parseFloat(a)),s){case 0:case 2:n=o>a?1:o<a?-1:0;break;case 1:case 3:n=o<a?1:o>a?-1:0}return n}}return this.rowKeys.sort(t),this}sortRow(t,e){if("function"==typeof t)e&&(t=t.bind(e));else{var i=t;if(!this.hasRowKey(i))return this;var s=sceop;"string"==typeof s&&(s=l[s]);var r=this;t=function(t,e){var n,o=r.get(i,t),a=r.get(i,e);switch(s>=2&&(o=parseFloat(o),a=parseFloat(a)),s){case 0:case 2:n=o>a?1:o<a?-1:0;break;case 1:case 3:n=o<a?1:o>a?-1:0}return n}}return this.colKeys.sort(t),this}setCursor(t,e){var i=this.cursor;return i.rowKey=t,i.colKey=e,this}};e.a=u},function(t,e,i){"use strict";var s=i(26),r=i.n(s);const n=Phaser.Utils.Objects.GetValue;var o=function(t,e){var i=n(e,"delimiter",","),s=n(e,"convert",!0);return r.a.parse(t,{delimiter:i,dynamicTyping:s}).data};e.a=o},function(t,e,i){"use strict";var s=i(2);const r=Phaser.Events.EventEmitter,n=Phaser.Utils.Objects.GetValue,o=Phaser.Math.Angle.BetweenPoints,a=Phaser.Math.Distance.Between,h=Phaser.Math.RotateAroundDistance,l=Phaser.Math.Clamp,u=Phaser.Math.Linear,c=Phaser.Math.Percent;var d={},f=class extends r{constructor(t,e){super(),this.gameObject=t,this.scene=Object(s.a)(t),this._value=void 0,this.endPoints=[{x:0,y:0},{x:0,y:0}];var i=n(e,"valuechangeCallback",null);if(null!==i){var r=n(e,"valuechangeCallbackScope",void 0);this.on("valuechange",i,r)}this.gameObject.setInteractive(n(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setValue(n(t,"value",0));var e=n(t,"endPoints",void 0);return void 0!==e&&this.setEndPoints(e),this.setEnable(n(t,"enable",!0)),this}toJSON(){return{value:this.value,endPoints:this.endPoints,enable:this.enable}}boot(){this.gameObject.on("drag",this.onDragging,this),this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}setEnable(t){return void 0===t&&(t=!0),this.enable===t?this:(this.enable=t,this.scene.input.setDraggable(this.gameObject,t),this)}setEndPoints(t,e,i,s){var r=this.endPoints;return"number"==typeof t?(r[0].x=t,r[0].y=e,r[1].x=i,r[1].y=s):Array.isArray(t)?(r[0]=t[0],r[1]=t[1]):(r[0]=t,r[1]=e),this.axisRotation=o(r[0],r[1]),this.updatePos(),this}get value(){return this._value}set value(t){var e=this._value;this._value=l(t,0,1),e!==this._value&&(this.updatePos(this._value),this.emit("valuechange",this._value,e))}setValue(t,e,i){return void 0!==e&&(t=c(t,e,i)),this.value=t,this}addValue(t,e,i){return void 0!==e&&(t=c(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=u(t,e,i)),i}get isDragging(){return this.gameObject.input.dragState>0}onDragging(t,e,i){var s,r=this.endPoints;if(r[0].y===r[1].y){var n=Math.min(r[0].x,r[1].x),o=Math.max(r[0].x,r[1].x);s=c(e,n,o)}else if(r[0].x===r[1].x)n=Math.min(r[0].y,r[1].y),o=Math.max(r[0].y,r[1].y),s=c(i,n,o);else{var l,u=this.gameObject;d.x=e,d.y=i,l=a(d.x,d.y,u.x,u.y),(d=h(d,u.x,u.y,-this.axisRotation,l)).y=u.y,l=a(d.x,d.y,u.x,u.y),d=h(d,u.x,u.y,this.axisRotation,l),n=Math.min(r[0].x,r[1].x),o=Math.max(r[0].x,r[1].x),s=c(d.x,n,o)}this.value=s}updatePos(){var t=this.gameObject,e=this.endPoints;return t.x=u(e[0].x,e[1].x,this._value),t.y=u(e[0].y,e[1].y,this._value),this}};e.a=f},function(t,e,i){"use strict";var s=i(50);const r=Phaser.Utils.Objects.GetValue;var n=class extends s.a{resetFromJSON(t){return super.resetFromJSON(t),this.setLifeTime(r(t,"lifeTime",1e3)),this.setDestroyMode(r(t,"destroy",!0)),r(t,"start",!0)&&this.start(),this}toJSON(){var t=super.toJSON();return t.lifeTime=this.lifeTime,t}setLifeTime(t){return this.lifeTime=t,this}addToLifeTime(t){return this.lifeTime+=t,this}setDestroyMode(t){return void 0===t&&(t=!0),this.destroyMode=t,this}get isAlive(){return this.now<this.lifeTime}get remainder(){var t=this.lifeTime-this.now;return t<0&&(t=0),t}update(t,e){return this.isRunning?(super.update(t,e),this.isAlive||(this.complete(),this.destroyMode&&this.gameObject.destroy()),this):this}get gameObject(){return this.parent}};e.a=n},function(t,e,i){"use strict";var s=i(26),r=i.n(s),n=i(4),o=i(91);const a=Phaser.Utils.Objects.GetValue;var h=class{constructor(t){this.tests=[],this.resetFromJSON(t)}resetFromJSON(t){var e=a(t,"table",void 0),i=a(t,"delimiter",",");return void 0!==e&&this.loadTable(e,i),this}loadCSV(t,e){Object(n.a)(this.tests);var i,s,h=a(e,"delimiter",","),l=r.a.parse(t,{delimiter:h}).data,u=l[0];u.shift();for(var c=1,d=l.length;c<d;c++)s=(i=l[c]).shift(),this.tests.push({name:s,function:Object(o.a)(u,i)});return this}anyPassTest(t,e,i){for(var s,r=0,n=this.tests.length;r<n;r++){if(s=this.tests[r].name,(0,this.tests[r].function)(t)){e&&(i?e.call(i,s):e(s));break}s=!1}return e?this:s}eachPassTest(t,e,i){for(var s,r=0,n=this.tests.length;r<n;r++)s=this.tests[r].name,(0,this.tests[r].function)(t)&&(i?e.call(i,s):e(s));return this}eachTest(t,e,i){for(var s,r,n=0,o=this.tests.length;n<o;n++)r=this.tests[n].name,s=(0,this.tests[n].function)(t),i?e.call(i,r,s):e(r,s);return this}};e.a=h},function(t,e,i){"use strict";var s=i(2);const r=Phaser.Events.EventEmitter,n=Phaser.Utils.Objects.GetValue;const o={press:0,release:1};var a=class extends r{constructor(t,e){super(),this.gameObject=t,this.scene=Object(s.a)(t),t.setInteractive(n(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(n(t,"enable",!0)),this.setMode(n(t,"mode",1)),this.setClickInterval(n(t,"clickInterval",100)),this}boot(){this.gameObject.on("pointerdown",this.onPress,this),this.gameObject.on("pointerup",this.onRelease,this),this.gameObject.on("pointerout",this.onPointOut,this),this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.pointer=void 0,this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}setEnable(t){return void 0===t&&(t=!0),this.enable===t?this:(t||(this.pointer=void 0),this.enable=t,this.gameObject.input.enabled=t,this)}setMode(t){return"string"==typeof t&&(t=o[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}onPress(t){void 0===this.pointer&&(this.pointer=t,0===this.mode&&this.click(t.downTime))}onRelease(t){this.pointer===t&&(1===this.mode&&this.click(t.upTime),this.pointer=void 0)}onPointOut(t){this.pointer===t&&(this.pointer=void 0)}click(t){if(void 0===t)return this.emit("click",this,this.gameObject),this;this.pointer=void 0;var e=this.lastClickTime;return void 0!==e&&t-e<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.gameObject),this)}};e.a=a},function(t,e,i){"use strict";var s=i(2);const r=Phaser.Events.EventEmitter,n=Phaser.Utils.Objects.GetFastValue,o=Phaser.Utils.Objects.GetValue;var a=function(t){return Array.isArray(t)?t=t.join("\n"):"number"==typeof t&&(t=t.toString()),t};const h={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};var l=class extends r{constructor(t,e){super(),this.gameObject=t,this.scene=Object(s.a)(t),this.timer=null,this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setTypeMode(o(t,"typeMode",0)),this.setTypeSpeed(o(t,"speed",333)),this.setTextCallback=n(t,"setTextCallback",null),this.setTextCallbackScope=n(t,"setTextCallbackScope",null),this.typingIdx=n(t,"typingIdx",0),this.text=a(n(t,"text","")),this.textLen=n(t,"textLen",0),this.insertIdx=n(t,"insertIdx",null);var e=n(t,"elapsed",null);return null!==e&&this.start(void 0,void 0,this.typingIdx,e),this}toJSON(){var t,e=this.getTimer();return t=e?e.elapsed:null,{typeMode:this.typeMode,speed:this.speed,setTextCallback:this.setTextCallback,setTextCallbackScope:this.setTextCallbackScope,typingIdx:this.typingIdx,text:this.text,textLen:this.textLen,insertIdx:this.insertIdx,elapsed:t}}boot(){return this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this),this}shutdown(){return super.shutdown(),this.freeTimer(),this.gameObject=void 0,this.scene=void 0,this}destroy(){return this.shutdown(),this}setTypeMode(t){return"string"==typeof t&&(t=h[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}get isTyping(){return null!==this.getTimer()}get isLastChar(){return this.typingIdx===this.textLen}start(t,e,i,s){return void 0!==t&&this.setTypingContent(t),void 0!==e&&(this.speed=e),void 0===i&&(i=0),this.typingIdx=i+1,0===this.speed?this.stop(!0):this.startTimer(s),this}appendText(t){var e=this.text.concat(a(t));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(t){return this.getTimer()&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.gameObject)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=a(t),this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.gameObject)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,e,i,s){var r;if(0===s){var n=0,o=e;this.insertIdx=o,r=this.getSubString(t,n,o)}else if(1===s)n=(o=i)-e,this.insertIdx=0,r=this.getSubString(t,n,o);else if(2===s){var a=i/2;o=(n=Math.floor(a-e/2))+e,this.insertIdx=e%2?e:0,r=this.getSubString(t,n,o)}else if(3===s){var h,l=Math.floor(e/2);l>0?(n=(o=i)-l,h=this.getSubString(t,n,o)):h="";var u,c=e-l;c>0?(o=(n=0)+c,this.insertIdx=o,u=this.getSubString(t,n,o)):(u="",this.insertIdx=0),r=u+h}return r}startTimer(t){var e;return this.timer&&this.freeTimer(),void 0===t?e=0:(this.speed,e=t),this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(t=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.gameObject.setText(t)}getTextLength(t){var e=this.gameObject;return e.getPlainText?e.getPlainText(t).length:t.length}getSubString(t,e,i){var s=this.gameObject;return s.getSubString?s.getSubString(t,e,i):t.slice(e,i)}};e.a=l},function(t,e,i){"use strict";var s=i(90);const r=Phaser.Utils.Objects.GetValue;var n=class{constructor(t,e){this.scene=t,this.base=void 0,this.thumb=void 0,this.touchCursor=void 0,this.radius=r(e,"radius",100),this.addBase(r(e,"base",void 0),e),this.addThumb(r(e,"thumb",void 0));var i=r(e,"x",0),s=r(e,"y",0);this.base.setPosition(i,s),this.thumb.setPosition(i,s),r(e,"fixed",!0)&&this.setScrollFactor(0),this.boot()}createCursorKeys(){return this.touchCursor.createCursorKeys()}get forceX(){return this.touchCursor.forceX}get forceY(){return this.touchCursor.forceY}get force(){return this.touchCursor.force}get rotation(){return this.touchCursor.rotation}get angle(){return this.touchCursor.angle}get up(){return this.touchCursor.upKeyDown}get down(){return this.touchCursor.downKeyDown}get left(){return this.touchCursor.leftKeyDown}get right(){return this.touchCursor.rightKeyDown}get noKey(){return this.touchCursor.noKeyDown}get pointerX(){return this.touchCursor.end.x}get pointerY(){return this.touchCursor.end.y}get pointer(){return this.touchCursor.pointer}setPosition(t,e){return this.x=t,this.y=e,this}set x(t){this.base.x=t}set y(t){this.base.y=t}get x(){return this.base.x}get y(){return this.base.y}setVisible(t){this.visible=t}toggleVisible(){this.visible=!this.visible}get visible(){return this.base.visible}set visible(t){this.base.visible=t,this.thumb.visible=t}setEnable(t){return this.enable=t,this}toggleEnabl(){this.enable=!this.enable}get enable(){return this.touchCursor.enable}set enable(t){this.touchCursor.setEnable(t)}on(){var t=this.touchCursor.events;return t.on.apply(t,arguments),this}once(){var t=this.touchCursor.events;return t.once.apply(t,arguments),this}setVisible(t){return this.visible=t,this}addBase(t,e){return this.base&&this.base.destroy(),void 0===t&&(t=this.scene.add.circle(0,0,this.radius).setStrokeStyle(3,255)),this.touchCursor=new s.a(t,e),this.base=t,this}addThumb(t){return this.thumb&&this.thumb.destroy(),void 0===t&&(t=this.scene.add.circle(0,0,40).setStrokeStyle(3,65280)),this.thumb=t,this}setScrollFactor(t){this.base.setScrollFactor(t),this.thumb.setScrollFactor(t)}boot(){this.touchCursor.on("update",this.update,this)}destroy(){this.base.destroy(),this.thumb.destroy(),this.base=void 0,this.thumb=void 0,this.touchCursor=void 0}update(){var t=this.touchCursor;if(t.anyKeyDown)if(t.force>this.radius){var e=t.rotation;this.thumb.x=t.start.x+Math.cos(e)*this.radius,this.thumb.y=t.start.y+Math.sin(e)*this.radius}else this.thumb.x=t.end.x,this.thumb.y=t.end.y;else this.thumb.x=this.base.x,this.thumb.y=this.base.y;return this}};e.a=n},function(t,e,i){"use strict";var s=i(8),r=i(2);const n=Phaser.Utils.Objects.GetValue,o=Phaser.Math.Wrap,a=Phaser.Math.Angle.Wrap,h=Phaser.Math.RadToDeg,l=Phaser.Math.DegToRad,u=Phaser.Math.Angle.Between;var c=function(t,e,i){var s=i?e-t:t-e;return s=o(s,0,360)};const d={shortest:0,cw:1,ccw:2};var f=class extends s.a{constructor(t,e){super(t,e),this.gameObject=t,this.scene=Object(r.a)(t),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=n(t,"isRunning",!1),this.setEnable(n(t,"enable",!0)),this.timeScale=n(t,"timeScale",1),this.setSpeed(n(t,"speed",180)),this.target=n(t,"target",0),this.dir=n(t,"dir",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,speed:this.speed,target:this.target,dir:this.dir,tickingMode:this.tickingMode}}boot(){super.boot(),this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene.events.off("update",this.update,this)}setEnable(t){return void 0==t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}rotateTo(t,e){if("number"!=typeof t){var i=t;t=n(i,"angle",void 0),e=n(i,"dir",void 0)}return null==t?this:(this.target=o(t,0,360),void 0===e&&(e=0),this.dir="string"==typeof e?d[e]:e,super.start(),this)}rotateTowardsPosition(t,e,i,s){var r=this.gameObject,n=u(r.x,r.y,t,e),o=h(n);return this.rotateTo(o,i,s),this}update(t,e){if(!this.isRunning||!this.enable)return this;var i=this.target,s=a(l(i)),r=this.gameObject;if(s===r.rotation)return this.complete(),this;if(0===this.speed||0===e||0===this.timeScale)return this;var n,o,h=(360+r.angle)%360,u=e*this.timeScale/1e3,d=this.speed*u,f=this.dir;switch(f){case 0:var p=c(h,i,!0),g=360-p;p<g?(f=1,n=p):(f=2,n=g);break;case 1:n=c(h,i,!0);break;case 2:n=c(h,i,!1)}return o=d<n?1===f?h+d:h-d:i,r.rotation=l(o),this}};e.a=f},function(t,e,i){"use strict";var s=i(2);const r=Phaser.GameObjects.Text,n=Phaser.Utils.Objects.GetFastValue,o=(Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetAdvancedValue,Phaser.Math.Clamp);var a=function(t){return Array.isArray(t)?t=t.join("\n"):"number"==typeof t&&(t=t.toString()),t},h=class{constructor(t,e){this.gameObject=t,this.scene=Object(s.a)(t),this.setTextObjectType(),this.lines=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setText(n(t,"text","")),this.setWrapMode(n(t,"wrap",!0)),this.setStartIdx(n(t,"start",0)),this.setPageIdx(n(t,"page",-1)),this}toJSON(){return{text:this.text,start:this.startLineIdx,page:this.pageIdx,pageCount:this.pageCount}}boot(){this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){return this.text="",0===this.textObjectType?this.lines.length=0:this.lines.destroy(),this.gameObject=void 0,this.scene=void 0,this}destroy(){this.shutdown()}setTextObjectType(){return this.gameObject instanceof r?this.textObjectType=0:this.textObjectType=1,this}get isFirstPage(){return this.pageIdx<=0}get isLastPage(){return this.pageIdx>=this.pageCount-1}setText(t,e){return void 0===e&&(e=!0),this.text=a(t),0===this.textObjectType?this.lines=this.gameObject.getWrappedText(this.text):this.lines=this.gameObject.getPenManager(this.text,this.lines),this.pageCount=Math.ceil(this.totalLineCount/this.pageLineCount),e&&this.resetPageIdx(),this}setWrapMode(t){return void 0===t&&(t=!0),this.wrapMode=t,this}appendText(t){return this.setText(this.text.concat(a(t))),this}getPage(t){return void 0===t&&(t=this.pageIdx),this.setPageIdx(t).getLines()}getNextPage(){return this.getPage(this.pageIdx+1)}getPreviousPage(){return this.getPage(this.pageIdx-1)}showPage(t){return this.displayText(this.getPage()),this}showNextPage(){return this.displayText(this.getNextPage()),this}showPreviousPage(){return this.displayText(this.getPreviousPage()),this}show(){return this.displayText(this.getLines()),this}showNextLine(){return this.displayText(this.setStartIdx(this.startLineIdx+1).getLines()),this}showPreviousLine(){return this.displayText(this.setStartIdx(this.startLineIdx-1).getLines()),this}setStartIdx(t){return t=o(t,0,this.totalLineCount-1),this.startLineIdx=t,this}resetPageIdx(){this.pageIdx=-1}setPageIdx(t){return t=o(t,0,this.pageCount-1),this.pageIdx=t,this.setStartIdx(this.pageIdx*this.pageLineCount),this}get totalLineCount(){return 0===this.textObjectType?this.lines.length:this.lines.linesCount}get pageLineCount(){var t=this.gameObject.style.maxLines;return t>0?t:this.totalLineCount}getLines(t){void 0===t&&(t=this.startLineIdx);var e,i=t+this.pageLineCount;if(0===this.textObjectType)e=this.lines.slice(t,i).join("\n");else{var s=this.lines.getLineStartIndex(t),r=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(s,r,this.wrapMode)}return e}displayText(t){this.gameObject.setText(t)}};e.a=h},function(t,e,i){"use strict";e.a={Encrypt:function(t,e){return function(t,e){if(null==e||e.length<=0)return null;for(var i="",s=0;s<e.length;s++)i+=e.charCodeAt(s).toString();var r=Math.floor(i.length/5),n=parseInt(i.charAt(r)+i.charAt(2*r)+i.charAt(3*r)+i.charAt(4*r)+i.charAt(5*r)),o=Math.ceil(e.length/2),a=Math.pow(2,31)-1;if(n<2)return null;var h=Math.round(1e9*Math.random())%1e8;for(i+=h;i.length>10;)i=(parseInt(i.substring(0,10))+parseInt(i.substring(10,i.length))).toString();i=(n*i+o)%a;var l="",u="";for(s=0;s<t.length;s++)u+=(l=parseInt(t.charCodeAt(s)^Math.floor(i/a*255)))<16?"0"+l.toString(16):l.toString(16),i=(n*i+o)%a;for(h=h.toString(16);h.length<8;)h=0+h;return u+=h}(t=escape(t),e=escape(e.toString()))},Decrypt:function(t,e){var i=function(t,e){if(null==t||t.length<8)return null;if(!(null==e||e.length<=0)){for(var i="",s=0;s<e.length;s++)i+=e.charCodeAt(s).toString();var r=Math.floor(i.length/5),n=parseInt(i.charAt(r)+i.charAt(2*r)+i.charAt(3*r)+i.charAt(4*r)+i.charAt(5*r)),o=Math.round(e.length/2),a=Math.pow(2,31)-1,h=parseInt(t.substring(t.length-8,t.length),16);for(t=t.substring(0,t.length-8),i+=h;i.length>10;)i=(parseInt(i.substring(0,10))+parseInt(i.substring(10,i.length))).toString();i=(n*i+o)%a;var l="",u="";for(s=0;s<t.length;s+=2)l=parseInt(parseInt(t.substring(s,s+2),16)^Math.floor(i/a*255)),u+=String.fromCharCode(l),i=(n*i+o)%a;return u}}(t,e=escape(e.toString()));return null!=i&&(i=unescape(i)),i}}},function(t,e,i){"use strict";var s=i(2),r=function(t,e){if(!t.isDown)return!1;for(var i=e.scene,s=i.input.cameras.getCamerasBelowPointer(t),r=i.input.manager,n=[e],o=0,a=s.length;o<a;o++)if(r.hitTest(t,n,s[o]).length>0)return!0;return!1};const n=Phaser.Utils.Objects.GetValue,o=Phaser.Math.Distance.Between,a=Phaser.Math.RotateAroundDistance;var h={};const l={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};var u=class{constructor(t,e){this.gameObject=t,this.scene=Object(s.a)(t),this.gameObject.setInteractive(n(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(n(t,"enable",!0)),this.setAxisMode(n(t,"axis",0)),this.setAxisRotation(n(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.gameObject;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this),t.on("destroy",this.destroy,this)}shutdown(){this.pointer=void 0,this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}setEnable(t){return void 0===t&&(t=!0),this.enable===t?this:(t||(this.pointer=void 0),this.enable=t,this.scene.input.setDraggable(this.gameObject,t),this)}setAxisMode(t){return"string"==typeof t&&(t=l[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){for(var t,e=this.scene.input.manager,i=e.pointersTotal,s=e.pointers,n=0;n<i;n++)if(!((t=s[n]).dragState>0)&&r(t,this.gameObject)){t.dragState=1;break}}dragend(){if(this.isDragging)return this.pointer.dragState=5,this}onDragStart(t,e,i){this.isDragging||(this.pointer=t)}onDrag(t,e,i){if(this.pointer===t){var s=this.gameObject;if(0===this.axisMode)s.x=e,s.y=i;else if(0===this.axisRotation)1===this.axisMode?s.x=e:2===this.axisMode&&(s.y=i);else{var r;h.x=e,h.y=i,r=o(h.x,h.y,s.x,s.y),h=a(h,s.x,s.y,-this.axisRotation,r),1===this.axisMode?h.y=s.y:2===this.axisMode&&(h.x=s.x),r=o(h.x,h.y,s.x,s.y),h=a(h,s.x,s.y,this.axisRotation,r),s.x=h.x,s.y=h.y}}}onDragEnd(t,e,i,s){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return void 0!==this.pointer}};e.a=u},function(t,e,i){"use strict";var s=i(8),r=i(2);const n=Phaser.Math.Vector2;var o=class{constructor(){this.position=new n,this.velocity=new n}init(t,e){return this.velocity.reset(),this.position.set(t,e),this}update(t,e,i){return this.velocity.set(t-this.position.x,e-this.position.y),0===this.velocity.x&&0===this.velocity.y||this.velocity.setToPolar(this.velocity.angle(),this.velocity.length()/i),this.position.set(t,e),this}};const a=Phaser.Utils.Objects.GetValue,h=Phaser.Math.Vector2,l=Phaser.Math.Distance.Between,u=Phaser.Math.Angle.BetweenPoints;var c=class extends s.a{constructor(t,e){super(t,e),this.gameObject=t,this.scene=Object(r.a)(t),this._target=void 0,this.mySpeedMonitor=new o,this.targetSpeedMonitor=new o,this.predictedPosition=new h,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=a(t,"isRunning",!1),this.setEnable(a(t,"enable",!0)),this.setTarget(a(t,"target",void 0)),this}toJSON(){return{isRunning:this.isRunning,duration:this.duration,tickingMode:this.tickingMode}}boot(){super.boot(),this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene.events.off("update",this.update,this)}setEnable(t){return void 0==t&&(t=!0),this.enable=t,this}get target(){return this._target}set target(t){return null==t&&(t=void 0),this.target===t||(this.target&&this.target.off("destroy",this.setTarget,this),t&&t.once("destroy",this.setTarget,this),this._target=t),this.isRunning?void 0===this.target&&super.stop():void 0!==this.target&&(this.mySpeedMonitor.init(this.gameObject.x,this.gameObject.y),this.targetSpeedMonitor.init(this.target.x,this.target.y),super.start()),this}setTarget(t){return this.target=t,this}update(t,e){if(!this.isRunning)return this;if(void 0===this.target)return this;if(!this.enable)return this.predictedPosition.copy(this.target),this;e/=1e3,this.mySpeedMonitor.update(this.gameObject.x,this.gameObject.y,e),this.targetSpeedMonitor.update(this.target.x,this.target.y,e);var i=this.targetSpeedMonitor.velocity.x-this.mySpeedMonitor.velocity.x,s=this.targetSpeedMonitor.velocity.y-this.mySpeedMonitor.velocity.y;if(0===i&&0===s)this.predictedPosition.copy(this.target);else{var r=l(0,0,i,s);t=l(this.target.x,this.target.y,this.gameObject.x,this.gameObject.y)/r,this.predictedPosition.set(this.target.x+this.targetSpeedMonitor.velocity.x*t,this.target.y+this.targetSpeedMonitor.velocity.y*t)}return this}get predictedAngle(){return u(this.gameObject,this.predictedPosition)}};e.a=c},function(t,e,i){"use strict";var s=i(26),r=i.n(s),n=i(4),o=i(91);var a=class{constructor(t,e){this.createTestCallback(t,e)}createTestCallback(t,e){return this.name=e[1],e.splice(0,2),this.testFunction=Object(o.a)(t,e),this}runTest(t){return this.testFunction(t)}};const h=Phaser.Utils.Objects.GetValue;var l=class{constructor(t){this.achievements={},this.obtainedStates={},this.resetFromJSON(t)}resetFromJSON(t){return this.setObtainedState(h(t,"obtained",{})),this}loadCSV(t,e){Object(n.a)(this.achievements);var i,s,o,l=h(e,"delimiter",","),u=r.a.parse(t,{delimiter:l}).data,c=u[0];c.splice(0,2);for(var d=1,f=u.length;d<f;d++)o=(i=u[d])[0],s=new a(c,i),this.achievements.hasOwnProperty(o)||(this.achievements[o]=[]),this.achievements[o].push(s);return this}getAchievements(t){return this.achievements[t]}getAchievementNames(t,e){void 0===e&&(e=[]);var i=this.getAchievements(t);if(!i)return e;for(var s=0,r=i.length;s<r;s++)e.push(i[s].name);return names}getObtainedState(t,e){return this.obtainedStates.hasOwnProperty(t)||(this.obtainedStates[t]={}),this.obtainedStates[t].hasOwnProperty(e)||(this.obtainedStates[t][e]={wasObtained:!1,justObtained:!1}),this.obtainedStates[t][e]}runTest(t,e){var i,s=this.getAchievements(t);if(void 0===s)return this;for(var r=0,n=s.length;r<n;r++)(i=this.getObtainedState(t,s[r].name)).justObtained=!1,i.wasObtained||s[r].runTest(e)&&(i.justObtained=!0,i.wasObtained=!0);return this}forEachObtainedState(t,e,i){var s,r,n=this.getAchievements(t);if(void 0===n)return this;for(var o=0,a=n.length;o<a;o++)s=n[o].name,r=this.getObtainedState(t,s),i?e.call(i,t,s,r):e(t,s,r);return this}setObtainedState(t,e,i){void 0===i&&(i=!0);var s=this.getObtainedState(t,e);return s.wasObtained!==i&&(s.justObtained=i,s.wasObtained=i),this}loadObtainedStates(t){return this.obtainedStates=t,this}getObtainedStates(){return this.obtainedStates}};e.a=l},function(t,e,i){"use strict";var s="\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n\n// Scene buffer\nuniform sampler2D uMainSampler; \nvarying vec2 outTexCoord;\n\nuniform vec2 texSize;\nuniform vec2 pixelSize;\n\n// Swirl effect parameters\nuniform float radius;\nuniform float angle;\n\nvoid main (void) {\n  if ((pixelSize.x > 0.0) || (pixelSize.y > 0.0)) {\n    vec2 dxy = pixelSize/texSize;\n    vec2 tc = vec2(dxy.x*( floor(outTexCoord.x/dxy.x) + 0.5 ), \n                   dxy.y*( floor(outTexCoord.y/dxy.y) + 0.5 )\n                  );\n    gl_FragColor = texture2D(uMainSampler, tc);\n  }\n  else {        \n    gl_FragColor = texture2D(uMainSampler, outTexCoord);\n  }\n}\n";const r=Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline,n=Phaser.Utils.Objects.GetValue;var o=class extends r{constructor(t,e,i){var r=t.game;super({game:r,renderer:r.renderer,fragShader:s}),this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,r.renderer.addPipeline(e,this),this.resetFromJSON(i)}resetFromJSON(t){return this.setPixelSize(n(t,"pixelWidth",0),n(t,"pixelHeight",0)),this}get pixelWidth(){return this._pixelWidth}set pixelWidth(t){this._pixelWidth=t,this._setPixelSize()}setPixelWidth(t){return this.pixelWidth=t,this}get pixelHeight(){return this._pixelHeight}set pixelHeight(t){this._pixelHeight=t,this._setPixelSize()}setPixelHeight(t){return this.pixelHeight=t,this}setPixelSize(t,e){return void 0===e&&(e=t),this._pixelWidth=t,this._pixelHeight=e,this._setPixelSize(),this}_setPixelSize(){this.setFloat2("pixelSize",this._pixelWidth,this._pixelHeight)}resize(t,e,i){return this._width=t,this._height=e,super.resize(t,e,i),this.setFloat2("texSize",t,e),this}};e.a=o},function(t,e,i){"use strict";var s="\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n\n// Scene buffer\nuniform sampler2D uMainSampler; \nvarying vec2 outTexCoord;\n\nuniform vec2 texSize;\nuniform vec2 center;\n\n// Swirl effect parameters\nuniform float radius;\nuniform float angle;\n\nvoid main (void) {\n  vec2 tc = outTexCoord * texSize;\n  tc -= center;\n  float dist = length(tc);\n  if (dist < radius) {\n    float percent = (radius - dist) / radius;\n    float theta = percent * percent * angle * 8.0;\n    float s = sin(theta);\n    float c = cos(theta);\n    tc = vec2(dot(tc, vec2(c, -s)), dot(tc, vec2(s, c)));\n  }\n  tc += center;\n  gl_FragColor = texture2D(uMainSampler, tc / texSize);\n}\n";const r=Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline,n=Phaser.Math.DegToRad,o=Phaser.Math.RadToDeg,a=Phaser.Utils.Objects.GetValue;var h=class extends r{constructor(t,e,i){var r=t.game;super({game:r,renderer:r.renderer,fragShader:s}),this._width=0,this._height=0,this._centerX=0,this._centerY=0,this._radius=0,this._rotation=0,r.renderer.addPipeline(e,this),this.resetFromJSON(i)}resetFromJSON(t){this.radius=a(t,"radius",0);var e=a(t,"rotation",void 0);return void 0===e?this.angle=a(t,"angle",0):this.rotation=e,this.setCenter(a(t,"center.x",void 0),a(t,"center.y",void 0)),this}get radius(){return this._radius}set radius(t){this._radius=t,this.setFloat1("radius",t)}setRadius(t){return this.radius=t,this}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this.setFloat1("angle",t)}setRotation(t){return this.rotation=t,this}get angle(){return o(this.rotation)}set angle(t){this.rotation=n(t)}setAngle(t){return this.angle=t,this}get centerX(){return this._centerX}set centerX(t){this._centerX=t,this._setCenter()}get centerY(){return this._centerY}set centerY(t){this._centerY=t,this._setCenter()}setCenter(t,e){return void 0===t&&(t=this._width/2,e=this._height/2),this._centerX=t,this._centerY=e,this._setCenter(),this}_setCenter(){this.setFloat2("center",this._centerX,this._centerY)}resize(t,e,i){return this._width=t,this._height=e,super.resize(t,e,i),this.setFloat2("texSize",t,e),this}};e.a=h},function(t,e,i){"use strict";var s=i(26),r=i.n(s),n=i(6),o=i(4);const a=Phaser.Utils.Objects.GetValue;var h=class{constructor(t){this.scenario=t,this.queue=[],this.currentIdx=-1,this.nextIdx=0}resetFromJSON(t){var e=a(t,"queue",void 0);return void 0===e?Object(o.a)(this.queue):Object(n.a)(e,this.queue),this.currentIdx=a(t,"curIdx",-1),this.nextIdx=a(t,"nextIdx",0),this}clear(){return this.currentIdx=-1,this.nextIdx=0,this.queue.length=0,this}append(t){return this.queue.push(t),this}setNextIndex(t){return void 0===t&&(t=this.currentIdx+1),this.nextIdx=t,this}get(t){return void 0===t&&(t=this.nextIdx),this.currentIdx=t,this.queue[t]}get length(){return this.queue.length}};var l=class{constructor(t,e){this.scenario=t,this.type=e}resetFromJSON(t){}toJSON(){return{}}parse(t,e){return t}run(t){}},u=(i(23),i(51)),c=i(25);const d=Phaser.Utils.Array.SpliceOne;var f=class extends l{constructor(t){super(t,"-"),this.task=void 0}resetFromJSON(t){this.task&&(this.task.off("complete",this.resume,this),this.task=void 0)}parse(t,e){var i=d(t,0),s=this.scenario,r=s.argsConvert,n=s.argsConvertScope;if(r){!0===r&&(r=c.a,n=void 0);for(var o=1,a=t.length;o<a;o++)t[o]=n?r.call(n,t[o],t):r(t[o],t)}return t=[i,t]}run(t){var e=this.scenario,i=Object(u.a)(t[1],e.scope);i&&"function"==typeof i.once?(i.once("complete",this.resume,this),this.pause(),this.task=i):this.task=void 0}pause(){this.scenario.pause()}resume(){this.task=void 0;var t=this.scenario;t.resume(),t.runNextCmd()}};var p=class extends l{constructor(t){super(t,"wait")}parse(t,e){t.length=2;var i=this.getEventName(t);return isNaN(i)||(t[1]=parseFloat(i)),t}run(t){var e=this.getEventName(t);"number"==typeof e?this.waitTime(e):this.waitEvent(e)}waitTime(t){t>this.scenario.offset?(t-=this.scenario.offset,this.scenario.offset=0,this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)):this.scenario.offset-=t}waitEvent(t){this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)}getEventName(t){var e=t[1];return null==e&&(e="",t[1]=e),e}};const g=Phaser.Utils.Objects.GetValue;var v=class extends l{constructor(t){super(t,"label"),this.labels={},this.prevLabel="",this.lastLabel=""}resetFromJSON(t){this.prevLabel=g(t,"preLabel",""),this.lastLabel=g(t,"lastLabel","");var e=g(t,"labels",void 0);void 0===e?Object(o.a)(this.labels):Object(n.a)(e,this.labels)}toJSON(){return{preLabel:this.prevLabel,lastLabel:this.lastLabel,labels:this.labels}}parse(t,e){t.length=2;var i=this.getLabel(t);return this.addLabel(i,e),t}run(t){var e=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#LABEL: "+e),this.prevLabel=this.lastLabel,this.lastLabel=e;var i=this.scenario;i.emit("labelchange",this.lastLabel,this.prevLabel,i)}getLabel(t){var e=t[1];return null==e&&(e="",t[1]=e),e}addLabel(t,e){this.labels[t]=e}getIndex(t){return""!==t&&this.hasLabel(t)?this.labels[t]:0}hasLabel(t){return this.labels.hasOwnProperty(t)}};var y=class extends l{constructor(t){super(t,"exit")}parse(t,e){return t.length=1,t}run(t){this.scenario.log("#EXIT"),this.scenario.complete()}};var m=class extends l{constructor(t){super(t,"goto")}parse(t,e){return t.length=2,t}run(t){var e=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#GOTO label: "+e),this.scenario.goto(e)}getLabel(t){var e=t[1];return null==e&&(e="",t[1]=e),e}};var b=class extends l{constructor(t){super(t,"if")}parse(t,e){t.length=4;var i="("+this.getCond(t)+")";return t[1]=new Function("return "+i),t}run(t){var e=this.getCond(t).call(this.scenario.scope),i=e?this.getTrueLabel(t):this.getFalseLabel(t);""!==i&&(this.scenario.isDebugMode&&this.scenario.log("#IF "+e+"- GOTO label: "+i),this.scenario.goto(i))}getCond(t){var e=t[1];return null!=e&&""!==e||(e="true",t[1]=e),e}getTrueLabel(t){var e=t[2];return null==e&&(e="",t[2]=e),e}getFalseLabel(t){var e=t[3];return null==e&&(e="",t[3]=e),e}};const x=Phaser.Utils.Objects.GetValue;var w=class{constructor(t){this.cmds={"-":new f(t),wait:new p(t),label:new v(t),exit:new y(t),goto:new m(t),if:new b(t)}}resetFromJSON(t){for(var e in this.cmds)this.cmds[e].resetFromJSON(x(t,e,void 0));return this}toJSON(){var t={};for(var e in this.cmds)t[e]=this.cmds[e].toJSON();return t}get(t){return this.cmds[t]}isValidCmdName(t){return this.cmds.hasOwnProperty(t)}};const T=Phaser.Events.EventEmitter,O=Phaser.Utils.Objects.GetValue;const S={ms:0,s:1,sec:1},_=/^#([a-zA-Z]+)/;var C=class extends T{constructor(t,e){super(),this.scene=t,this.timer=void 0,this.instMem=new h(this),this.cmdHandlers=new w(this),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this._inRunCmdLoop=!1,this.isRunning=O(t,"state",!1),this.isPaused=O(t,"pause",!1),this.waitEvent=O(t,"wait",void 0),this.scope=O(t,"scope",void 0),this.timeUnit=O(t,"timeUnit",0),this.cmdPrefix=O(t,"prefix",_),this.argsConvert=O(t,"argsConvert",!0),this.argsConvertScope=O(t,"argsConvertScope",void 0),this.cmdHandlers.resetFromJSON(O(t,"handlers",void 0)),this.instMem.resetFromJSON(O(t,"instMem",void 0)),this}toJSON(){return{state:this.isRunning,pause:this.isPaused,wait:this.waitEvent,scope:this.scope,timeUnit:this.timeUnit,prefix:this.cmdPrefix,argsConvert:this.argsConvert,argsConvertScope:this.argsConvertScope,handlers:this.cmdHandlers.toJSON(),instMem:this.instMem.toJSON()}}boot(){this.scene.events.on("destroy",this.destroy,this)}shutdown(){super.shutdown(),this.clear(),this.parent=void 0}destroy(){this.shutdown()}load(t,e,i){return this.clear(),this.timeUnit=O(i,"timeUnit",this.timeUnit),"string"==typeof this.timeUnit&&(this.timeUnit=S[this.timeUnit]),this.cmdPrefix=O(i,"prefix",this.cmdPrefix),"string"==typeof this.cmdPrefix&&(this.cmdPrefix=new RegExp(this.cmdPrefix)),this.argsConvert=O(i,"argsConvert",this.argsConvert),this.argsConvertScope=O(i,"argsConvertScope",this.argsConvertScope),this.scope=e,this.append(t),this}clear(){this.stop(),this.instMem.resetFromJSON(),this.cmdHandlers.resetFromJSON()}start(t){this.stop();var e=O(t,"label","");return this.offset=O(t,"offset",0),this.isDebugMode&&this.log("Start at Label: "+e),!!this.goto(e)&&(this.isRunning=!0,this.runNextCmd(),!0)}getIndex(t){var e=this.getCmdHandler("label").getIndex(t);return null==e&&this.error("Label: "+t+" is not found"),e}goto(t){var e;return null!=(e="string"==typeof t?this.getIndex(t):t)&&(this.instMem.setNextIndex(e),!0)}wait(t){if(this.waitEvent=t,"number"==typeof t){var e=t;1===this.timeUnit&&(e*=1e3),this.timer=this.scene.time.delayedCall(e,this.continue,[t],this)}return this}stop(){return this.isRunning?(this.isRunning=!1,this.isPaused=!1,this.waitEvent=void 0,this.timer&&(this.timer.remove(),this.timer=void 0),this):this}complete(){return this.emit("complete",this),this.stop(),this}append(t,e){void 0===e&&(e=",");var i=r.a.parse(t,{delimiter:e}).data;return this.parse(i),this}pause(){return this.isRunning?this.isPaused?this:(this.isPaused=!0,this.timer&&(this.timer.paused=!0),this):this}resume(){return this.isRunning&&this.isPaused?(this.isPaused=!1,this.timer&&(this.timer.paused=!1),this):this}continue(t){return!this.isRunning||this.isPaused||void 0===this.waitEvent?this:(t===this.waitEvent&&(this.timer=void 0,this.waitEvent=void 0,this.runNextCmd()),this)}get lastLabel(){return this.cmdHandlers.labelCmd.lastLabel}get previousLabel(){return this.cmdHandlers.labelCmd.preLabel}getCmdHandler(t){return"string"!=typeof t&&(t=t[0]),this.cmdHandlers.get(t)}parse(t){for(var e,i,s=this.cmdPrefix,r=0,n=t.length;r<n;r++)if("-"===(i=(e=t[r])[0]))this.appendCommand(e);else if(isNaN(i))if(s.test(i)){var o=i.match(s);e[0]=o[1].toLowerCase(),this.appendCommand(e)||this.error("Line "+r+": "+JSON.stringify(e)+" is not a valid command")}else this.appendCommand(["wait",i]),e[0]="-",this.appendCommand(e);else{var a=parseFloat(i);a>0&&this.appendCommand(["wait",a]),e[0]="-",this.appendCommand(e)}return this}appendCommand(t){var e=this.getCmdHandler(t);return null!=e&&((t=e.parse(t,this.instMem.length))&&this.instMem.append(t),!0)}runNextCmd(){if(!this._inRunCmdLoop){this.threadId;var t,e=this.instMem;for(this._inRunCmdLoop=!0;this.isRunning&&!this.isPaused&&void 0===this.waitEvent;){if(t=e.get(),e.setNextIndex(),null==t){this.complete();break}this.getCmdHandler(t).run(t)}return this._inRunCmdLoop=!1,this}}log(t){return this.emit("log",t,this),this}get isDebugMode(){return this.listenerCount("log")>0}error(t){return this.emit("error",t,this),this}};e.a=C},function(t,e,i){"use strict";var s=i(48);e.a=s.a},function(t,e,i){"use strict";var s=i(42);e.a=s.a},function(t,e,i){var s;!function(){function r(t,e,i){return t.call.apply(t.bind,arguments)}function n(t,e,i){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function o(t,e,i){return(o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r:n).apply(null,arguments)}var a=Date.now||function(){return+new Date};var h=!!window.FontFace;function l(t,e,i,s){if(e=t.c.createElement(e),i)for(var r in i)i.hasOwnProperty(r)&&("style"==r?e.style.cssText=i[r]:e.setAttribute(r,i[r]));return s&&e.appendChild(t.c.createTextNode(s)),e}function u(t,e,i){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function c(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t,e,i){e=e||[],i=i||[];for(var s=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var n=!1,o=0;o<s.length;o+=1)if(e[r]===s[o]){n=!0;break}n||s.push(e[r])}for(e=[],r=0;r<s.length;r+=1){for(n=!1,o=0;o<i.length;o+=1)if(s[r]===i[o]){n=!0;break}n||e.push(s[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(t,e){for(var i=t.className.split(/\s+/),s=0,r=i.length;s<r;s++)if(i[s]==e)return!0;return!1}function p(t,e,i){function s(){a&&r&&n&&(a(o),a=null)}e=l(t,"link",{rel:"stylesheet",href:e,media:"all"});var r=!1,n=!0,o=null,a=i||null;h?(e.onload=function(){r=!0,s()},e.onerror=function(){r=!0,o=Error("Stylesheet failed to load"),s()}):setTimeout(function(){r=!0,s()},0),u(t,"head",e)}function g(t,e,i,s){var r=t.c.getElementsByTagName("head")[0];if(r){var n=l(t,"script",{src:e}),o=!1;return n.onload=n.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,i&&i(null),n.onload=n.onreadystatechange=null,"HEAD"==n.parentNode.tagName&&r.removeChild(n))},r.appendChild(n),setTimeout(function(){o||(o=!0,i&&i(Error("Script load timeout")))},s||5e3),n}return null}function v(){this.a=0,this.c=null}function y(t){return t.a++,function(){t.a--,b(t)}}function m(t,e){t.c=e,b(t)}function b(t){0==t.a&&t.c&&(t.c(),t.c=null)}function x(t){this.a=t||"-"}function w(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function T(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var s=t[i].replace(/['"]/g,"");-1!=s.indexOf(" ")||/^\d/.test(s)?e.push("'"+s+"'"):e.push(s)}return e.join(",")}function O(t){return t.a+t.f}function S(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function _(t){var e=4,i="n",s=null;return t&&((s=t.match(/(normal|oblique|italic)/i))&&s[1]&&(i=s[1].substr(0,1).toLowerCase()),(s=t.match(/([1-9]00|normal|bold)/i))&&s[1]&&(/bold/i.test(s[1])?e=7:/[1-9]00/.test(s[1])&&(e=parseInt(s[1].substr(0,1),10)))),i+e}function C(t){if(t.g){var e=f(t.f,t.a.c("wf","active")),i=[],s=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),d(t.f,i,s)}P(t,"inactive")}function P(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,O(i)):t.h[e]())}function k(t,e){this.c=t,this.f=e,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function M(t){u(t.c,"body",t.a)}function R(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+T(t.c)+";font-style:"+S(t)+";font-weight:"+t.f+"00;"}function E(t,e,i,s,r,n){this.g=t,this.j=e,this.a=s,this.c=i,this.f=r||3e3,this.h=n||void 0}function j(t,e,i,s,r,n,o){this.v=t,this.B=e,this.c=i,this.a=s,this.s=o||"BESbswy",this.f={},this.w=r||3e3,this.u=n||null,this.m=this.j=this.h=this.g=null,this.g=new k(this.c,this.s),this.h=new k(this.c,this.s),this.j=new k(this.c,this.s),this.m=new k(this.c,this.s),t=R(t=new w(this.a.c+",serif",O(this.a))),this.g.a.style.cssText=t,t=R(t=new w(this.a.c+",sans-serif",O(this.a))),this.h.a.style.cssText=t,t=R(t=new w("serif",O(this.a))),this.j.a.style.cssText=t,t=R(t=new w("sans-serif",O(this.a))),this.m.a.style.cssText=t,M(this.g),M(this.h),M(this.j),M(this.m)}x.prototype.c=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},E.prototype.start=function(){var t=this.c.o.document,e=this,i=a(),s=new Promise(function(s,r){!function n(){a()-i>=e.f?r():t.fonts.load(function(t){return S(t)+" "+t.f+"00 300px "+T(t.c)}(e.a),e.h).then(function(t){1<=t.length?s():setTimeout(n,25)},function(){r()})}()}),r=null,n=new Promise(function(t,i){r=setTimeout(i,e.f)});Promise.race([n,s]).then(function(){r&&(clearTimeout(r),r=null),e.g(e.a)},function(){e.j(e.a)})};var D={D:"serif",C:"sans-serif"},I=null;function A(){if(null===I){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);I=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return I}function L(t,e,i){for(var s in D)if(D.hasOwnProperty(s)&&e===t.f[D[s]]&&i===t.f[D[s]])return!0;return!1}function Y(t){var e,i=t.g.a.offsetWidth,s=t.h.a.offsetWidth;(e=i===t.f.serif&&s===t.f["sans-serif"])||(e=A()&&L(t,i,s)),e?a()-t.A>=t.w?A()&&L(t,i,s)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?F(t,t.v):F(t,t.B):function(t){setTimeout(o(function(){Y(this)},t),50)}(t):F(t,t.v)}function F(t,e){setTimeout(o(function(){c(this.g.a),c(this.h.a),c(this.j.a),c(this.m.a),e(this.a)},t),0)}function N(t,e,i){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=i}j.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),Y(this)};var X=null;function U(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&d(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),P(t,"active")):C(t.a))}function B(t){this.j=t,this.a=new function(){this.c={}},this.h=0,this.f=this.g=!0}function W(t,e,i,s,r){var n=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=r||null,a=s||{};if(0===i.length&&n)C(e.a);else{e.f+=i.length,n&&(e.j=n);var h,l=[];for(h=0;h<i.length;h++){var u=i[h],c=a[u.c],f=e.a,p=u;if(f.g&&d(f.f,[f.a.c("wf",p.c,O(p).toString(),"loading")]),P(f,"fontloading",p),f=null,null===X)if(window.FontFace){p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);X=p?42<parseInt(p[1],10):!g}else X=!1;f=X?new E(o(e.g,e),o(e.h,e),e.c,u,e.s,c):new j(o(e.g,e),o(e.h,e),e.c,u,e.s,t,c),l.push(f)}for(h=0;h<l.length;h++)l[h].start()}},0)}function V(t,e){this.c=t,this.a=e}function G(t,e){this.c=t,this.a=e}N.prototype.g=function(t){var e=this.a;e.g&&d(e.f,[e.a.c("wf",t.c,O(t).toString(),"active")],[e.a.c("wf",t.c,O(t).toString(),"loading"),e.a.c("wf",t.c,O(t).toString(),"inactive")]),P(e,"fontactive",t),this.m=!0,U(this)},N.prototype.h=function(t){var e=this.a;if(e.g){var i=f(e.f,e.a.c("wf",t.c,O(t).toString(),"active")),s=[],r=[e.a.c("wf",t.c,O(t).toString(),"loading")];i||s.push(e.a.c("wf",t.c,O(t).toString(),"inactive")),d(e.f,s,r)}P(e,"fontinactive",t),U(this)},B.prototype.load=function(t){this.c=new function(t,e){this.a=t,this.o=e||t,this.c=this.o.document}(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,i){var s=[],r=i.timeout;!function(t){t.g&&d(t.f,[t.a.c("wf","loading")]),P(t,"loading")}(e);var s=function(t,e,i){var s,r=[];for(s in e)if(e.hasOwnProperty(s)){var n=t.c[s];n&&r.push(n(e[s],i))}return r}(t.a,i,t.c),n=new N(t.c,e,r);for(t.h=s.length,e=0,i=s.length;e<i;e++)s[e].load(function(e,i,s){W(t,n,e,i,s)})}(this,new function(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new x("-"),this.j=!1!==e.events,this.g=!1!==e.classes}(this.c,t),t)},V.prototype.load=function(t){var e=this,i=e.a.projectId,s=e.a.version;if(i){var r=e.c.o;g(this.c,(e.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(s?"?v="+s:""),function(s){s?t([]):(r["__MonotypeConfiguration__"+i]=function(){return e.a},function e(){if(r["__mti_fntLst"+i]){var s,n=r["__mti_fntLst"+i](),o=[];if(n)for(var a=0;a<n.length;a++){var h=n[a].fontfamily;void 0!=n[a].fontStyle&&void 0!=n[a].fontWeight?(s=n[a].fontStyle+n[a].fontWeight,o.push(new w(h,s))):o.push(new w(h))}t(o)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+i}else t([])},G.prototype.load=function(t){var e,i,s=this.a.urls||[],r=this.a.families||[],n=this.a.testStrings||{},o=new v;for(e=0,i=s.length;e<i;e++)p(this.c,s[e],y(o));var a=[];for(e=0,i=r.length;e<i;e++)if((s=r[e].split(":"))[1])for(var h=s[1].split(","),l=0;l<h.length;l+=1)a.push(new w(s[0],h[l]));else a.push(new w(s[0]));m(o,function(){t(a,n)})};var z="https://fonts.googleapis.com/css";var H={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},K={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},J={i:"i",italic:"i",n:"n",normal:"n"},Z=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function q(t,e){this.c=t,this.a=e}var Q={Arimo:!0,Cousine:!0,Tinos:!0};function $(t,e){this.c=t,this.a=e}function tt(t,e){this.c=t,this.f=e,this.a=[]}q.prototype.load=function(t){var e=new v,i=this.c,s=new function(t,e){this.c=t||z,this.a=[],this.f=[],this.g=e||""}(this.a.api,this.a.text),r=this.a.families;!function(t,e){for(var i=e.length,s=0;s<i;s++){var r=e[s].split(":");3==r.length&&t.f.push(r.pop());var n="";2==r.length&&""!=r[1]&&(n=":"),t.a.push(r.join(n))}}(s,r);var n=new function(t){this.f=t,this.a=[],this.c={}}(r);!function(t){for(var e=t.f.length,i=0;i<e;i++){var s=t.f[i].split(":"),r=s[0].replace(/\+/g," "),n=["n4"];if(2<=s.length){var o;if(o=[],a=s[1])for(var a,h=(a=a.split(",")).length,l=0;l<h;l++){var u;if((u=a[l]).match(/^[\w-]+$/))if(null==(d=Z.exec(u.toLowerCase())))u="";else{if(u=null==(u=d[2])||""==u?"n":J[u],null==(d=d[1])||""==d)d="4";else var c=K[d],d=c||(isNaN(d)?"4":d.substr(0,1));u=[u,d].join("")}else u="";u&&o.push(u)}0<o.length&&(n=o),3==s.length&&(o=[],0<(s=(s=s[2])?s.split(","):o).length&&(s=H[s[0]])&&(t.c[r]=s))}for(t.c[r]||(s=H[r])&&(t.c[r]=s),s=0;s<n.length;s+=1)t.a.push(new w(r,n[s]))}}(n),p(i,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],s=0;s<e;s++)i.push(t.a[s].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(s),y(e)),m(e,function(){t(n.a,n.c,Q)})},$.prototype.load=function(t){var e=this.a.id,i=this.c.o;e?g(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var s=[],r=0;r<e.length;r+=2)for(var n=e[r],o=e[r+1],a=0;a<o.length;a++)s.push(new w(n,o[a]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(s)}},2e3):t([])},tt.prototype.load=function(t){var e=this.f.id,i=this.c.o,s=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var r=0,n=i.fonts.length;r<n;++r){var o=i.fonts[r];s.a.push(new w(o.name,_("font-weight:"+o.weight+";font-style:"+o.style)))}t(s.a)},g(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var et=new B(window);et.a.c.custom=function(t,e){return new G(e,t)},et.a.c.fontdeck=function(t,e){return new tt(e,t)},et.a.c.monotype=function(t,e){return new V(e,t)},et.a.c.typekit=function(t,e){return new $(e,t)},et.a.c.google=function(t,e){return new q(e,t)};var it={load:o(et.load,et)};void 0===(s=function(){return it}.call(e,i,e,t))||(t.exports=s)}()},function(t,e,i){"use strict";i.r(e);var s=i(43);const r=Phaser.Utils.Objects.GetAdvancedValue,n=Phaser.Utils.Objects.GetValue,o=Phaser.GameObjects.BuildGameObject;Phaser.GameObjects.GameObjectFactory.register("rexRoundRectangle",function(t,e,i,r,n,o,a){var h=new s.a(this.scene,t,e,i,r,n,o,a);return this.displayList.add(h),h}),Phaser.GameObjects.GameObjectCreator.register("rexRoundRectangle",function(t){var e=r(t,"width",void 0),i=r(t,"height",e),a=n(t,"radius",void 0),h=r(t,"fillColor",void 0),l=r(t,"fillAlpha",void 0),u=new s.a(this.scene,0,0,e,i,a,h,l);return o(this.scene,u,t),u}),e.default=s.a},function(t,e,i){"use strict";i.r(e);var s=i(18);const r=Phaser.Utils.Objects.GetAdvancedValue,n=Phaser.Utils.Objects.GetValue,o=Phaser.GameObjects.BuildGameObject;Phaser.GameObjects.GameObjectFactory.register("rexContainerLite",function(t,e,i,r,n){var o=new s.a(this.scene,t,e,i,r,n);return this.displayList.add(o),o}),Phaser.GameObjects.GameObjectCreator.register("rexContainerLite",function(t){var e=r(t,"width",1),i=r(t,"height",e),a=n(t,"children",void 0),h=new s.a(this.scene,0,0,e,i);return h.syncChildrenEnable=!1,o(this.scene,h,t),h.syncChildrenEnable=!0,h.add(a),h}),e.default=s.a},function(t,e,i){"use strict";i.r(e);var s=i(58);const r=Phaser.Utils.Objects.GetAdvancedValue,n=Phaser.GameObjects.BuildGameObject;Phaser.GameObjects.GameObjectFactory.register("rexCanvas",function(t,e,i,r){var n=new s.a(this.scene,t,e,i,r);return this.displayList.add(n),n}),Phaser.GameObjects.GameObjectCreator.register("rexCanvas",function(t,e){var i=r(t,"width",256),o=r(t,"height",i);void 0!==e&&(t.add=e);var a=new s.a(this.scene,0,0,i,o);n(this.scene,a,t);var h=r(t,"fill",null);return a.fill(h),a}),e.default=s.a},function(t,e,i){"use strict";i.r(e);var s=i(56);const r=Phaser.Utils.Objects.GetAdvancedValue,n=Phaser.GameObjects.BuildGameObject;Phaser.GameObjects.GameObjectFactory.register("rexTagText",function(t,e,i,r){i=new s.a(this.scene,t,e,i,r);return this.displayList.add(i),i}),Phaser.GameObjects.GameObjectCreator.register("rexTagText",function(t,e){var i=r(t,"text",""),o=r(t,"style",null),a=r(t,"padding",null);null!==a&&(o.padding=a),void 0!==e&&(t.add=e);var h=new s.a(this.scene,0,0,i,o);return n(this.scene,h,t),h.autoRound=r(t,"autoRound",!0),h.resolution=r(t,"resolution",1),h}),e.default=s.a},function(t,e,i){"use strict";i.r(e);var s=i(57);const r=Phaser.Utils.Objects.GetAdvancedValue,n=Phaser.GameObjects.BuildGameObject;Phaser.GameObjects.GameObjectFactory.register("rexBBCodeText",function(t,e,i,r){i=new s.a(this.scene,t,e,i,r);return this.displayList.add(i),i}),Phaser.GameObjects.GameObjectCreator.register("rexBBCodeText",function(t,e){var i=r(t,"text",""),o=r(t,"style",null),a=r(t,"padding",null);null!==a&&(o.padding=a),void 0!==e&&(t.add=e);var h=new s.a(this.scene,0,0,i,o);return n(this.scene,h,t),h.autoRound=r(t,"autoRound",!0),h.resolution=r(t,"resolution",1),h}),e.default=s.a},,,function(t,e,i){"use strict";i.r(e);var s=i(136),r=i(135),n=i(134),o=i(133),a=i(96),h=i(132),l=i(98);Phaser.Loader.FileTypesManager.register("rexWebFont",l.a);var u=l.a,c=i(99);Phaser.Loader.FileTypesManager.register("rexAwait",c.a);var d=c.a,f=i(97),p=i(111),g=i(123),v=i(59),y=i(114),m=i(94),b=i(117),x=i(90),w=i(119),T=i(130),O=i(120),S=i(63),_=i(95),C=i(104),P=i(105),k=i(124),M=i(107),R=i(109),E=i(118),j=i(121),D=i(103),I=i(106),A=i(34),L=i(102),Y=i(128),F=i(93),N=i(125),X=i(116),U=i(50),B=i(115),W=i(113),V=i(112),G=i(110),z=i(108),H=i(129),K=i(122),J=i(101),Z=i(127),q=i(126),Q=i(47),$=i(46),tt=i(45),et=i(68),it=i(66),st=i(65),rt=i(67);i.d(e,"BBCodeText",function(){return s.default}),i.d(e,"TagText",function(){return r.default}),i.d(e,"Canvas",function(){return n.default}),i.d(e,"ContainerLite",function(){return o.default}),i.d(e,"GridTable",function(){return a.default}),i.d(e,"RoundRectangle",function(){return h.default}),i.d(e,"WebFontLoader",function(){return u}),i.d(e,"Awaitloader",function(){return d}),i.d(e,"HexagonGridAlign",function(){return f.a}),i.d(e,"QuadGridAlign",function(){return f.b}),i.d(e,"TouchState",function(){return p.a}),i.d(e,"Drag",function(){return g.a}),i.d(e,"DragSpeed",function(){return v.a}),i.d(e,"Slider",function(){return y.a}),i.d(e,"Scroller",function(){return m.a}),i.d(e,"Button",function(){return b.a}),i.d(e,"TouchCursor",function(){return x.a}),i.d(e,"VirtualJoyStick",function(){return w.a}),i.d(e,"MoveTo",function(){return T.a}),i.d(e,"RotateTo",function(){return O.a}),i.d(e,"Fade",function(){return S.a}),i.d(e,"FadeOutDestroy",function(){return _.a}),i.d(e,"PathFollower",function(){return C.a}),i.d(e,"Flash",function(){return P.a}),i.d(e,"Interception",function(){return k.a}),i.d(e,"EightDirection",function(){return M.a}),i.d(e,"Bullet",function(){return R.a}),i.d(e,"TextTyping",function(){return E.a}),i.d(e,"TextPage",function(){return j.a}),i.d(e,"SoundFade",function(){return D.a}),i.d(e,"Sequence",function(){return I.a}),i.d(e,"FSM",function(){return A.a}),i.d(e,"TCRP",function(){return L.a}),i.d(e,"CSVScenario",function(){return Y.a}),i.d(e,"WaitEvents",function(){return F.a}),i.d(e,"Achievements",function(){return N.a}),i.d(e,"ConditionsTable",function(){return X.a}),i.d(e,"Clock",function(){return U.a}),i.d(e,"LifeTime",function(){return B.a}),i.d(e,"CSVToArray",function(){return W.a}),i.d(e,"CSVToHashTable",function(){return V.a}),i.d(e,"Gashapon",function(){return G.a}),i.d(e,"Rhombus",function(){return z.a}),i.d(e,"Hexagon",function(){return H.a}),i.d(e,"XOR",function(){return K.a}),i.d(e,"LZString",function(){return J.a}),i.d(e,"SwirlPipeline",function(){return Z.a}),i.d(e,"PixelationPipeline",function(){return q.a}),i.d(e,"Board",function(){return Q.a}),i.d(e,"QuadGrid",function(){return $.a}),i.d(e,"HexagonGrid",function(){return tt.a}),i.d(e,"ChessShape",function(){return et.a}),i.d(e,"ChessMoveTo",function(){return it.a}),i.d(e,"Match",function(){return st.a}),i.d(e,"PathFinder",function(){return rt.a})}]).default});