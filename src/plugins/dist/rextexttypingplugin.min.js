!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rextexttypingplugin=e():t.rextexttypingplugin=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=162)}({118:function(t,e,i){"use strict";var s=i(2);const r=Phaser.Events.EventEmitter,n=Phaser.Utils.Objects.GetFastValue,h=Phaser.Utils.Objects.GetValue;var o=function(t){return Array.isArray(t)?t=t.join("\n"):"number"==typeof t&&(t=t.toString()),t};const a={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};var u=class extends r{constructor(t,e){super(),this.gameObject=t,this.scene=Object(s.a)(t),this.timer=null,this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setTypeMode(h(t,"typeMode",0)),this.setTypeSpeed(h(t,"speed",333)),this.setTextCallback=n(t,"setTextCallback",null),this.setTextCallbackScope=n(t,"setTextCallbackScope",null),this.typingIdx=n(t,"typingIdx",0),this.text=o(n(t,"text","")),this.textLen=n(t,"textLen",0),this.insertIdx=n(t,"insertIdx",null);var e=n(t,"elapsed",null);return null!==e&&this.start(void 0,void 0,this.typingIdx,e),this}toJSON(){var t,e=this.getTimer();return t=e?e.elapsed:null,{typeMode:this.typeMode,speed:this.speed,setTextCallback:this.setTextCallback,setTextCallbackScope:this.setTextCallbackScope,typingIdx:this.typingIdx,text:this.text,textLen:this.textLen,insertIdx:this.insertIdx,elapsed:t}}boot(){return this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this),this}shutdown(){return super.shutdown(),this.freeTimer(),this.gameObject=void 0,this.scene=void 0,this}destroy(){return this.shutdown(),this}setTypeMode(t){return"string"==typeof t&&(t=a[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}get isTyping(){return null!==this.getTimer()}get isLastChar(){return this.typingIdx===this.textLen}start(t,e,i,s){return void 0!==t&&this.setTypingContent(t),void 0!==e&&(this.speed=e),void 0===i&&(i=0),this.typingIdx=i+1,0===this.speed?this.stop(!0):this.startTimer(s),this}appendText(t){var e=this.text.concat(o(t));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(t){return this.getTimer()&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.gameObject)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=o(t),this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.gameObject)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,e,i,s){var r;if(0===s){var n=0,h=e;this.insertIdx=h,r=this.getSubString(t,n,h)}else if(1===s)n=(h=i)-e,this.insertIdx=0,r=this.getSubString(t,n,h);else if(2===s){var o=i/2;h=(n=Math.floor(o-e/2))+e,this.insertIdx=e%2?e:0,r=this.getSubString(t,n,h)}else if(3===s){var a,u=Math.floor(e/2);u>0?(n=(h=i)-u,a=this.getSubString(t,n,h)):a="";var l,d=e-u;d>0?(h=(n=0)+d,this.insertIdx=h,l=this.getSubString(t,n,h)):(l="",this.insertIdx=0),r=l+a}return r}startTimer(t){var e;return this.timer&&this.freeTimer(),void 0===t?e=0:(this.speed,e=t),this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(t=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.gameObject.setText(t)}getTextLength(t){var e=this.gameObject;return e.getPlainText?e.getPlainText(t).length:t.length}getSubString(t,e,i){var s=this.gameObject;return s.getSubString?s.getSubString(t,e,i):t.slice(e,i)}};e.a=u},162:function(t,e,i){"use strict";i.r(e);var s=i(118);e.default=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.once("destroy",this.destroy,this)}add(t,e){return new s.a(t,e)}}},2:function(t,e,i){"use strict";const s=Phaser.Scene;var r=function(t){return t instanceof s};e.a=function(t){return r(t)?t:t.scene&&r(t.scene)?t.scene:t.parent&&t.parent.scene&&r(t.parent.scene)?t.parent.scene:void 0}}}).default});